!function(){"use strict";angular.module("lhr70",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","toastr","slidePushMenu","ngFileUpload"])}(),function(){"use strict";function e(e,t,o,i,a,n){var r=this;t.hasBackground=!1;var s=o.slug,l=function(){(r.story.trip_day||r.story.trip_month||r.story.trip_year)&&(r.story.date="",r.story.trip_day&&(r.story.date+=r.story.trip_day+"."),r.story.trip_month&&(r.story.date+=r.story.trip_month+"."),r.story.trip_year&&(r.story.date+=r.story.trip_year))},c=function(){t.$broadcast("STORY_TITLE_CHANGE",{from:r.story.journeyStart,title:r.story.title,person_name:r.story.person_name,date:r.story.date})};e.getStoryById(s).then(function(e){r.story=e,l(),c(),t.setMetatags(e.title,a(n(e.details)),"article",e.image)},function(){i.path("/not-found")})}e.$inject=["story","$rootScope","$stateParams","$location","truncateFilter","htmlToPlaintextFilter"],angular.module("lhr70").controller("StoryController",e)}(),function(){"use strict";function e(e,t,o,i){var a=this;t.hasBackground=!0,t.customContainer=!0,t.setMetatags("Tell us your story"),t.hero={title:"Story",subTitle:{top:"Tell us your"},text:{content:["Add your story to receive one of our exciting 70th Birthday gifts. Meet your partner on a flight? Enjoy a magical family holiday? The richer your story, the better birthday present you’ll receive! We can only send presents to UK addresses. Below are some optional questions that might help trigger a story"]},width:230,subTitleStyle:{"text-align":"center","padding-left":"15px","letter-spacing":"1px"}},a.successMessage={title:"Story&nbsp;Added!",content:["Thanks for sharing your story and being part of our 70th birthday.","In the mean time why not read some <a class='success-link link' href='/'> more stories</a> from the last seven decades."]},a.story={heathrow_origin:null},a.reward={one:"6331",two:"",three:"",four:""};var n=function(e){var t=o.defer(),i=new FileReader;return i.readAsDataURL(e),i.onload=function(e){t.resolve(e.target.result)},t.promise};a.isImage=function(){return a.image?"image"==a.image.type.split("/")[0]:!1},a.isImageValid=function(){return a.image?"image"==a.image.type.split("/")[0]:!1},a.submitForm=function(t,o,r){var s=function(e,t,o){return"United Kingdom"===t.country.$viewValue?e.$valid&&t.$valid&&o.$valid:(t.address_line_1.$setValidity("required",!0),t.postcode.$setValidity("required",!0),e.$valid&&t.$valid&&o.$valid)},l=function(){a.isSubmitted=!0,a.heathrow_originNotSet&&(a.story.heathrow_origin=null),"United Kingdom"==a.story.person.country?_satellite.track("submit_success_UK"):(a.successMessage.content="Thanks for sharing your story and being part of our 70th birthday.In the meantime, why not read some more stories from the last seven decades",_satellite.track("submit_success_non_UK")),a.message=a.successMessage},c=function(e){var t="";for(var o in e.data)t=t+e.data[o]+"\n";alert("There was an error submitting your form. Please check the form and try again.\n"+t),a.heathrow_originNotSet&&(a.story.heathrow_origin=null),"United Kingdom"==a.story.person.country?_satellite.track("submit_failure_UK"):(a.successMessage.content="Thanks for sharing your story and being part of our 70th birthday.In the meantime, why not read some more stories from the last seven decades",_satellite.track("submit_failure_non_UK"))},d=function(){null===a.story.heathrow_origin?(a.story.heathrow_origin=!0,a.heathrow_originNotSet=!0):a.heathrow_originNotSet=!1,""!=a.reward.two&&(a.story.person.rewards_number=a.reward.one+a.reward.two+a.reward.three+a.reward.four)};s(t,o,r)?(d(),a.image?n(a.image).then(function(t){a.story.image=t,e.save(a.story).then(l,c)}):e.save(a.story).then(l,c)):(angular.forEach(t.$error.required,function(e){e.$setDirty()}),angular.forEach(o.$error.required,function(e){e.$setDirty()}),angular.forEach(r.$error.required,function(e){e.$setDirty()}),i(function(){angular.element("html, body").animate({scrollTop:angular.element(".to-fix:first").parent().offset().top-80},250)},250))},a.yearOrder=!0;var r=1946,s=(new Date).getFullYear();a.trip_date=new Date,a.dateSelector={};var l=function(e,t){if(e==s&&parseInt(t)==(new Date).getMonth())var o=(new Date).getDate();else var o=new Date(e,t,0).getDate()||31;for(var i=[],a=1;o>=a;a++){var n=a.toString();i.push(n.length<2?"0"+n:n)}return i};a.dateSelector.days=l;var c=function(e){var t,o=[],i=["January","February","March","April","May","June","July","August","September","October","November","December"];t=e==s?(new Date).getMonth():11;for(var a=0;t>=a;a++){var n=(a+1).toString(),r={};r.name=i[a],r.id=n,o.push(r)}return o};a.dateSelector.months=c;for(var d=[],u=s;u>=r;u--)d.push(u.toString());a.dateSelector.years=d}e.$inject=["story","$rootScope","$q","$timeout"],angular.module("lhr70").controller("SubmitStoryController",e)}(),function(){"use strict";function e(e,t,o,i){var a=this;o.hasBackground=!1;var n=t.slug;e.getPageById(n).then(function(e){a.page=e,o.setMetatags(e.title)},function(){i.path("/not-found")})}e.$inject=["page","$stateParams","$rootScope","$location"],angular.module("lhr70").controller("StaticController",e)}(),function(){"use strict";function e(e,t,o){var i=this;t.hasBackground=!0,e.createHomepage().then(function(e){o(function(){i.cards=e},500)}),t.hero={title:"Heathrow",subTitle:{top:"Where has",bottom:"taken you?"},text:{content:["This year marks 70 years of Heathrow. We're celebrating your journeys with a birthday present to unwrap when you share your story. If you’ve ever travelled to loved ones, to new experiences or to beyond your wildest dreams, tell us and receive your gift."]},hasCta:!0},t.setMetatags("Home")}e.$inject=["homepage","$rootScope","$timeout"],angular.module("lhr70").controller("MainController",e)}(),function(){"use strict";function e(e,t){var o=this;t.hasBackground=!0,t.hero={title:"Gifts?",subTitle:"Birthday",text:{content:["For our 70th birthday, we’re asking you to share a Heathrow story to receive a birthday present. Where has Heathrow taken you?","We’ve teamed up with our partners, to offer you some great gifts. Here are some of the gifts you could receive when you <a class='success-link link' href='/story/submit'>Add your story.</a>"]}},e.createGiftsPage().then(function(e){o.cards=e}),t.setMetatags("Gifts")}e.$inject=["gift","$rootScope"],angular.module("lhr70").controller("GiftsController",e)}(),function(){"use strict";function e(e,t,o,i,a,n){var r=this;o.hasBackground=!1;var s=t.slug;e.getGiftById(s).then(function(e){r.gift=e,o.setMetatags(e.title,n(a(e.description)),"article",e.image_thumbnail)},function(){i.path("/not-found")})}e.$inject=["gift","$stateParams","$rootScope","$location","htmlToPlaintextFilter","truncateFilter"],angular.module("lhr70").controller("GiftController",e)}(),function(){"use strict";function e(){function e(e,t,o){e.hasField=function(e){return"undefined"!=typeof e&&null!==e},e.hasCopy=function(e){return"undefined"!=typeof e&&null!==e},e.getSoundcloudUrl=function(e){return t.trustAsResourceUrl("https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/"+e+"&amp;color=350083&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false")},e.getParagraphs=function(t){t=e.altToCaption(t);var o=t?t.split("</p>"):[];return $.each(o,function(e){o[e]&&o[e].length>0?o[e]+="</p>":o.pop(o[e])}),o},e.getFirstParagraph=function(t){return e.getParagraphs(t)[0]},e.getOtherParagraphs=function(t){var o=e.getParagraphs(t);return o.slice(1,o.length)},e.altToCaption=function(e){var t=angular.element("<div>"+e+"</div>"),o=t.find("img");return o.length>0?(t.find("img").each(function(){var e=angular.element(angular.element(this).wrap("<div class='story-image-wrapper'></div>")).parent();e.append('<span class="story-image-caption">'+angular.element(this).attr("alt")+"</span>")}),t.html()):e},e.getSafeHtml=function(e){return t.trustAsResourceUrl(e)};var i=function(){angular.element(".story-title").on("inview",function(e,t){o.$broadcast("STORY_SHOW_TITLE_IN_NAV",!t)})};i()}e.$inject=["$scope","$sce","$rootScope"];var t={restrict:"E",templateUrl:"app/components/storyContent/storyContent.directive.html",scope:{story:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("storyContent",e)}(),function(){"use strict";function e(){function e(e,t,o,i,a,n,r){var s=this;n(function(){var l=e.find(".story-share-wrapper"),c=!1,d="",u="",p={subject:"",body:""};o.vm.element.$promise.then(function(e){"gift"===r.current.name?(u="It’s Heathrow’s 70th birthday and they’re giving out birthday presents! Add a story for your chance to unwrap it",d="It’s Heathrow’s 70th birthday! For the chance to unwrap this amazing gift, add a story",p.subject="Heathrow’s 70th birthday",p.body="It’s Heathrow’s 70th birthday and they’re giving out birthday presents! Add a story for your chance to unwrap this gift "+t.encodeURIComponent(i.absUrl())):(u="Heathrow presents ‘"+e.title+"’ Hear this amazing story as the airport celebrates 70 years of beautiful journeys.",d="‘"+e.title+"’ An amazing new story for @Heathrow’s 70th birthday",p.subject="A new story for Heathrow’s 70th birthday",p.body="Heathrow presents ‘"+e.title+"’, a amazing new story to celebrate their 70th anniversary this year. You can also add you own story for the chance to receive a birthday gift.")}),o.getFacebookUrl=function(){return"https://www.facebook.com/sharer/sharer.php?u="+t.encodeURIComponent(i.absUrl())+"&quote='"+u+"'"},o.getTwitterUrl=function(){return s.element?"https://twitter.com/intent/tweet?text="+d+" "+t.encodeURIComponent(i.absUrl()):""},o.getEmailContent=function(){return s.element?"mailto:?Subject="+p.subject+"&body="+p.body:""},o.openInNewWindow=function(e){return c||!Modernizr.touchevents?!t.open(e.currentTarget.href,"Share","width=800,height=250"):void e.preventDefault()},o.openShare=function(){Modernizr.touchevents&&(l.addClass("is-active"),n(function(){c=!0},10))};var m=function(){c=!1,l.removeClass("is-active")},g=function(){a.on("click touchstart",function(e){angular.element(e.target).closest(".story-share-inner").length>0||m()})},v=function(){angular.element(t).on("scroll",function(){e.offset().top-t.scrollY<125?l.addClass("is-sticky"):l.removeClass("is-sticky")})},f=function(){v(),Modernizr.touchevents&&g()};f()})}e.$inject=["$element","$window","$scope","$location","$document","$timeout","$state"];var t={restrict:"E",templateUrl:"app/components/share/share.directive.html",scope:{element:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("share",e)}(),function(){"use strict";function e(){function e(e,t,o,i,a,n,r){var s,l=this,c=function(){function t(){s=new YT.Player("player",{height:"100%",width:"100%",videoId:l.story.youtube_id,events:{onReady:i,onStateChange:n}})}function i(t){(r.query("screen-md")||r.query("screen-lg"))&&t.target.playVideo(),e.videoActive=!0,e.$apply();var o=s.requestFullScreen||s.mozRequestFullScreen||s.webkitRequestFullScreen;o&&o.bind(s)()}function n(e){e.data!=YT.PlayerState.ENDED||u||(u=!0)}if(o.hasYoutubeAPI)t();else{var c=angular.element("<script>"),d=angular.element("script")[0];d.parentNode.insertBefore(c[0],d),c.attr("src","https://www.youtube.com/player_api"),o.hasYoutubeAPI=!0,a.onYouTubePlayerAPIReady=function(){t()}}var u=!1};e.hasVideo=function(){return l.story&&null!==l.story.youtube_id&&"undefined"!=typeof l.story.youtube_id},e.getBackground=function(e){return{"background-image":"url("+e+")"}},e.closeVideo=function(){s.stopVideo(),e.videoActive=!1},e.playVideo=function(){"undefined"==typeof s?c():(e.videoActive=!0,n(function(){s.playVideo()},0))}}e.$inject=["$scope","$sce","$rootScope","$document","$window","$timeout","$media"];var t={restrict:"E",templateUrl:"app/components/storyHeader/storyHeader.directive.html",scope:{story:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("storyHeader",e)}(),angular.module("lhr70").directive("rewardInput",function(){return{restrict:"A",link:function(e,t){t.on("input",function(e){if(t.val().length==t.attr("maxlength")){var o=t.next();o.length&&o[0].focus()}})}}}),angular.module("lhr70").directive("cardParallax",["$window","$document","$timeout","$media",function(e,t,o,i){return function(a,n){var r=[],s=Math.max(t[0].documentElement.clientHeight,e.innerHeight),l=function(e){var t=e.getBoundingClientRect(),o=80*-(t.top/s);i.query("screen-xs")&&(o=80*-(t.top/s)),o+=80,0>o&&(o=0),o>100&&(o=100),e.style.backgroundPosition="50% "+o+"%"},c=function(e){for(var t=0;t<e.length;t++){var o=e[t];l(o)}};o(function(){var e=function(){c(angular.element(n).find(".card.lg,.card.sm"));for(var e=angular.element(n).find(".card"),t=0;t<e.length;t++){var o=e[t];angular.element(o).on("inview",function(e,t){var o=angular.element(e.currentTarget);if(t)(o.hasClass("lg")||o.hasClass("sm"))&&r.push(e.currentTarget),o.addClass("visible");else{var i=r.indexOf(e.currentTarget);o.removeClass("visible"),-1!=i&&(o.hasClass("lg")||o.hasClass("sm"))&&r.splice(i,1)}})}};e(),a.$watch(function(e){return e.loadedCards.length},function(){e()}),t.bind("scroll",function(){r.length&&c(r)})},isOldIE?1500:0)}}]),function(){"use strict";function e(){function e(e,t){e.getSafeContent=function(e){return t.trustAsResourceUrl(e)}}e.$inject=["$scope","$sce"];var t={restrict:"E",templateUrl:"app/components/pageContent/pageContent.directive.html",scope:{page:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("pageContent",e)}(),function(){"use strict";angular.module("lhr70").directive("onFinishRender",["$timeout",function(e){return{restrict:"A",link:function(t){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}])}(),function(){"use strict";function e(){function e(e,t,o,i){function a(){var o=i.path().split("/"),a=o[1],r=o[2];t.navAlwaysVisible="story"===a&&"submit"!==r||"gift"===a||"page"===a,t.isHomePage=""===a,t.isStoryPage="story"===a&&"submit"!==r,t.isGiftPage="gifts"===a,t.isHowItWorksPage="page"==a&&"how-it-works"==r,t.isTOC="page"==a&&"terms"==r,t.navAlwaysVisible?c.addClass("visible"):e(function(){t.navAlwaysVisible||(isOldIE?e(function(){n()},1500):n())},100)}function n(){angular.element(".hero-box").on("inview",function(t,o){e(function(){o?c.removeClass("visible"):c.addClass("visible")})})}function r(){var e=o.$on("STORY_SHOW_TITLE_IN_NAV",function(e,t){t?c.addClass("has-story-info"):c.removeClass("has-story-info")});o.$on("$destroy",e)}function s(){var e=o.$on("STORY_TITLE_CHANGE",function(e,o){t.storyInfo=o});o.$on("$destroy",e)}function l(){a(),r(),e(function(){t.navAlwaysVisible||n()},100),s()}var c=angular.element(".navbar"),d=o.$on("$stateChangeStart",function(e,t){c.addClass("is-transitioning"),("gifts"===t.name||"home"===t.name||"storySubmit"===t.name)&&c.removeClass("visible")}),u=o.$on("$stateChangeSuccess",function(){e(function(){c.removeClass("is-transitioning")},100),l()});o.$on("$destroy",u),o.$on("$destroy",d),l()}e.$inject=["$timeout","$scope","$rootScope","$location"];var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("navbar",e)}(),function(){"use strict";function e(){function e(e,t,o,i){function a(){angular.element(document).click(function(t){angular.element(t.target).closest(".menu").length||angular.element(t.target).is(".menu")||s.hasClass("is-active")&&(e.closeMenu(),e.$apply())})}function n(){l(),a()}var r=angular.element(".menu-body"),s=angular.element(".menu");e.active=!1,e.toggleMenu=function(){s.toggleClass("is-active"),r.toggleClass("has-active-menu"),e.active=!e.active};var l=function(){var t=o.path().split("/"),i=t[1];e.isHomePage="home"===i,e.isGiftsPage="gifts"===i};e.closeMenu=function(){r.removeClass("has-active-menu"),s.removeClass("is-active"),e.active=!1},e.focusToMenu=function(t){9==t.keyCode&&e.toggleMenu()};var c=t.$on("$stateChangeSuccess",function(){e.closeMenu(),n(),l()});t.$on("$destroy",c),n()}e.$inject=["$scope","$rootScope","$location","$timeout"];var t={restrict:"E",templateUrl:"app/components/menu/menu.html",scope:{},controller:e};return t}angular.module("lhr70").directive("menu",e)}(),function e(t,o,i){function a(r,s){if(!o[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(n)return n(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=o[r]={exports:{}};t[r][0].call(d.exports,function(e){var o=t[r][1][e];return a(o?o:e)},d,d.exports,e,t,o,i)}return o[r].exports}for(var n="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(e,t,o){/*

     MasonJS
     Author: Drew Dahlman - Edited by Krish Joshi
     Version: 2.0.3
     License: MIT

     Copyright (c) 2015 Drew Dahlman

     Permission is hereby granted, free of charge, to any person obtaining
     a copy of this software and associated documentation files (the
     "Software"), to deal in the Software without restriction, including
     without limitation the rights to use, copy, modify, merge, publish,
     distribute, sublicense, and/or sell copies of the Software, and to
     permit persons to whom the Software is furnished to do so, subject to
     the following conditions:

     The above copyright notice and this permission notice shall be
     included in all copies or substantial portions of the Software.

     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
     MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
     LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
     OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
     WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

     Krish's edit
     To fit our grid and margins, I've changed the script such that on mobile it will make the width of the cards
     30px smaller then the window, which gives an illusion that we have a fixed margin
     */
!function(e){return e.fn.mason=function(t,o){var i,a,n,r,s,l,c;return r={itemSelector:"",ratio:0,sizes:[],columns:[[0,480,1],[480,780,2],[780,1080,3],[1080,1320,4],[1320,1680,5]],promoted:[],filler:{itemSelector:t.itemSelector,filler_class:"mason_filler",keepDataAndEvents:!1},randomSizes:!1,randomFillers:!1,layout:"none",gutter:0,debug:!1},i=null,n={container:e("<div id='debug'></div>"),block:"<div class='mason-debug' style='background-color: rgba(244, 67, 54, .5); float: left;'></div>"},l="<div class='mason_clear' style='clear:both; position:relative;'></div>",o&&(a={complete:o}),s={block:{height:0,width:0},matrix:[],startWidth:0},this.each(function(){var d,u,p,m,g,v,f,h,y,b;if(f=e.extend(r,t),d=e.extend(a,o),i=e(this),b=[],h=function(){return f.debug&&console.log("SETUP"),i.children(".mason_clear").length<1&&i.append(l),s.block.height=Math.round(parseFloat(i.width()/u()/f.ratio)).toFixed(2),s.block.width=Math.round(parseFloat(i.width()/u())).toFixed(2),s.startWidth=i.width(),y(),c=h,f.debug?(console.log("############## Running In Debug Mode ##############"),p()):void 0},y=function(){function t(){i.children(""+f.itemSelector,"."+f.filler.filler_class).each(function(){o=e(this);var t=e(window).width()-30,i=o;i.hasClass("gftLg")?i.css("height",t+75+"px"):i.css("height",t+"px"),i.css("width",t+"px"),i.css("margin","15px")})}var o;return 1!==u()?(i.children(""+f.itemSelector,"."+f.filler.filler_class).each(function(){var t,i,a,n,r,l,c;for(o=e(this),i=0,a=!1,n=0;i<f.promoted.length;)o.hasClass(f.promoted[i][0])&&(a=!0,n=i),i++;return a?(l=f.promoted[n],o.data("size",n),o.data("promoted",!0),t=parseFloat(s.block.height*l[2]).toFixed(0),t-=2*f.gutter,c=parseFloat(s.block.width*l[1]).toFixed(0),c-=2*f.gutter):(r=Math.floor(Math.random()*f.sizes.length),l=f.sizes[r],o.data("size",r),t=parseFloat(s.block.height*l[1]).toFixed(0),t-=2*f.gutter,c=parseFloat(s.block.width*l[0]).toFixed(0),c-=2*f.gutter),o.height(t+"px"),o.width(c-5+"px"),o.css({margin:f.gutter})}),g()):(t(),"undefined"!=typeof d.complete?d.complete():void 0)},g=function(){var t,o,a,n,r;for(a=u(),n=i.height(),t=Math.round(n/s.block.height),s.matrix=[],r=0;t>r;){for(s.matrix[r]=[],o=0;a>o;)s.matrix[r][o]=!1,o++;r++}return i.children(""+f.itemSelector).each(function(){var t,o,i,a,n,l,c,d,u,p;for(t=e(this),l=Math.round(t.position().left/s.block.width),u=Math.round(t.position().top/s.block.height),d=parseFloat(t.data("size")),t.data("promoted")?(n=f.promoted[d][2],p=f.promoted[d][1],o=n*p):(n=f.sizes[d][1],p=f.sizes[d][0],o=n*p),r=0,c=[];o>r;){for(i=0;n>i;){for(a=0,s.matrix[u+i][l]=!0;p>a;)s.matrix[u+i][l+a]=!0,a++;i++}c.push(r++)}return c}),m()},m=function(){var t,o,a,n,r,l,c,u,p;for(l=0,n=e(""+f.filler.itemSelector).not("."+f.filler.filler_class).length,a=-1;l<s.matrix.length;){for(o=0;o<s.matrix[l].length;)s.matrix[l][o]||(r=s.block.height,c=s.block.width,u=l*r+f.gutter,p=o*c+f.gutter,r-=2*f.gutter,c-=2*f.gutter,f.randomFillers?a=Math.floor(Math.random()*n):(n>a&&a++,a===n&&(a=0)),t=e(""+f.filler.itemSelector).not("."+f.filler.filler_class).eq(a).clone(f.filler.keepDataAndEvents),t.addClass(f.filler.filler_class),t.css({position:"absolute",top:u+"px",left:p+"px",height:r+"px",width:c+"px",margin:"0px"}),t.appendTo(i)),o++;l++}return i.width()<s.startWidth?e(window,i).trigger("resize"):"undefined"!=typeof d.complete?d.complete():void 0},u=function(){var e,t,o,a;if(a=parseFloat(i.width()),e=0,t=f.columns.length-1,a>=f.columns[t[1]])e=f.columns[t[2]];else for(o=0;t>=o;)a>f.columns[o][0]&&f.columns[o][1]&&(e=f.columns[o][2]),o++;return Math.floor(e)},p=function(){var t,o,a,r,c,d,p;for(t=i.parent(),c=u(),d=i.height(),a=d/s.block.height,n.container.css({position:"absolute",top:"0",left:"0",height:i.height(),width:i.width()}),p=0;a>p;){for(r=0;c>r;)o=e(n.block),o.css({height:s.block.height-2*f.gutter,width:s.block.width-2*f.gutter,margin:f.gutter}),n.container.append(o),r++;p++}return n.container.append(l),t.prepend(n.container)},"fluid"===f.layout){v=null;var w=e(window).width();e(window,i).on("resize",function(t){return function(t){return w!==e(window).width()?(w=e(window).width(),e("."+f.filler.filler_class).remove(),s.matrix=[],clearTimeout(v),v=null,v=setTimeout(function(){return h()},0)):void 0}}(this))}return h()}),{destroy:function(){return e(window,i).off("resize")},relayout:function(){c()}}}}(jQuery)},{}]},{},[1]),angular.module("lhr70").directive("masonaryGrid",["$log","$timeout","$media",function(e,t,o){return function(e,i){var a,n=function(){var e=angular.element(window).width(),i=angular.element(".card.gftLg:first").width()/7;angular.element(".jig-grid").removeClass("grid-loaded"),angular.element(".loader").removeClass("loaded");var a=function(){var e={};return o.query("tablet")?(e.largeBlock={width:(5*i-5).toString()+"px",height:(2*i).toString()+"px"},e.smallBlock={width:(4*i).toString()+"px",height:(2*i+4).toString()+"px"},e.contentBlock={height:(i+2).toString()+"px"},e.ctaBlock={"padding-top":(1.5*i).toString()+"px"},e.ctaBorder={width:(4*i).toString()+"px"},e.firstBlock={top:i.toString()+"px"}):(e.largeBlock={width:(5*i).toString()+"px",height:(2*i-6).toString()+"px"},e.smallBlock={width:(5*i).toString()+"px",height:(2*i).toString()+"px"},e.ctaBlock={"padding-top":(2.5*i).toString()+"px"},e.ctaBorder={width:"100%"},e.firstBlock={top:"0px"}),e},n=a();jss.set(".lg .story--copy",n.largeBlock),jss.set(".sm .story--copy",n.smallBlock),jss.set(".lg .content, .sm .content",n.contentBlock),jss.set(".cta,.gftCta",n.ctaBlock),jss.set(".cta-border",n.ctaBorder),jss.set(".lg .story--copy",n.largeBlock),jss.set(".homepage .jig-grid:nth-child(1) .card:nth-child(1)",n.firstBlock),angular.element(".jig-grid").addClass("grid-loaded"),angular.element(".loader").addClass("loaded"),t(function(){function t(){for(var t=angular.element(".card"),o=e-30,i=0;i<t.length;i++){var a=angular.element(t[i]);0==i&&a.hasClass("gftLg")||0==i&&a.hasClass("gftHero")?a.css("height",o+75+"px"):a.css("height",o+"px"),a.css("width",o+"px"),a.css("margin","15px")}}var i=angular.element(".card.cta,.card.gftCta");if(o.query("tablet")){e=e>1200?1200:e;for(var a=e/2,n={left:a-.55*a,right:a},r=0;r<i.length;r++){var s=angular.element(i[r]);s.width(s.width()-18),s.height(s.height()-65);var l=s.position();if(l.left>n.left&&l.left<n.right&&r<i.length){var c=s.next();l.top==l.top&&(c.insertBefore(s),l=s.position(),l.left>n.left&&l.left<n.right&&s.remove())}s.removeClass("left"),s.removeClass("right"),l.left>n.left?s.addClass("right"):s.addClass("left")}}else i.removeClass("left"),i.addClass("right"),t()},50)};e.$watch(function(e){return e.loadedCards.length},function(){t(function(){"undefined"!=typeof a?(n(),a.relayout()):a=angular.element(i).mason({itemSelector:".card",ratio:1,promoted:[["lg",7,7],["sm",5,6],["qt",4,4],["sn",5,5],["cta",2,4],["gftCta",2,4],["gftHero",12,4],["gft",4,4],["gftLg",7,7],["gftSm",4,4]],columns:[[0,608,1],[608,1680,12]],filler:{itemSelector:".filler",filler_class:"mason-filler"},gutter:5,layout:"fluid"},n)},100)})}}]),angular.module("lhr70").directive("infiniteScroll",["$rootScope","$window","$timeout",function(e,t,o){return{link:function(i,a,n){var r,s,l,c;return t=angular.element(t),l=0,null!=n.infiniteScrollDistance&&i.$watch(n.infiniteScrollDistance,function(e){return l=parseInt(e,10)}),c=!0,r=!1,null!=n.infiniteScrollDisabled&&i.$watch(n.infiniteScrollDisabled,function(e){return c=!e,c&&r?(r=!1,s()):void 0}),s=function(){var o,s,d,u;return u=t.height()+t.scrollTop(),o=a.offset().top+a.height(),s=o-u,d=s<=t.height()*l,d&&c?e.$$phase?i.$eval(n.infiniteScroll):i.$apply(n.infiniteScroll):d?r=!0:void 0},t.on("scroll",s),i.$on("$destroy",function(){return t.off("scroll",s)}),o(function(){return n.infiniteScrollImmediateCheck?i.$eval(n.infiniteScrollImmediateCheck)?s():void 0:s()},0)}}}]),angular.module("lhr70").directive("imageCropper",function(){return{restrict:"A",scope:{source:"=",type:"="},link:function(e,t){var o=function(o){var i=angular.element("<canvas></canvas>")[0],a=i.getContext("2d"),n=angular.element("<img></img>")[0];n.setAttribute("crossOrigin","anonymous"),n.src=e.source,n.onload=function(){var r=n.height,s=n.width;if(i.height="header-image"==e.type?.86*r:r,i.width="header-image"==e.type?.86*s:s,a.save(),a.beginPath(),"gftLg"==e.type?(a.moveTo(.1*s,0),a.lineTo(.28*s,.8*r),a.lineTo(.76*s,r),a.lineTo(s,.7*r),a.lineTo(s,0)):"header-image"==e.type?(a.moveTo(.13*s,0),a.lineTo(.24*s,.6*r),a.lineTo(.76*s,.85*r),a.lineTo(s,.45*r),a.lineTo(s,0)):(a.moveTo(.025*s,0),a.lineTo(.16*s,.7*r),a.lineTo(.83*s,r),a.lineTo(s,.8*r),a.lineTo(s,0)),a.closePath(),a.clip(),"header-image"==e.type){var l=0,c=0,d=s,u=r,p=.86*d,m=.86*u,g=0,v=0;a.drawImage(n,l,c,d,u,g,v,p,m)}else a.drawImage(n,0,0);a.restore(),"header-image"==e.type?t[0].src=i.toDataURL("image/png",50):t[0].src=i.toDataURL("image/png",10),angular.element(t[0]).data("cropperAdded",!0),o()}},i=e.$watch(function(){return e.source},function(e){"undefined"!=typeof e&&o(i)})}}}),function(){"use strict";function e(){function e(e){var t=this,o=15;e.loadedCards=t.cards.splice(0,o+1),e.loadMore=function(){if(t.cards.length){var i=t.cards.splice(0,o);e.loadedCards=e.loadedCards.concat(i)}}}e.$inject=["$scope"];var t={restrict:"EA",templateUrl:"app/components/gifts/gifts.directive.html",scope:{cards:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("giftsBlock",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/giftHeader/giftHeader.directive.html",scope:{image:"=",logo:"="},controller:e};return t}angular.module("lhr70").directive("giftHeader",e)}(),function(){"use strict";function e(){function e(e,t,o){e.hasField=function(e){return e&&e.length>0},e.getSoundcloudUrl=function(e){return t.trustAsResourceUrl("https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/"+e+"&amp;color=350083&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false")};var i=function(){angular.element(".gift-title").on("inview",function(e,t){o.$broadcast("STORY_SHOW_TITLE_IN_NAV",!t)})};i()}e.$inject=["$scope","$sce","$rootScope"];var t={restrict:"E",templateUrl:"app/components/giftContent/giftContent.directive.html",scope:{gift:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("giftContent",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"A",templateUrl:"app/components/footer/footer.directive.html",scope:{story:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("footer",e)}(),function(){"use strict";function e(){function e(e){var t=this,o=angular.element(".cookie-consent");t.showCookieConsent=function(){var t=e.get("cookieConsent");return"y"===t},t.closePanel=function(){var t=new Date,i=new Date(t.getFullYear()+1,t.getMonth(),t.getDate());e.put("cookieConsent","y",{expires:i}),o.hide("slow")}}e.$inject=["$cookies"];var t={restrict:"A",templateUrl:"app/components/cookieConsent/cookieConsent.directive.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("cookieConsent",e)}(),function(){"use strict";function e(){function e(e,t){e.isLastElement=function(){return e.currentSlide===e.images.length-1},e.isFirstElement=function(){return 0===e.currentSlide};var o=function(){var e=angular.element(".carousel-inner").slick({prevArrow:angular.element(".carousel-prev"),nextArrow:angular.element(".carousel-next"),infinite:!1});e.on("beforeChange",function(e,t,o,a){i(a)})},i=function(o){angular.element(".carousel-current").addClass("is-animating"),t(function(){e.currentSlide=o,e.$apply(),angular.element(".carousel-current").removeClass("is-animating")},300)},a=function(){e.currentSlide=0,e.$on("ngRepeatFinished",function(){o()})};a()}e.$inject=["$scope","$timeout"];var t={restrict:"E",templateUrl:"app/components/carousel/carousel.directive.html",scope:{images:"="},controller:e};return t}angular.module("lhr70").directive("carousel",e)}(),function(){"use strict";function e(){function e(e){var t=this;e.loadedCards=t.cards.splice(0,20),e.isStory=function(e){return"qt"==e.className||"sn"==e.className||"cta"==e.className||"gftCta"==e.className||"sm"==e.className||"lg"==e.className},e.isGift=function(e){return"gft"==e.className||"gftLg"==e.className||"gftSm"==e.className||"gftHero"==e.className},e.getUrl=function(t){return"gftCta"===t.className?"/gifts":"cta"===t.className?"/story/submit":e.isGift(t)?"/gift/"+t.slug:"/story/"+t.slug},e.loadMore=function(){if(t.cards.length){var o=t.cards.splice(0,20);e.loadedCards=e.loadedCards.concat(o)}}}e.$inject=["$scope"];var t={restrict:"EA",templateUrl:"app/components/cards/cards.directive.html",scope:{cards:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("cardsBlock",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"EA",templateUrl:"app/components/cardStory/story.directive.html",scope:{story:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("storyBlock",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"EA",templateUrl:"app/components/cardSnippet/snippet.directive.html",scope:{story:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("snippetBlock",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"EA",templateUrl:"app/components/cardQuote/quote.directive.html",scope:{story:"=",block:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("quoteBlock",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"EA",templateUrl:"app/components/cardGiftHero/giftHero.directive.html",scope:{gift:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("giftHeroBlock",e)}(),function(){"use strict";function e(){function e(){var e=this;e.isGiftsPage=angular.element(".page-gifts").length}var t={restrict:"EA",templateUrl:"app/components/cardGift/gift.directive.html",scope:{gift:"=",color:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("giftBlock",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"EA",templateUrl:"app/components/cardCta/cta.directive.html",scope:{type:"=",href:"=",title:"=",copy:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("lhr70").directive("ctaBlock",e)}(),function(e,t,o){function i(e,t){return typeof e===t}function a(){var e,t,o,a,n,r,s;for(var l in y)if(y.hasOwnProperty(l)){if(e=[],t=y[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(o=0;o<t.options.aliases.length;o++)e.push(t.options.aliases[o].toLowerCase());for(a=i(t.fn,"function")?t.fn():t.fn,n=0;n<e.length;n++)r=e[n],s=r.split("."),1===s.length?w[s[0]]=a:(!w[s[0]]||w[s[0]]instanceof Boolean||(w[s[0]]=new Boolean(w[s[0]])),w[s[0]][s[1]]=a),x.push((a?"":"no-")+s.join("-"))}}function n(e){var t=C.className,o=w._config.classPrefix||"";if(k&&(t=t.baseVal),w._config.enableJSClass){var i=new RegExp("(^|\\s)"+o+"no-js(\\s|$)");t=t.replace(i,"$1"+o+"js$2")}w._config.enableClasses&&(t+=" "+o+e.join(" "+o),k?C.className.baseVal=t:C.className=t)}function r(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):k?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function s(){var e=t.body;return e||(e=r(k?"svg":"body"),e.fake=!0),e}function l(e,o,i,a){var n,l,c,d,u="modernizr",p=r("div"),m=s();if(parseInt(i,10))for(;i--;)c=r("div"),c.id=a?a[i]:u+(i+1),p.appendChild(c);return n=r("style"),n.type="text/css",n.id="s"+u,(m.fake?m:p).appendChild(n),m.appendChild(p),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(t.createTextNode(e)),p.id=u,m.fake&&(m.style.background="",m.style.overflow="hidden",d=C.style.overflow,C.style.overflow="hidden",C.appendChild(m)),l=o(p,e),m.fake?(m.parentNode.removeChild(m),C.style.overflow=d,C.offsetHeight):p.parentNode.removeChild(p),!!l}function c(e,t){return!!~(""+e).indexOf(t)}function d(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function u(t,i){var a=t.length;if("CSS"in e&&"supports"in e.CSS){for(;a--;)if(e.CSS.supports(d(t[a]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var n=[];a--;)n.push("("+d(t[a])+":"+i+")");return n=n.join(" or "),l("@supports ("+n+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return o}function p(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,o){return t+o.toUpperCase()}).replace(/^-/,"")}function m(e,t,a,n){function s(){d&&(delete H.style,delete H.modElem)}if(n=i(n,"undefined")?!1:n,!i(a,"undefined")){var l=u(e,a);if(!i(l,"undefined"))return l}for(var d,m,g,v,f,h=["modernizr","tspan"];!H.style;)d=!0,H.modElem=r(h.shift()),H.style=H.modElem.style;for(g=e.length,m=0;g>m;m++)if(v=e[m],f=H.style[v],c(v,"-")&&(v=p(v)),H.style[v]!==o){if(n||i(a,"undefined"))return s(),"pfx"==t?v:!0;try{H.style[v]=a}catch(y){}if(H.style[v]!=f)return s(),"pfx"==t?v:!0}return s(),!1}function g(e,t){return function(){return e.apply(t,arguments)}}function v(e,t,o){var a;for(var n in e)if(e[n]in t)return o===!1?e[n]:(a=t[e[n]],i(a,"function")?g(a,o||t):a);return!1}function f(e,t,o,a,n){var r=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+P.join(r+" ")+r).split(" ");return i(t,"string")||i(t,"undefined")?m(s,t,a,n):(s=(e+" "+A.join(r+" ")+r).split(" "),v(s,t,o))}function h(e,t,i){return f(e,o,o,t,i)}var y=[],b={_version:"3.3.1",_config:{classPrefix:"supports-",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var o=this;setTimeout(function(){t(o[e])},0)},addTest:function(e,t,o){y.push({name:e,fn:t,options:o})},addAsyncTest:function(e){y.push({name:null,fn:e})}},w=function(){};w.prototype=b,w=new w;var x=[],C=t.documentElement,k="svg"===C.nodeName.toLowerCase(),S=r("input"),$="autocomplete autofocus list placeholder max min multiple pattern required step".split(" "),_={};w.input=function(t){for(var o=0,i=t.length;i>o;o++)_[t[o]]=!!(t[o]in S);return _.list&&(_.list=!(!r("datalist")||!e.HTMLDataListElement)),_}($);var T="Moz O ms Webkit",A=b._config.usePrefixes?T.toLowerCase().split(" "):[];b._domPrefixes=A;var I=function(){function e(e,t){var a;return e?(t&&"string"!=typeof t||(t=r(t||"div")),e="on"+e,a=e in t,!a&&i&&(t.setAttribute||(t=r("div")),t.setAttribute(e,""),a="function"==typeof t[e],t[e]!==o&&(t[e]=o),t.removeAttribute(e)),a):!1}var i=!("onblur"in t.documentElement);return e}();b.hasEvent=I,/*!
{
  "name": "DOM Pointer Events API",
  "property": "pointerevents",
  "tags": ["input"],
  "authors": ["Stu Cox"],
  "notes": [
    {
      "name": "W3C spec",
      "href": "https://www.w3.org/TR/pointerevents/"
    }
  ],
  "warnings": ["This property name now refers to W3C DOM PointerEvents: https://github.com/Modernizr/Modernizr/issues/548#issuecomment-12812099"],
  "polyfills": ["handjs"]
}
!*/
w.addTest("pointerevents",function(){var e=!1,t=A.length;for(e=w.hasEvent("pointerdown");t--&&!e;)I(A[t]+"pointerdown")&&(e=!0);return e});/*!
{
  "name": "CSS Supports",
  "property": "supports",
  "caniuse": "css-featurequeries",
  "tags": ["css"],
  "builderAliases": ["css_supports"],
  "notes": [{
    "name": "W3 Spec",
    "href": "http://dev.w3.org/csswg/css3-conditional/#at-supports"
  },{
    "name": "Related Github Issue",
    "href": "github.com/Modernizr/Modernizr/issues/648"
  },{
    "name": "W3 Info",
    "href": "http://dev.w3.org/csswg/css3-conditional/#the-csssupportsrule-interface"
  }]
}
!*/
var E="CSS"in e&&"supports"in e.CSS,M="supportsCSS"in e;w.addTest("supports",E||M),/*!
{
  "name": "placeholder attribute",
  "property": "placeholder",
  "tags": ["forms", "attribute"],
  "builderAliases": ["forms_placeholder"]
}
!*/
w.addTest("placeholder","placeholder"in r("input")&&"placeholder"in r("textarea"));var N=b._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];b._prefixes=N;var q=b.testStyles=l;/*!
{
  "name": "Touch Events",
  "property": "touchevents",
  "caniuse" : "touch",
  "tags": ["media", "attribute"],
  "notes": [{
    "name": "Touch Events spec",
    "href": "https://www.w3.org/TR/2013/WD-touch-events-20130124/"
  }],
  "warnings": [
    "Indicates if the browser supports the Touch Events spec, and does not necessarily reflect a touchscreen device"
  ],
  "knownBugs": [
    "False-positive on some configurations of Nokia N900",
    "False-positive on some BlackBerry 6.0 builds – https://github.com/Modernizr/Modernizr/issues/372#issuecomment-3112695"
  ]
}
!*/
w.addTest("touchevents",function(){var o;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)o=!0;else{var i=["@media (",N.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");q(i,function(e){o=9===e.offsetTop})}return o}),/*!
{
  "name": "CSS :target pseudo-class",
  "caniuse": "css-sel3",
  "property": "target",
  "tags": ["css"],
  "notes": [{
    "name": "MDN documentation",
    "href": "https://developer.mozilla.org/en-US/docs/Web/CSS/:target"
  }],
  "authors": ["@zachleat"],
  "warnings": ["Opera Mini supports :target but doesn't update the hash for anchor links."]
}
!*/
w.addTest("target",function(){var t=e.document;if(!("querySelectorAll"in t))return!1;try{return t.querySelectorAll(":target"),!0}catch(o){return!1}});var P=b._config.usePrefixes?T.split(" "):[];b._cssomPrefixes=P;var B={elem:r("modernizr")};w._q.push(function(){delete B.elem});var H={style:B.elem.style};w._q.unshift(function(){delete H.style}),b.testAllProps=f,b.testAllProps=h,/*!
{
  "name": "CSS Background Clip Text",
  "property": "backgroundcliptext",
  "authors": ["ausi"],
  "tags": ["css"],
  "notes": [
    {
      "name": "CSS Tricks Article",
      "href": "https://css-tricks.com/image-under-text/"
    },
    {
      "name": "MDN Docs",
      "href": "https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip"
    },
    {
      "name": "Related Github Issue",
      "href": "https://github.com/Modernizr/Modernizr/issues/199"
    }
  ]
}
!*/
w.addTest("backgroundcliptext",function(){return h("backgroundClip","text")}),a(),n(x),delete b.addTest,delete b.addAsyncTest;for(var U=0;U<w._q.length;U++)w._q[U]();e.Modernizr=w}(window,document),function(){"use strict";function e(e){var t=e("/api/story/:id",{},{save:{method:"POST"}});return{getStoryById:function(e){return t.get({id:e}).$promise},getAll:function(){return t.query().$promise},save:function(e){var o=new t(e);return o.$save()}}}e.$inject=["$resource"],angular.module("lhr70").service("story",e)}(),function(){"use strict";function e(e){var t=e("/api/page/:id",{},{save:{method:"POST"}});return{getPageById:function(e){return t.get({id:e}).$promise},getAll:function(){return t.query().$promise}}}e.$inject=["$resource"],angular.module("lhr70").service("page",e)}(),function(){"use strict";function e(e,t,o){var i={tablet:"(min-width: 768px)","screen-xs":"(max-width:767px)","screen-sm":"(min-width:768px) and (max-width:991px)","screen-md":"(min-width:992px) and (max-width:1199px)","screen-ld":"(min-width:1200px)"};return{query:function(e){return this.raw(i[e])},raw:function(i){return e.value=o.matchMedia(i).matches,o.onresize=function(){e.value=o.matchMedia(i).matches,t.$apply()},e.value}}}function t(){return{}}e.$inject=["Media","$rootScope","$window"],angular.module("lhr70").service("$media",e).factory("Media",t)}(),angular.module("lhr70").factory("mapCards",function(){var e={};return e.createCard=function(e,t){var o={gift:"gft",feature_gift:"gftLg",gift_small:"gftSm",gift_hero:"gftHero",story_cta:"cta",gift_cta:"gftCta",image:"sm",featured:"lg",quote:"qt",snippet:"sn"};return"undefined"!=typeof t?(t.className=o[e],null===t.image||"image"!=e&&"featured"!=e||(t.background={"background-image":"url("+t.image+")"})):t={className:o[e]},t},e}),function(){"use strict";function e(e,t,o){var i=e("/api/home/");return{getData:function(){return i.query().$promise},createHomepage:function(){var e=o.defer();return this.getData().then(function(o){for(var i=[],a=0;a<o.length;a++){var n=o[a];i.push(t.createCard(n.display_as,n)),a>4&&a%3==0&&(a%2==0?i.push(t.createCard("gift_cta")):i.push(t.createCard("story_cta")))}e.resolve(i)}),e.promise}}}e.$inject=["$resource","mapCards","$q"],angular.module("lhr70").service("homepage",e)}(),function(){"use strict";function e(e,t,o){var i=e("/api/gift/:id");return{getGiftById:function(e){return i.get({id:e}).$promise},getAll:function(){return i.query().$promise},createGiftsPage:function(){var e=t.defer();return this.getAll().then(function(t){for(var i=[],a=0;a<t.length;a++){var n=t[a];1==n.importance?i.push(o.createCard("gift_hero",n)):i.push(o.createCard("gift_small",n))}e.resolve(i)}),e.promise}}}e.$inject=["$resource","$q","mapCards"],angular.module("lhr70").service("gift",e)}(),function(){"use strict";angular.module("lhr70").filter("newline",["$sce",function(e){return function(t){return t=t.replace(/\n/g,"<br />"),e.trustAsHtml(t)}}]).filter("listify",["$sce",function(e){return function(t){if(t){var o=t.split("\n");t="<ul>";for(var i=0;i<o.length;i++)t+="<li>"+o[i]+"</li>";return t+="</ul>",e.trustAsHtml(t)}}}]).filter("alttocaption",["$sce",function(e){return function(t){if(t){var o=t.split("\n");t="<ul>";for(var i=0;i<o.length;i++)t+="<li>"+o[i]+"</li>";return t+="</ul>",e.trustAsHtml(t)}}}]).filter("htmlToPlaintext",function(){return function(e){return e?String(e).replace(/<[^>]+>/gm,""):""}}).filter("truncate",function(){return function(e,t,o){return isNaN(t)&&(t=500),void 0===o&&(o="..."),e.length<=t||e.length-o.length<=t?e:String(e).substring(0,t-o.length)+o}})}(),function(){"use strict";function e(e,t,o){e.$media=t,e.hasBackground=!1,e.customContainer=!1,e.isOldIE=isOldIE,e.$on("$stateChangeSuccess",function(){_satellite.track("page_view")});var i={title:"Heathrow 70",pageTitle:"Heathrow 70",description:"Where has Heathrow taken you? This year marks 70 years of Heathrow We’re celebrating all your journeys with a birthday present for every story told. If you’ve ever travelled to loved ones, to new experiences or to beyond your wildest dreams, tell us and receive your gift.",type:"website",image:"https://stories.heathrow.com/static/assets/icons/apple-icons/apple-touch-icon-180x180.png"};e.metatags=JSON.parse(JSON.stringify(i)),e.setMetatags=function(t,a,n,r){if(t?(e.metatags.pageTitle="Heathrow 70 | "+t,e.metatags.title=t):(e.metatags.pageTitle=i.title,e.metatags.title=i.title),a?e.metatags.description=a:e.metatags.description=i.description,n?e.metatags.type=n:e.metatags.type=i.type,r){var s=o.absUrl().split(o.path())[0];e.metatags.image=s+r}else e.metatags.image=i.image}}e.$inject=["$rootScope","$media","$location"],angular.module("lhr70").run(e)}(),function(){"use strict";function e(e,t,o){t.rule(function(e,t){var o=t.path(),i="/"===o[o.length-1];if(i){var a=o.substr(0,o.length-1);return a}}),isOldIE?o.html5Mode(!1):o.html5Mode(!0),e.state("home",{url:"/home",templateUrl:"app/pages/main/main.html",controller:"MainController",controllerAs:"main"}).state("storySubmit",{url:"/story/submit",templateUrl:"app/pages/submitStory/submitStory.html",controller:"SubmitStoryController",controllerAs:"scope"}).state("story",{url:"/story/:slug",templateUrl:"app/pages/story/story.html",controller:"StoryController",controllerAs:"scope"}).state("gifts",{url:"/gifts",templateUrl:"app/pages/gifts/gifts.html",controller:"GiftsController",controllerAs:"scope"}).state("gift",{url:"/gift/:slug",templateUrl:"app/pages/gift/gift.html",controller:"GiftController",controllerAs:"scope"}).state("page",{url:"/page/:slug",templateUrl:"app/pages/static/static.html",controller:"StaticController",controllerAs:"scope"}).state("404",{url:"/not-found",templateUrl:"app/components/messageBox/messageBox.html",controller:["$rootScope",function(e){e.hasBackground=!0;var t=this;t.message={title:"404",subTitle:"Error",content:["Sorry. the page you are looking for cannot be found.","Why not <a class='success-link' href='/'>read some of our stories </a> form the last 70 years instead."]}}],controllerAs:"scope"}),t.otherwise(function(e,t){"/"==t.url()||""==t.url()||t.url().contains("?")?t.path("/home"):t.path("/not-found")})}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("lhr70").config(e)}(),function(){"use strict";angular.module("lhr70").constant("malarkey",malarkey).constant("moment",moment)}(),function(){"use strict";function e(e,t,o){e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!0;var i;angular.injector(["ngCookies"]).invoke(["$cookies",function(e){i=e}]),o.defaults.headers.post={"X-CSRFToken":i.get("csrftoken"),"Content-Type":"application/json"}}e.$inject=["$logProvider","toastrConfig","$httpProvider"],angular.module("lhr70").config(e)}(),angular.module("lhr70").run(["$templateCache",function(e){e.put("app/components/cardCta/cta.directive.html","<a class=cta-content ng-href={{vm.href}} title={{vm.title}}><div class=cta-inner><div class=cta-icon ng-class=\"{'cta-icon--story': vm.type == 'cta', 'cta-icon--gift': vm.type == 'gftCta'}\"></div><div class=text-bold>{{vm.title}}</div><div class=text-light ng-if=vm.copy>{{vm.copy}}</div></div></a>"),e.put("app/components/cardGift/gift.directive.html","<div class=gift-info><div class=logo><img class=logo--image ng-src=\"{{vm.isGiftsPage ? vm.gift.logo_full : vm.gift.logo_module}}\" alt=\"{{ vm.gift.merchant }}\"></div><div class=gift-featured><div class=gift-crop ng-class=\"{\n        'gift-crop--pink': vm.color === 'pink',\n        'gift-crop--white': vm.color === 'white'\n      }\">{{vm.gift.className}} <img class=gift-featured--image src={{vm.gift.image_thumbnail}} type=vm.gift.className alt={{vm.gift.title}}></div></div></div><div class=gift-text><div class=gift-cta>ADD YOUR STORY FOR A CHANCE TO RECEIVE...</div><div class=gift-content>{{vm.gift.title}}</div></div><!--<div class=\"filler\"></div>-->"),e.put("app/components/cardGiftHero/giftHero.directive.html",'<div class=gift-info><img class=logo ng-src={{vm.gift.logo_full}} alt={{vm.gift.title}}></div><div class=gift-text><div class=gift-cta>ADD YOUR STORY FOR A CHANCE TO RECEIVE</div><div class=gift-content>{{vm.gift.title}}</div></div><div class=gift-image><div class="gift-crop gift-crop--white"><img src={{vm.gift.image_thumbnail}} type=vm.gift.className alt={{vm.gift.title}}></div></div><!--<div class="filler"></div>-->'),e.put("app/components/cardQuote/quote.directive.html",'<div class=quote ng-class="{\'is-block\': vm.block}"><div class=quote--copy><div class=quote-marks>“</div><div class=quote-text><div class="lg-text text-capitalize">{{ vm.story.short_details ? vm.story.short_details : vm.story.pull_quote }}</div></div></div></div>'),e.put("app/components/cardSnippet/snippet.directive.html",'<div class=snippet><div class=snippet--copy><div class="lg-text text-capitalize"><span ng-bind-html=vm.story.short_details></span></div></div></div>'),e.put("app/components/cardStory/story.directive.html",'<div class=content><div class=story--copy><div class=story--from>LHR <span class=icon-plane--grey></span></div><div class=lhr-gradient-text-lg>{{ vm.story.title }}</div></div></div><!--<div class="filler"></div>-->'),e.put("app/components/cards/cards.directive.html","<div class=cards-wrapper><div class=\"loader cards-loader\">Loading...</div><div ng-if=vm.cards masonary-grid card-parallax class=jig-grid infinite-scroll=loadMore() infinite-scroll-distance=2><div ng-repeat=\"card in loadedCards track by $index\" class=card ng-class=card.className ng-style=card.background><a ng-href={{getUrl(card)}} ng-if=\"isStory(card) && card.className!=='cta' && card.className!=='gftCta'\"><quote-block story=card ng-if=\"card.className=='qt'\" block=true></quote-block><snippet-block story=card ng-if=\"card.className=='sn'\"></snippet-block><story-block story=card ng-if=\"card.className=='sm' || card.className=='lg' \"></story-block></a><a ng-href={{getUrl(card)}} ng-if=isGift(card)><gift-block gift=card color=\"'pink'\"></gift-block></a><cta-block type=card.className href=\"card.className=='cta'?'/story/submit':'/gifts'\" title=\"card.className=='cta'?'add your story':'explore all gifts'\" copy=\"card.className=='cta'?'to receive a birthday gift':''\" ng-if=\"card.className=='cta' || card.className=='gftCta'\"></cta-block></div></div></div>"),e.put("app/components/carousel/carousel.directive.html",'<div class=carousel><div class=carousel-inner><img ng-repeat="(key, value) in images" ng-src={{images[key]}} on-finish-render=ngRepeatFinished></div><nav class=carousel-navigation><button class=carousel-prev ng-class="{\'is-not-active\': isFirstElement()}"></button> <button class=carousel-next ng-class="{\'is-not-active\': isLastElement()}"></button><div class=carousel-pageinfo-wrapper><div class=carousel-pageinfo><span class=carousel-current>{{currentSlide + 1}}</span><span class=carousel-divider>/</span><span class=carousel-max>{{images.length}}</span></div></div></nav></div>'),e.put("app/components/cookieConsent/cookieConsent.directive.html",'<div class=cookie-consent ng-hide=vm.showCookieConsent()><div class=lhs>We use <a href=http://www.heathrow.com/more/help-with-this-website/privacy-notice class=success-link>cookies on this website</a> to ensure we give you the best experience and to see how people use the site. The cookies cannot identify you.<br>If you continue to use the site without changing your browser settings, we’ll assume you are happy with this.</div><div class=rhs><a class="btn btn-close" href=# ng-click=vm.closePanel() title=close></a></div></div>'),e.put("app/components/giftContent/giftContent.directive.html",'<div class=giftdetail-wrapper><div class=giftdetail-title-wrapper><div class=journey-from ng-if=vm.gift.heathrow_origin>LHR<div class=icon-plane></div></div><h1 class=giftdetail-title><span class=giftdetail-title-sub>ADD YOUR STORY FOR A CHANCE TO RECEIVE...</span> <span class=giftdetail-title-copy>{{vm.gift.title}}</span></h1></div><div class=giftdetail-inner><share element=vm.gift></share><div class=giftdetail-content><section class=giftdetail-details-wrapper><section class=giftdetail-details><p class=giftdetail-paragraph ng-bind-html=vm.gift.description></p></section><section class=giftdetail-carousel ng-if="vm.gift.additional_images.length > 1"><carousel images=vm.gift.additional_images></carousel></section><section class=giftdetail-image ng-if="vm.gift.additional_images.length === 1"><img ng-src={{vm.gift.additional_images[0]}}></section><h2 class=giftdetail-subtitle ng-if=vm.gift.included>This gift includes</h2><section class=giftdetail-included ng-if=vm.gift.included ng-bind-html=vm.gift.included></section><h2 class=giftdetail-subtitle>Terms &amp; Conditions</h2><section class=giftdetail-terms ng-if=vm.gift.terms><p ng-bind-html=vm.gift.terms></p></section></section></div></div></div>'),e.put("app/components/footer/footer.directive.html",'<footer class="footer container"><div class=footer-content><div class=footer-ctas><div><a href=/page/how-it-works>How it works</a></div><div><a href=http://www.heathrow.com/more/help-with-this-website/privacy-notice target=_blank>Privacy policy</a></div><div><a href=/page/terms>Terms &amp; Conditions</a></div></div><a href=http://www.heathrow.com/ target=_blank><img class=footer-logo src=/static/assets/images/heathrow_footer_logo2.svg alt="Heathrow Logo"></a></div></footer><!--Adobe Tag Manager code--><script type=text/javascript>_satellite.pageBottom();</script>'),e.put("app/components/giftHeader/giftHeader.directive.html",'<div class=gift-header><div class=gift-header-logo><img ng-src={{logo}}></div><div class=gift-header-image><div class="gift-crop gift-crop--white"><img src={{image}} type="\'header-image\'" ng-src={{image}}></div></div></div>'),e.put("app/components/gifts/gifts.directive.html",'<div class=cards-wrapper><div class="loader cards-loader">Loading...</div><div ng-if=vm.cards masonary-grid card-parallax class="jig-grid page-gifts" infinite-scroll=loadMore() infinite-scroll-distance=1><div ng-repeat="card in loadedCards track by $index" class=card ng-class=card.className ng-style=card.background><a href=/gift/{{card.slug}}><gift-hero-block ng-if="card.className == \'gftHero\'" gift=card></gift-hero-block><gift-block ng-if="card.className != \'gftHero\'" gift=card cardlocation=gifts-page color="\'white\'"></gift-block></a></div></div></div>'),e.put("app/components/herobox/herobox.html",'<div class=logo-box><a href=/ ><img src=/static/assets/images/heath70_logo-main_@x2.png alt="70th anniversary logo"></a></div><div class=hero-box ng-class="{\'has-content\': hero.text.content}" ng-style="{width: hero.width}"><div class=hero-box--text><div class="hero-box--text-md hero-box--subtitle-top" ng-style=hero.subTitleStyle>{{hero.subTitle.top}}</div><!--<div class="hero-box&#45;&#45;text-sm" ng-repeat="line in hero.text.beforeHero">{{line}}</div>--><h1 class=hero-box--text-lg ng-class="{\'hero-box--text-lg--has-sub-title\': hero.subTitle}" ng-style="{\'font-size\': hero.fontSize}">{{hero.title}}</h1><div class="hero-box--text-md hero-box--subtitle-bottom">{{hero.subTitle.bottom}}</div><!--<div class="hero-box&#45;&#45;text-sm" ng-repeat="line in hero.text.afterHero">{{line}}</div>--></div></div><div class="success-box--text hero-box--content" ng-repeat="line in hero.text.content"><span ng-bind-html=line></span></div><div class="success-box--text hero-box--content" ng-show=hero.hasCta><a href=/story/submit class=hero-box--cta><div class=hero-cta>Add your story<div class=icon-circle-border><div class=icon-plane-takeoff--white></div></div></div></a></div>'),e.put("app/components/menu/menu.html","<nav class=menu><label class=menu-icon for=hamburger ng-click=toggleMenu() tabindex=1><span></span><div class=menu-text>Menu</div></label><div class=menu-content id=menu position=right><div class=menu-items ng-show=active><a href=/ ng-class=\"{'active': isHomePage}\" ng-click=closeMenu()>Home page</a> <a href=/gifts ng-class=\"{'active': isGiftsPage}\" ng-click=closeMenu()>All Gifts</a><div class=menu-bottom><a href=/page/how-it-works ng-class=\"{'active': isHowItWorksPage}\" ng-click=closeMenu()>How it works</a> <a href=http://www.heathrow.com/more/help-with-this-website/privacy-notice target=_blank ng-click=closeMenu()>Privacy policy</a> <a href=/page/terms ng-class=\"{'active': isTOC}\" ng-click=closeMenu() ng-keydown=focusToMenu($event)>Terms &amp; Conditions</a></div></div></div></nav>"),e.put("app/components/messageBox/messageBox.html",'<div class=logo-box><a href=/ ><img src=/static/assets/images/heath70_logo-main_@x2.png alt="70th anniversary logo"></a></div><div class="hero-box has-content"><div class=hero-box--text><div class=success-box--text-md ng-bind-html=scope.message.subTitle></div><h1 class=success-box--text-lg ng-bind-html=scope.message.title></h1></div></div><div class="success-box--text hero-box--content" ng-repeat="line in scope.message.content"><ng-bind-html ng-bind-html=line></ng-bind-html></div>'),e.put("app/components/navbar/navbar.html",'<menu></menu><nav class=navbar><div class=lhs><a class=nav--logo href=/ >Heathrow 70\'th Anniversary</a><div class=nav--story-info ng-if=isStoryPage><div class=nav--story-primary><span class=nav--story-from>LHR</span> <span class=icon-plane--white></span> <span class=nav--story-title>{{storyInfo.title}}</span></div><div class=nav--story-secondary><span class=nav--story-author ng-if=storyInfo.person_name>{{storyInfo.person_name}}</span> {{storyInfo.date}}</div></div></div><div class=rhs><a class="btn btn--hero" href=/story/submit>Add your story<span class=icon-plane--departure></span></a></div></nav>'),e.put("app/components/pageContent/pageContent.directive.html","<div class=static-wrapper><div class=static-title-wrapper><h1 class=static-title>{{vm.page.title}}</h1></div><div class=static-inner><div class=static-content><section class=static-details-wrapper><section class=static-details ng-bind-html=getSafeContent(vm.page.content)></section></section></div></div></div>"),e.put("app/components/storyContent/storyContent.directive.html",'<div class=story-wrapper><div class=story-title-wrapper><div class=journey-from>LHR<div class=icon-plane--grey></div></div><h1 class=story-title>{{vm.story.title}}</h1></div><div class=story-inner><share element=vm.story></share><div class=story-content><section class=story-details-wrapper><section class=story-details><p class=story-paragraph ng-if=hasField(vm.story.soundcloud_id)><iframe width=100% height=166 scrolling=no frameborder=no ng-src={{getSoundcloudUrl(vm.story.soundcloud_id)}}></iframe></p><div class=story-paragraph ng-if=hasCopy(vm.story.details) ng-bind-html=getSafeHtml(getFirstParagraph(vm.story.details))></div><div class="qt story-quote" ng-if=vm.story.pull_quote><quote-block story=vm.story></quote-block></div><div class=story-paragraph ng-repeat="paragraph in getOtherParagraphs(vm.story.details) track by $index" ng-bind-html=getSafeHtml(paragraph)></div></section><div class=story-author><span class=story-name>{{vm.story.person_name}}</span> <span class=story-year>{{vm.story.trip_year}}</span></div></section></div></div></div>'),e.put("app/components/share/share.directive.html",'<div class=story-share-wrapper><div class=story-share-container><div class=story-share-inner ng-click=openShare()><button class=story-share-btn><span class=story-share-copy>SHARE</span></button><div class=story-share-content><a ng-href={{getFacebookUrl()}} ng-click=openInNewWindow($event) target=_blank class="story-share-link story-share-link--facebook">Facebook</a> <a ng-href={{getTwitterUrl()}} ng-click=openInNewWindow($event) target=_blank class="story-share-link story-share-link--twitter">Twitter</a> <a ng-href={{getEmailContent()}} class="story-share-link story-share-link--email">Email</a></div></div></div></div>'),e.put("app/components/storyHeader/storyHeader.directive.html",'<div class=story-header ng-class="{\'is-playing-video\': videoActive}" ng-if=vm.story.image><div class=story-hero-image ng-style=getBackground(vm.story.image) ng-if=vm.story.image><div class=container ng-if=hasVideo()><button class="story-hero-play-btn btn" ng-click=playVideo()><i class=story-hero-play-icon></i><span class=story-hero-play-copy>play video</span></button></div></div><div class=story-video-wrapper ng-class="{\'is-playing\': videoActive}"><button class=story-video-close-btn ng-click=closeVideo()></button><div class=story-video-spacer><div class=story-video><div id=player></div></div></div></div></div>'),e.put("app/pages/gift/gift.html",'<div class=gift><gift-header image=scope.gift.image logo=scope.gift.logo_full></gift-header><div class=container><gift-content gift=scope.gift></gift-content></div><div class="cta right"><cta-block type="\'cta\'" href="\'/story/submit\'" title="\'TELL US YOUR STORY\'" copy="\'FOR A CHANCE TO RECEIVE THIS BIRTHDAY GIFT\'"></cta-block></div></div>'),e.put("app/pages/gifts/gifts.html",'<div class="container gifts"><ng-include src="\'app/components/herobox/herobox.html\'"></ng-include><gifts-block ng-if=scope.cards cards=scope.cards></gifts-block><div class="cta right"><cta-block type="\'cta\'" href="\'/story/submit\'" title="\'tell us your story\'" copy="\'for a chance to receive one of these birthday gifts\'"></cta-block></div></div>'),e.put("app/pages/main/main.html",'<div class=homepage><div class=plane><img src=/static/assets/images/hompage_plane_@x2.png alt=""></div><div class=container><ng-include src="\'app/components/herobox/herobox.html\'"></ng-include><cards-block ng-if=main.cards cards=main.cards></cards-block></div><div class="cta right cta-bottom"><div cta-block type="\'cta\'" href="\'/story/submit\'" title="\'ADD YOUR STORY\'" copy="\'TO RECEIVE A BIRTHDAY GIFT\'"></div></div></div>'),e.put("app/pages/static/static.html","<div class=static><div class=container><page-content page=scope.page></page-content></div></div>"),e.put("app/pages/story/story.html",'<div class=story><story-header story=scope.story></story-header><div class=container><story-content story=scope.story></story-content></div><div class="cta right"><cta-block type="\'cta\'" href="\'/story/submit\'" title="\'ADD YOUR STORY\'" copy="\'TO RECEIVE A BIRTHDAY GIFT\'"></cta-block></div></div>'),e.put("app/pages/submitStory/submitStory.html",'<div class=container--custom><div class=forms ng-hide=scope.isSubmitted><ng-include src="\'app/components/herobox/herobox.html\'"></ng-include><form role=form name=form id=contact-form class=form-journey-info novalidate><div class=form-group><div class=question-number><div ng-if="scope.story.heathrow_origin === null">1</div><div ng-if="scope.story.heathrow_origin !== null"><div class=icon-tick-purple></div></div></div><label for=destination class=form-helper-text>To start with, were you flying from or to Heathrow?</label><div class=switch><div class=option ng-class="{\'active\':scope.story.heathrow_origin !== null && scope.story.heathrow_origin === true}" ng-click="scope.story.heathrow_origin = true">From</div><div class=option ng-class="{\'active\':scope.story.heathrow_origin !== null && scope.story.heathrow_origin === false}" ng-click="scope.story.heathrow_origin = false">To</div></div></div><!--div.form-group>.question-number+label.form-helper-text--><div class=form-group ng-class="{\'active\': scope.story.destination}"><div class=question-number><div ng-show=!scope.story.destination>2</div><div ng-show=scope.story.destination><div class=icon-tick-purple></div></div></div><label for=destination ng-class="{\'to-fix\': form.destination.$error.pattern}"><div class=form-helper-text>Do you Remember where you were flying {{scope.story.heathrow_origin ? "to" : "from"}}?</div></label><input type=text class=form-control name=destination id=destination ng-pattern="/^[a-zA-Z0-9,.!\'`()?\\s]*$/" placeholder="Tokyo? Kenyan Safari?" ng-model=scope.story.destination></div><div class="form-group form-group--lg" ng-class="{\'active\': scope.story.details}"><div class=question-number><div ng-if=!scope.story.details>3</div><div ng-if=scope.story.details><div class=icon-tick-purple></div></div></div><label for=details class=required ng-class="{\'to-fix\': (form.details.$error.required && form.details.$dirty) || form.details.$error.pattern}"><div class=form-helper-text>What was meaningful about this trip?</div></label><textarea class=form-control name=details id=details maxlength=3500 ng-pattern="/^[a-zA-Z0-9,.!\'`()?\\s]*$/" placeholder="{{(form.details.$error.required && form.details.$dirty) ? \'Please tell us your story\' : \'Landed a brilliant job?\nMet a long-lost cousin for the first time?\n(The more detailed your story, the better the birthday gift you will receive)\'}}" ng-model=scope.story.details required></textarea></div><div class=form-group><div class=question-number><div ng-if="!scope.story.trip_year && !scope.story.trip_month && !scope.story.trip_date">4</div><div ng-if="scope.story.trip_year || scope.story.trip_month || scope.story.trip_date"><div class=icon-tick-purple></div></div></div><label for=year class=form-helper-text>Do you remember the date?</label><div class=select-row><div class=lhr-select ng-class="{\'active\': scope.story.trip_year}"><select ng-model=scope.story.trip_year ng-options="year for year in scope.dateSelector.years" class=form-control id=year><option value="">Year</option></select></div><div class=lhr-select ng-class="{\'active\': scope.story.trip_month}"><select ng-model=scope.story.trip_month ng-options="month.id as month.name for month in scope.dateSelector.months(scope.story.trip_year) track by month.id" class=form-control><option value="">Month</option></select></div><div class=lhr-select ng-class="{\'active\': scope.story.trip_day}"><select ng-model=scope.story.trip_day ng-options="day for day in scope.dateSelector.days(scope.story.trip_year, scope.story.trip_month)" class=form-control><option value="">Day</option></select></div></div></div><div class=form-group><div class=question-number><div ng-if=!scope.story.terminal>5</div><div ng-if=scope.story.terminal><div class=icon-tick-purple></div></div></div><label class=form-helper-text>What about the terminal?</label><div class=form-terminal-selector><div class=option ng-click="scope.story.terminal=\'T1\'" ng-class="{\'active\': scope.story.terminal==\'T1\'}">T1</div><div class=option ng-click="scope.story.terminal=\'T2\'" ng-class="{\'active\': scope.story.terminal==\'T2\'}">T2</div><div class=option ng-click="scope.story.terminal=\'T3\'" ng-class="{\'active\': scope.story.terminal==\'T3\'}">T3</div><div class=option ng-click="scope.story.terminal=\'T4\'" ng-class="{\'active\': scope.story.terminal==\'T4\'}">T4</div><div class=option ng-click="scope.story.terminal=\'T5\'" ng-class="{\'active\': scope.story.terminal==\'T5\'}">T5</div></div></div><div class=form-group><div class=question-number><div ng-if=!scope.isImageValid()>6</div><div ng-if="scope.image && scope.isImageValid()"><div class=icon-tick-purple></div></div></div><label ng-class="{\'to-fix\': scope.image && !scope.isImageValid()}"><div class=form-helper-text>Have you got an image?<br>Please share!</div></label><div class=image--add ng-class="{\'to-fix\': scope.image && !scope.isImageValid()}" ng-show=!scope.isImage() ngf-select ng-model=scope.image accept=image/*><div class=icon-camera></div><div class=image--add-text ng-show=!scope.image>Upload an Image</div><div class=image--add-text ng-show="scope.image && !scope.isImageValid()">Choose a valid file type</div><div class=image--add-text--small>(5MB max - JPG/PNG/GIF)</div></div><img class=image--added ng-show=scope.isImage() ng-src="{{scope.image|\n             ngfDataUrl}}" alt=image><div class=image--options ng-show=scope.isImage()><a class="image--option-btn success" ngf-select ng-model=scope.image accept=image/*>Change Image</a> <a class="image--option-btn danger" ng-click="scope.image = null">Remove Image</a></div></div></form><form role=form name=form2 class=form-person-info novalidate><div class=form-group><label for=title class=required ng-class="{\'to-fix\': form2.title.$error.required && form2.title.$dirty}"><div class=form-helper-text>Your Title</div></label><div class=lhr-select ng-class="{\'to-fix\': form2.title.$error.required && form2.title.$dirty}"><select name=title id=title class=form-control required ng-model=scope.story.person.title><option value="" disabled>{{(form2.title.$error.required && form2.title.$dirty) ? \'Please choose a title\' : \'Choose\'}}</option><option value=Mr>Mr</option><option value=Mrs>Mrs</option><option value=Ms selected>Ms</option><option value=Miss selected>Miss</option><option value=Dr selected>Dr</option><option value=Prof selected>Prof</option><option value=Rev selected>Rev</option></select></div></div><div class=form-group><label for=FirstName class=required ng-class="{\'to-fix\': form2.FirstName.$error.required && form2.FirstName.$dirty}"><div class=form-helper-text>Your First name</div></label><input type=text class=form-control name=FirstName id=FirstName ng-model=scope.story.person.first_name placeholder="{{(form2.FirstName.$error.required && form2.FirstName.$dirty) ? \'Please tell us your First name\' : \'\'}}" required></div><div class=form-group><label for=LastName class=required ng-class="{\'to-fix\': form2.LastName.$error.required && form2.LastName.$dirty}"><div class=form-helper-text>Your Last Name</div></label><input type=text class=form-control name=LastName id=LastName ng-model=scope.story.person.last_name placeholder="{{(form2.LastName.$error.required && form2.LastName.$dirty) ? \'Please tell us your Last name\' : \'\'}}" required></div><div class=form-group><label for=EmailAddress class=required ng-class="{\'to-fix\':((form2.EmailAddress.$error.required || form2.EmailAddress.$error.email) && form2.EmailAddress.$dirty)\n               || (form2.EmailAddressConfirm.$dirty\n                       && (form2.EmailAddressConfirm.$viewValue != form2.EmailAddress.$viewValue))}"><div class=form-helper-text>Your Email address</div></label><input type=email class=form-control id=EmailAddress name=EmailAddress ng-model=scope.story.person.email_address ng-model-options="{ updateOn: \'blur\' }" ng-class="{\'to-fix\':((form2.EmailAddress.$error.required || form2.EmailAddress.$error.email) && form2.EmailAddress.$dirty)\n                       || (form2.EmailAddressConfirm.$dirty\n                       && (form2.EmailAddressConfirm.$viewValue != form2.EmailAddress.$viewValue))}" placeholder="{{(form2.EmailAddress.$error.required && form2.EmailAddress.$dirty) ? \'Please tell us your Email address\' : \'\'}}" required></div><div class=form-group><label for=EmailAddressConfirm class=required ng-class="{\'to-fix\': form2.EmailAddressConfirm.$dirty\n                       && form2.EmailAddressConfirm.$viewValue != form2.EmailAddress.$viewValue\n                       }"><div class=form-helper-text>Confirm Email address</div></label><input type=email class=form-control id=EmailAddressConfirm name=EmailAddressConfirm ng-model=scope.EmailAddressConfirm ng-model-options="{ updateOn: \'blur\' }" ng-class="{\'to-fix\': form2.EmailAddressConfirm.$dirty\n                       && form2.EmailAddressConfirm.$viewValue != form2.EmailAddress.$viewValue\n                       }" equals={{scope.story.person.email_address}} placeholder="{{(form2.EmailAddress.$error.required && form2.EmailAddress.$dirty) ? \'Please tell us your Email address\' : \'\'}}" required></div><div class=form-group><label for=rewardsNum1 ng-class="{\'to-fix\': (form2.rewardsNum1.$invalid ||\n               form2.rewardsNum2.$invalid ||\n               form2.rewardsNum3.$invalid ||\n               form2.rewardsNum4.$invalid)}"><div class=form-helper-text>Your Heathrow rewards card number?</div></label><div class=reward-field><input type=text class="form-control reward-num" ng-pattern=/^[0-9]*$/ maxlength=4 reward-input name=rewardsNum1 id=rewardsNum1 ng-model=scope.reward.one> <input type=text class="form-control reward-num" ng-pattern=/^[0-9]*$/ maxlength=4 reward-input name=rewardsNum2 id=rewardsNum2 ng-model=scope.reward.two> <input type=text class="form-control reward-num" ng-pattern=/^[0-9]*$/ maxlength=4 reward-input name=rewardsNum3 id=rewardsNum3 ng-model=scope.reward.three> <input type=text class="form-control reward-num" ng-pattern=/^[0-9]*$/ maxlength=4 reward-input name=rewardsNum4 id=rewardsNum4 ng-model=scope.reward.four></div></div><div class=form-group><label for=country class=required ng-class="{\'to-fix\': form2.country.$error.required && form2.country.$dirty}"><div class=form-helper-text>Your Country</div></label><div class=lhr-select><select class=form-control name=country id=country ng-model=scope.story.person.country required><option value="" disabled>{{(form2.country.$error.required && form2.country.$dirty) ? \'Please choose a Country\' : \'Choose\'}}</option><option value="United Kingdom">United Kingdom</option><option disabled value="">-------------------</option><option value=Afghanistan>Afghanistan</option><option value=Albania>Albania</option><option value=Algeria>Algeria</option><option value="American Samoa">American Samoa</option><option value=Andorra>Andorra</option><option value=Angola>Angola</option><option value=Anguilla>Anguilla</option><option value=Antartica>Antarctica</option><option value="Antigua and Barbuda">Antigua and Barbuda</option><option value=Argentina>Argentina</option><option value=Armenia>Armenia</option><option value=Aruba>Aruba</option><option value=Australia>Australia</option><option value=Austria>Austria</option><option value=Azerbaijan>Azerbaijan</option><option value=Bahamas>Bahamas</option><option value=Bahrain>Bahrain</option><option value=Bangladesh>Bangladesh</option><option value=Barbados>Barbados</option><option value=Belarus>Belarus</option><option value=Belgium>Belgium</option><option value=Belize>Belize</option><option value=Benin>Benin</option><option value=Bermuda>Bermuda</option><option value=Bhutan>Bhutan</option><option value=Bolivia>Bolivia</option><option value="Bosnia and Herzegowina">Bosnia and Herzegowina</option><option value=Botswana>Botswana</option><option value="Bouvet Island">Bouvet Island</option><option value=Brazil>Brazil</option><option value="British Indian Ocean Territory">British Indian Ocean Territory</option><option value="Brunei Darussalam">Brunei Darussalam</option><option value=Bulgaria>Bulgaria</option><option value="Burkina Faso">Burkina Faso</option><option value=Burundi>Burundi</option><option value=Cambodia>Cambodia</option><option value=Cameroon>Cameroon</option><option value=Canada>Canada</option><option value="Cape Verde">Cape Verde</option><option value="Cayman Islands">Cayman Islands</option><option value="Central African Republic">Central African Republic</option><option value=Chad>Chad</option><option value=Chile>Chile</option><option value=China>China</option><option value="Christmas Island">Christmas Island</option><option value="Cocos Islands">Cocos (Keeling) Islands</option><option value=Colombia>Colombia</option><option value=Comoros>Comoros</option><option value=Congo>Congo</option><option value=Congo>Congo, the Democratic Republic of the</option><option value="Cook Islands">Cook Islands</option><option value="Costa Rica">Costa Rica</option><option value="Cota D\'Ivoire">Cote d\'Ivoire</option><option value=Croatia>Croatia (Hrvatska)</option><option value=Cuba>Cuba</option><option value=Cyprus>Cyprus</option><option value="Czech Republic">Czech Republic</option><option value=Denmark>Denmark</option><option value=Djibouti>Djibouti</option><option value=Dominica>Dominica</option><option value="Dominican Republic">Dominican Republic</option><option value="East Timor">East Timor</option><option value=Ecuador>Ecuador</option><option value=Egypt>Egypt</option><option value="El Salvador">El Salvador</option><option value="Equatorial Guinea">Equatorial Guinea</option><option value=Eritrea>Eritrea</option><option value=Estonia>Estonia</option><option value=Ethiopia>Ethiopia</option><option value="Falkland Islands">Falkland Islands (Malvinas)</option><option value="Faroe Islands">Faroe Islands</option><option value=Fiji>Fiji</option><option value=Finland>Finland</option><option value=France>France</option><option value="France Metropolitan">France, Metropolitan</option><option value="French Guiana">French Guiana</option><option value="French Polynesia">French Polynesia</option><option value="French Southern Territories">French Southern Territories</option><option value=Gabon>Gabon</option><option value=Gambia>Gambia</option><option value=Georgia>Georgia</option><option value=Germany>Germany</option><option value=Ghana>Ghana</option><option value=Gibraltar>Gibraltar</option><option value=Greece>Greece</option><option value=Greenland>Greenland</option><option value=Grenada>Grenada</option><option value=Guadeloupe>Guadeloupe</option><option value=Guam>Guam</option><option value=Guatemala>Guatemala</option><option value=Guinea>Guinea</option><option value=Guinea-Bissau>Guinea-Bissau</option><option value=Guyana>Guyana</option><option value=Haiti>Haiti</option><option value="Heard and McDonald Islands">Heard and Mc Donald Islands</option><option value="Holy See">Holy See (Vatican City State)</option><option value=Honduras>Honduras</option><option value="Hong Kong">Hong Kong</option><option value=Hungary>Hungary</option><option value=Iceland>Iceland</option><option value=India>India</option><option value=Indonesia>Indonesia</option><option value=Iran>Iran (Islamic Republic of)</option><option value=Iraq>Iraq</option><option value=Ireland>Ireland</option><option value=Israel>Israel</option><option value=Italy>Italy</option><option value=Jamaica>Jamaica</option><option value=Japan>Japan</option><option value=Jordan>Jordan</option><option value=Kazakhstan>Kazakhstan</option><option value=Kenya>Kenya</option><option value=Kiribati>Kiribati</option><option value="Democratic People\'s Republic of Korea">Korea, Democratic People\'s Republic of</option><option value=Korea>Korea, Republic of</option><option value=Kuwait>Kuwait</option><option value=Kyrgyzstan>Kyrgyzstan</option><option value=Lao>Lao People\'s Democratic Republic</option><option value=Latvia>Latvia</option><option value=Lebanon selected>Lebanon</option><option value=Lesotho>Lesotho</option><option value=Liberia>Liberia</option><option value="Libyan Arab Jamahiriya">Libyan Arab Jamahiriya</option><option value=Liechtenstein>Liechtenstein</option><option value=Lithuania>Lithuania</option><option value=Luxembourg>Luxembourg</option><option value=Macau>Macau</option><option value=Macedonia>Macedonia, The Former Yugoslav Republic of</option><option value=Madagascar>Madagascar</option><option value=Malawi>Malawi</option><option value=Malaysia>Malaysia</option><option value=Maldives>Maldives</option><option value=Mali>Mali</option><option value=Malta>Malta</option><option value="Marshall Islands">Marshall Islands</option><option value=Martinique>Martinique</option><option value=Mauritania>Mauritania</option><option value=Mauritius>Mauritius</option><option value=Mayotte>Mayotte</option><option value=Mexico>Mexico</option><option value=Micronesia>Micronesia, Federated States of</option><option value=Moldova>Moldova, Republic of</option><option value=Monaco>Monaco</option><option value=Mongolia>Mongolia</option><option value=Montserrat>Montserrat</option><option value=Morocco>Morocco</option><option value=Mozambique>Mozambique</option><option value=Myanmar>Myanmar</option><option value=Namibia>Namibia</option><option value=Nauru>Nauru</option><option value=Nepal>Nepal</option><option value=Netherlands>Netherlands</option><option value="Netherlands Antilles">Netherlands Antilles</option><option value="New Caledonia">New Caledonia</option><option value="New Zealand">New Zealand</option><option value=Nicaragua>Nicaragua</option><option value=Niger>Niger</option><option value=Nigeria>Nigeria</option><option value=Niue>Niue</option><option value="Norfolk Island">Norfolk Island</option><option value="Northern Mariana Islands">Northern Mariana Islands</option><option value=Norway>Norway</option><option value=Oman>Oman</option><option value=Pakistan>Pakistan</option><option value=Palau>Palau</option><option value=Panama>Panama</option><option value="Papua New Guinea">Papua New Guinea</option><option value=Paraguay>Paraguay</option><option value=Peru>Peru</option><option value=Philippines>Philippines</option><option value=Pitcairn>Pitcairn</option><option value=Poland>Poland</option><option value=Portugal>Portugal</option><option value="Puerto Rico">Puerto Rico</option><option value=Qatar>Qatar</option><option value=Reunion>Reunion</option><option value=Romania>Romania</option><option value=Russia>Russian Federation</option><option value=Rwanda>Rwanda</option><option value="Saint Kitts and Nevis">Saint Kitts and Nevis</option><option value="Saint Lucia">Saint Lucia</option><option value="Saint Vincent">Saint Vincent and the Grenadines</option><option value=Samoa>Samoa</option><option value="San Marino">San Marino</option><option value="Sao Tome and Principe">Sao Tome and Principe</option><option value="Saudi Arabia">Saudi Arabia</option><option value=Senegal>Senegal</option><option value=Seychelles>Seychelles</option><option value=Sierra>Sierra Leone</option><option value=Singapore>Singapore</option><option value=Slovakia>Slovakia (Slovak Republic)</option><option value=Slovenia>Slovenia</option><option value="Solomon Islands">Solomon Islands</option><option value=Somalia>Somalia</option><option value="South Africa">South Africa</option><option value="South Georgia">South Georgia and the South Sandwich Islands</option><option value=Span>Spain</option><option value=SriLanka>Sri Lanka</option><option value="St. Helena">St. Helena</option><option value="St. Pierre and Miguelon">St. Pierre and Miquelon</option><option value=Sudan>Sudan</option><option value=Suriname>Suriname</option><option value=Svalbard>Svalbard and Jan Mayen Islands</option><option value=Swaziland>Swaziland</option><option value=Sweden>Sweden</option><option value=Switzerland>Switzerland</option><option value=Syria>Syrian Arab Republic</option><option value=Taiwan>Taiwan, Province of China</option><option value=Tajikistan>Tajikistan</option><option value=Tanzania>Tanzania, United Republic of</option><option value=Thailand>Thailand</option><option value=Togo>Togo</option><option value=Tokelau>Tokelau</option><option value=Tonga>Tonga</option><option value="Trinidad and Tobago">Trinidad and Tobago</option><option value=Tunisia>Tunisia</option><option value=Turkey>Turkey</option><option value=Turkmenistan>Turkmenistan</option><option value="Turks and Caicos">Turks and Caicos Islands</option><option value=Tuvalu>Tuvalu</option><option value=Uganda>Uganda</option><option value=Ukraine>Ukraine</option><option value="United Arab Emirates">United Arab Emirates</option><option value="United Kingdom">United Kingdom</option><option value="United States">United States</option><option value="United States Minor Outlying Islands">United States Minor Outlying Islands</option><option value=Uruguay>Uruguay</option><option value=Uzbekistan>Uzbekistan</option><option value=Vanuatu>Vanuatu</option><option value=Venezuela>Venezuela</option><option value=Vietnam>Vietnam</option><option value="Virgin Islands (British)">Virgin Islands (British)</option><option value="Virgin Islands (U.S)">Virgin Islands (U.S.)</option><option value="Wallis and Futana Islands">Wallis and Futuna Islands</option><option value="Western Sahara">Western Sahara</option><option value=Yemen>Yemen</option><option value=Yugoslavia>Yugoslavia</option><option value=Zambia>Zambia</option><option value=Zimbabwe>Zimbabwe</option></select></div></div><div class="uk-address-form fade" ng-show="scope.story.person.country === \'United Kingdom\'"><div class=form-group><label for=address_line_1 class=required ng-class="{\'to-fix\': form2.address_line_1.$error.required && form2.address_line_1.$dirty}"><div class=form-helper-text>Your Address Line 1</div></label><input type=text class=form-control name=address_line_1 id=address_line_1 ng-model=scope.story.person.address_line_1 placeholder="{{(form2.address_line_1.$error.required && form2.address_line_1.$dirty) ? \'Please tell us your address_line_1\' : \'\'}}" required></div><div class=form-group><label for=address_line_2><div class=form-helper-text>Your Address Line 2</div></label><input type=text class=form-control name=address_line_2 id=address_line_2 ng-model=scope.story.person.address_line_2></div><div class=form-group><label for=address_line_3><div class=form-helper-text>Your Address Line 3</div></label><input type=text class=form-control name=address_line_3 id=address_line_3 ng-model=scope.story.person.address_line_3></div><div class=form-group><label for=town><div class=form-helper-text>Your town</div></label><input type=text class=form-control name=town id=town ng-model=scope.story.person.town></div><div class=form-group><label for=county><div class=form-helper-text>Your county</div></label><input type=text class=form-control name=county id=county ng-model=scope.story.person.county></div><div class=form-group><label for=postcode class=required ng-class="{\'to-fix\': form2.postcode.$error.required && form2.postcode.$dirty}"><div class=form-helper-text>Your Postcode</div></label><input type=text class=form-control name=postcode id=postcode ng-model=scope.story.person.postcode placeholder="{{(form2.postcode.$error.required && form2.postcode.$dirty) ? \'Please tell us your Postcode\' : \'\'}}" required></div></div><div class="purple-message-box fade" ng-show="scope.story.person.country !== \'United Kingdom\' && form2.country.$dirty">We’re sorry, we can only send Birthday Presents to a UK address. We’d still love to hear your story though – it will still be included in our celebrations!</div></form><form action="" role=form name=form3 id=checkbox-form class=form-checkboxes><div class="form-group lhr-checkbox" ng-class="{\'to-fix\': form3.isOver18.$error.required\n                && form3.isOver18.$dirty}"><div class=lhr-checkbox--text><label>I am over 18 years of age.</label><div class=required-checkbox>*</div></div><input type=checkbox required name=isOver18 id=isOver18 ng-model=scope.checks.isOver18></div><div class="form-group lhr-checkbox" ng-class="{\'to-fix\': form3.termsConditions.$error.required\n                && form3.termsConditions.$dirty}"><div class=lhr-checkbox--text><label>I have read and agree with the <a class=link href=/page/terms target=_blank>terms and conditions</a>.</label><div class=required-checkbox>*</div></div><input type=checkbox required name=termsConditions id=termsConditions ng-model=scope.checks.termsConditions></div><div class="form-group lhr-checkbox"><div class=lhr-checkbox--text><label>I would like to receive updates and offers from Heathrow from time to time.</label></div><input type=checkbox ng-model=scope.story.agree_marketing></div></form><button type=submit class="btn btn-submit form-group" ng-click="scope.submitForm(form, form2, form3)" ng-class="{\'disabled\':!scope.checks.isOver18 && !scope.checks.termsConditions}"><div class=btn-text>Add Your Story</div><div class=icon-plane-takeoff></div></button><div class=mandatory>* Mandatory Fields</div></div><div ng-show=scope.isSubmitted class=success-submit><div class=logo-box><a href=/ ><img src=/static/assets/images/heath70_logo-main_@x2.png alt="70th anniversary logo"></a></div><div class="hero-box has-content"><div class=hero-box--text><div class=success-box--text-md ng-bind-html=scope.message.subTitle></div><h1 class=success-box--text-lg ng-bind-html=scope.message.title></h1></div></div><div class="success-box--text hero-box--content" ng-repeat="line in scope.message.content"><ng-bind-html ng-bind-html=line></ng-bind-html></div></div></div>');
}]);
//# sourceMappingURL=../maps/scripts/app-8acdc270ef.js.map
