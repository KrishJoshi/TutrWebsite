{"version":3,"sources":["scripts/app.js"],"names":["angular","module","SubmitStoryController","story","$rootScope","$q","$timeout","vm","this","hasBackground","customContainer","setTitle","hero","title","subTitle","top","text","content","width","subTitleStyle","text-align","padding-left","letter-spacing","successMessage","heathrow_origin","getFileBase64FromFileAsync","file","deferred","defer","fileReader","FileReader","readAsDataURL","onload","e","resolve","target","result","promise","isImage","image","type","split","isImageValid","submitForm","form","form2","form3","isFormValid","country","$viewValue","$valid","address_line_1","$setValidity","postcode","then","imageData","save","isSubmitted","message","error","errorStr","key","data","alert","forEach","$error","required","field","$setDirty","element","animate","scrollTop","parent","offset","yearOrder","endYear","Date","getFullYear","startYear","trip_date","dateSelector","days","nbDays","year","month","getDate","daysList","i","iS","toString","push","length","months","monthList","years","yearsList","$inject","controller","StoryController","$stateParams","$location","slug","constructDate","trip_day","trip_month","trip_year","date","sendStoryData","$broadcast","from","journeyStart","person_name","getStoryById","path","StaticController","page","getPageById","MainController","homepage","createHomepage","cards","bottom","hasCta","GiftsController","gift","createGiftsPage","GiftController","getGiftById","storyHeader","StoryHeaderController","$scope","$sce","$document","$window","player","initVideoPlayer","createYoutubePlayer","YT","Player","height","videoId","youtube_id","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","event","playVideo","videoActive","$apply","PlayerState","ENDED","done","hasYoutubeAPI","tag","firstScriptTag","parentNode","insertBefore","attr","onYouTubeIframeAPIReady","hasVideo","getBackground","background-image","closeVideo","stopVideo","directive","restrict","templateUrl","scope","controllerAs","bindToController","storyContent","StoryContentController","hasField","hasCopy","copy","getSoundcloudUrl","id","trustAsResourceUrl","getParagraphs","getFirstParagraph","getOtherParagraphs","paragraphs","slice","getSafeHtml","handleTitleInView","on","isInView","share","ShareController","$element","$shareWrapper","find","shareShowing","getFacebookUrl","encodeURIComponent","absUrl","getTwitterUrl","getEmailContent","openInNewWindow","Modernizr","touchevents","open","currentTarget","href","preventDefault","openShare","addClass","closeShare","removeClass","addUnFocusHandler","ev","closest","makeItemSticky","scrollY","init","$media","elem","cardsInView","viewHeight","Math","max","documentElement","clientHeight","innerHeight","parallax","itemPos","getBoundingClientRect","elBackgroundPos","query","style","backgroundPosition","startParallax","item","card","locationInView","indexOf","splice","bind","isOldIE","pageContent","PageContentController","getSafeContent","link","$last","$emit","acmeNavbar","NavbarController","setPages","locationPath","locationMain","locationSub","navAlwaysVisible","isHomePage","isStoryPage","isGiftPage","isHowItWorksPage","isTOC","navbar","handleInViewBehaviour","handleStoryVisibility","deregisterationCallback","$on","visible","updateStoryTitle","args","storyInfo","deregisterationCallback3","toState","name","deregisterationCallback2","creationDate","menu","MenuController","detectClickOutside","document","click","is","active","closeMenu","resetMenu","body","toggleMenu","toggleClass","isGiftsPage","t","n","r","s","o","u","a","require","f","Error","code","l","exports","call",1,"$","fn","mason","options","complete","$self","callback","debug_elements","defaults","elements","mason_clear","itemSelector","ratio","sizes","columns","promoted","filler","filler_class","keepDataAndEvents","randomSizes","randomFillers","layout","gutter","debug","container","block","matrix","startWidth","each","callbacks","columnSize","layBricks","resize","settings","setup","sizeElements","extend","console","log","children","append","round","parseFloat","toFixed","$block","h","p","promoted_size","ran","size","w","hasClass","floor","random","css","margin","block_h","c","col","el_h","bh","bw","results","position","left","$filler","filler_index","filler_total","x","y","not","eq","clone","appendTo","window","trigger","cols","colsCount","$debug","prepend","_this","remove","clearTimeout","setTimeout","destroy","off","jQuery","$log","setInfoPosition","screenWidth","colWidth","largeBlock","smallBlock","contentBlock","ctaBlock","ctaBorder","padding-top","jss","set","setNewMargins","cta","ctas","threshold","right","ctaPosition","nextElement","next","source","startCropping","watcher","canvas","ctx","getContext","img","setAttribute","src","beginPath","moveTo","lineTo","closePath","clip","sourceX","sourceY","sourceWidth","sourceHeight","destWidth","destHeight","destX","destY","drawImage","restore","toDataURL","$watch","giftsBlock","giftHeader","GiftHeaderController","logo","giftContent","GiftContentController","footer","FooterController","carousel","CarouselController","isLastElement","currentSlide","images","isFirstElement","initCarousel","slick","prevArrow","nextArrow","infinite","nextSlide","updatePage","newPage","cardsBlock","CardsController","isStory","className","isGift","getUrl","storyBlock","snippetBlock","SnippetController","QuoteBlock","QuoteController","giftHeroBlock","giftBlock","CtaBlock","CtaController","undefined","obj","testRunner","featureNames","feature","aliasIdx","nameIdx","featureName","featureNameSplit","featureIdx","tests","hasOwnProperty","toLowerCase","aliases","Boolean","classes","join","setClasses","docElement","classPrefix","_config","isSVG","baseVal","enableJSClass","reJS","RegExp","replace","enableClasses","createElement","arguments","createElementNS","apply","getBody","fake","injectElementWithStyles","rule","nodes","testnames","ret","node","docOverflow","mod","div","parseInt","appendChild","styleSheet","cssText","createTextNode","background","overflow","removeChild","offsetHeight","ModernizrProto","_version","usePrefixes","_q","test","cb","self","addTest","addAsyncTest","prototype","nodeName","omPrefixes","domPrefixes","_domPrefixes","hasEvent","inner","eventName","isSupported","needsFallback","removeAttribute","bool","prefixes","_prefixes","testStyles","DocumentTouch","offsetTop","doc","querySelectorAll","$resource","storyApi","method","get","$promise","getAll","storyData","newStory","$save","service","pageApi","Media","shortcuts","tablet","screen-xs","screen-sm","screen-md","screen-ld","shortcut","raw","raw_query","value","matchMedia","matches","onresize","factory","Service","createCard","type_mapping","feature_gift","gift_small","gift_hero","story_cta","gift_cta","featured","quote","snippet","mapCards","api","getData","display_as","importance","filter","trustAsHtml","list","runBlock","appendTitle","run","routerConfig","$stateProvider","$urlRouterProvider","$locationProvider","$injector","hasTrailingSlash","newPath","substr","html5Mode","state","url","otherwise","config","constant","malarkey","moment","$logProvider","toastrConfig","$httpProvider","debugEnabled","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","$cookies","injector","invoke","_$cookies_","headers","post","X-CSRFToken","Content-Type","$templateCache","put"],"mappings":"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","file":"scripts/app-d276cbf13d.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('lhr70', ['ngAnimate', 'ngCookies', 'ngTouch',\n      'ngSanitize', 'ngMessages', 'ngAria', 'ngResource',\n      'ui.router', 'toastr', 'slidePushMenu',\n      'ngFileUpload']);\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .controller('SubmitStoryController', SubmitStoryController);\n\n  /** @ngInject */\n  function SubmitStoryController(story, $rootScope, $q, $timeout) {\n\n    var vm = this;\n    $rootScope.hasBackground = true;\n    $rootScope.customContainer = true;\n\n    $rootScope.setTitle(\"Tell us your story\");\n\n    $rootScope.hero = {\n      title: \"Story\",\n      subTitle: {\n        top: \"Tell us your\"\n      },\n      text: {\n        content: [\"Use the 6 questions below to tell us as much as you can about where Heathrow has taken you.\" +\n        \"You do not need to answer every question but the more information you can give us the better your story will be. \" +\n        \"And the better your story is the better the gift you will receive.\"]\n      },\n      width: 230,\n      subTitleStyle: {\n        'text-align': 'center',\n        'padding-left': '15px',\n        'letter-spacing': '1px'\n      }\n    };\n\n    vm.successMessage = {\n      title: \"Thanks!\",\n      subTitle: \"Submission Complete\",\n      content: [\"Thank you for being a part of our 70th birthday.\" +\n        \"You're now eligible for one of our great birthday gifts.\" +\n        \"These will be ready for unwrapping from 31st May. \" +\n        \"In the mean time why not read <a class='success-link link' href='/'> \" +\n        \"some more stories</a> from the last 70 years.\"]\n    };\n\n    vm.story = {\n      heathrow_origin: true\n    };\n\n    var getFileBase64FromFileAsync = function (file) {\n      var deferred = $q.defer();\n      var fileReader = new FileReader();\n      fileReader.readAsDataURL(file);\n      fileReader.onload = function (e) {\n        deferred.resolve(e.target.result);\n      };\n      return deferred.promise;\n    };\n\n    vm.isImage = function () {\n      if (vm.image) {\n        return vm.image.type.split(\"/\")[0] == \"image\";\n      }\n      return false;\n    };\n\n    vm.isImageValid = function () {\n      if (vm.image) {\n        return vm.image.type.split(\"/\")[0] == \"image\";\n      }\n      return false;\n    };\n\n\n    vm.submitForm = function (form, form2, form3) {\n      var isFormValid = function (form, form2, form3) {\n        if(form2.country.$viewValue === 'United Kingdom') {\n          return form.$valid && form2.$valid && form3.$valid\n        } else {\n          form2.address_line_1.$setValidity('required', true);\n          form2.postcode.$setValidity('required', true);\n          return form.$valid && form2.$valid && form3.$valid\n        }\n      };\n      if (isFormValid(form, form2, form3)) {\n        if (vm.image) {\n          getFileBase64FromFileAsync(vm.image).then(\n            function (imageData) {\n              vm.story.image = imageData;\n              story.save(vm.story).then(function () {\n                vm.isSubmitted = true;\n                vm.message = vm.successMessage;\n              });\n            });\n        } else {\n          story.save(vm.story).then(function () {\n            vm.isSubmitted = true;\n            vm.message = vm.successMessage;\n          }, function (error) {\n            var errorStr = \"\";\n            for (var key in error.data) {\n              errorStr = errorStr + error.data[key] + \"\\n\";\n            }\n            alert('There was an error submitting your form. Please check the form and try again.\\n' + errorStr);\n          });\n        }\n      } else {\n        angular.forEach(form.$error.required, function (field) {\n          field.$setDirty();\n        });\n        angular.forEach(form2.$error.required, function (field) {\n          field.$setDirty();\n        });\n        angular.forEach(form3.$error.required, function (field) {\n          field.$setDirty();\n        });\n        $timeout(function () {\n          angular.element('html, body').animate({\n            scrollTop: angular.element('.to-fix:first').parent().offset().top - 80\n          }, 250);\n        }, 250);\n      }\n    };\n\n    // ATTRIBUTES (with default values if not set)\n    vm.yearOrder = true; // year order: 'asc' or 'desc', default: desc\n    var endYear = new Date().getFullYear(); // default: this year\n    var startYear = 1946; // default: this year - 100\n\n    vm.trip_date = new Date();\n\n    // INIT YEARS, MONTHS AND DAYS NUMBER\n    vm.dateSelector = {\n\n      days: function () {\n\n        // Get number of days based on month + year\n        // (January = 31, February = 28, April = 30, February 2000 = 29) or 31 if no month selected yet\n        var nbDays = new Date(vm.trip_date.year, vm.trip_date.month, 0).getDate() || 31;\n\n        var daysList = [];\n        for (var i = 1; i <= nbDays; i++) {\n          var iS = i.toString();\n          daysList.push((iS.length < 2) ? '0' + iS : iS); // Adds a leading 0 if single digit\n        }\n        return daysList;\n      },\n      months: function () {\n        var monthList = [];\n        for (var i = 1; i <= 12; i++) {\n          var iS = i.toString();\n          monthList.push((iS.length < 2) ? '0' + iS : iS); // Adds a leading 0 if single digit\n        }\n        return monthList;\n      },\n      years: function () {\n        var yearsList = [];\n        for (var i = endYear; i >= startYear; i--) {\n          yearsList.push(i.toString());\n        }\n        return yearsList;\n      }\n    };\n\n  }\n})\n();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .controller('StoryController', StoryController);\n\n  /** @ngInject */\n  function StoryController(story, $rootScope, $stateParams, $location) {\n\n    var vm = this;\n    $rootScope.hasBackground = false;\n\n    var slug = $stateParams.slug;\n\n    var constructDate = function() {\n      if(vm.story.trip_day || vm.story.trip_month || vm.story.trip_year) {\n        vm.story.date = \"\";\n        if (vm.story.trip_day) vm.story.date += vm.story.trip_day + \".\";\n        if (vm.story.trip_month) vm.story.date += vm.story.trip_month + \".\";\n        if (vm.story.trip_year) vm.story.date += vm.story.trip_year;\n      }\n    };\n\n    var sendStoryData = function () {\n      // send title to navigation\n      // TODO: might need to be added into a location change event listener\n      $rootScope.$broadcast('STORY_TITLE_CHANGE', {\n        from: vm.story.journeyStart,\n        title: vm.story.title,\n        person_name: vm.story.person_name,\n        date: vm.story.date\n      });\n    }\n\n    story.getStoryById(slug).then(function (data) {\n      vm.story = data;\n      constructDate();\n      sendStoryData();\n      $rootScope.setTitle(data.title);\n    }, function () {\n      $location.path('/not-found');\n    });\n\n    //var stry = \"Lorem ipsum dolor sit amet, eum te ullum corpora, prima posse postea eu per. Ex duo malis facilis referrentur. Eam eu utamur tractatos mediocrem. Pri te dolor conceptam. Omnis inciderint accommodare at mel. Mei ex nonumy percipitur dissentias, sonet signiferumque ex cum. Cu his aliquam indoctum, per ad eleifend expetendis, labitur erroribus interesset ad qui. Eos ei sumo appetere definiebas, agam probatus sed ea. Fastidii placerat accusamus ei duo, mel id detracto tacimates expetendis, affert disputando an eam. No meis omnis virtute ius, in duo laudem elaboraret. Idque doming dolores te nec. An vim ocurreret prodesset scribentur.Mundi reprimique ut has, mei prompta appellantur philosophia te. Molestie facilisi vim eu, quis dicat civibus in eam. No nam liber choro, an aliquip alterum consequat sit. Prima noster in vim, cibo labores torquatos qui in. Assum corrumpit efficiantur mea id.\"\n\n    // vm.story = {\n    //   title: \"To conquer the world!!!!!!!\",\n    //   heathrow_origin: true,\n    //   trip_year: 1991,\n    //   trip_month: 12,\n    //   trip_day: 5,\n    //   person: {name: \"the beatles\"},\n    //   journeyStart: 'LHR',\n    //   journeyEnd: 'LAX',\n    //   soundcloud: '208577499',\n    //   image: 'http://www.intrawallpaper.com/static/images/abstract-mosaic-background.png',\n    //   details: stry\n    // };\n\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .controller('StaticController', StaticController);\n\n  /** @ngInject */\n  function StaticController(page, $stateParams, $rootScope, $location) {\n\n    var vm = this;\n    $rootScope.hasBackground = false;\n\n    var slug = $stateParams.slug;\n\n    page.getPageById(slug).then(function (data) {\n      vm.page = data;\n      $rootScope.setTitle(data.title);\n    }, function () {\n      $location.path('/not-found');\n    });\n\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController(homepage, $rootScope, $timeout) {\n    var vm = this;\n    $rootScope.hasBackground = true;\n    homepage.createHomepage().then(function (data) {\n      $timeout(function () {\n        vm.cards = data;\n      },500);\n    });\n    $rootScope.hero = {\n      title: \"Heathrow\",\n      subTitle: {\n        top: \"Where has\",\n        bottom: \"taken you?\"\n      },\n      text: {\n        content: [\"Were celebrating all your journeys with a birthday presentfor every story told. If youve ever travelled to loved ones, to new experiences or to beyond your wildest dreams, tell us and receive your gift.\"]\n      },\n      hasCta: true\n    };\n\n    $rootScope.setTitle(\"Home\");\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .controller('GiftsController', GiftsController);\n\n  /** @ngInject */\n  function GiftsController(gift, $rootScope) {\n    var vm = this;\n    $rootScope.hasBackground = true;\n    $rootScope.hero = {\n      title: \"Gifts?\",\n      subTitle: \"Birthday\",\n      text: {\n        content: [\"We have joined forces with some of our favourite partners to be able to offer you some of the best gifts. \" +\n        \"All you have to do to receive one of these is tell us where heathrow has taken you.\"]\n      }\n    };\n    gift.createGiftsPage().then(function (data) {\n      vm.cards = data;\n    })\n    $rootScope.setTitle(\"Gifts\");\n\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .controller('GiftController', GiftController);\n\n  /** @ngInject */\n  function GiftController(gift, $stateParams, $rootScope, $location) {\n    var vm = this;\n    $rootScope.hasBackground = false;\n    var slug = $stateParams.slug;\n\n    gift.getGiftById(slug).then(function (data) {\n      vm.gift = data;\n      $rootScope.setTitle(data.title);\n    }, function () {\n      $location.path('/not-found');\n    });\n  }\n})();\n\n/* global YT */\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('storyHeader', storyHeader);\n\n  /** @ngInject */\n  function storyHeader() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/storyHeader/storyHeader.directive.html',\n      scope: {\n        story: '='\n      },\n      controller: StoryHeaderController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function StoryHeaderController($scope, $sce, $rootScope, $document, $window, $timeout) {\n\n      var vm = this;\n      var player;\n\n\n      var initVideoPlayer = function() {\n\n\n        if(!$rootScope.hasYoutubeAPI) {\n\n          // 2. This code loads the IFrame Player API code asynchronously.\n          var tag = angular.element('<script>');\n          var firstScriptTag = angular.element('script')[0];\n          firstScriptTag.parentNode.insertBefore(tag[0], firstScriptTag);\n\n          tag.attr('src', 'https://www.youtube.com/iframe_api');\n\n          $rootScope.hasYoutubeAPI = true;\n\n          $window.onYouTubeIframeAPIReady = function() {\n            createYoutubePlayer();\n          }\n        } else {\n          createYoutubePlayer();\n        }\n\n        function createYoutubePlayer() {\n\n          // 3. This function creates an <iframe> (and YouTube player)\n          //    after the API code downloads.\n          player = new YT.Player('player', {\n            height: '100%',\n            width: '100%',\n            videoId: vm.story.youtube_id,\n            events: {\n              'onReady': onPlayerReady,\n              'onStateChange': onPlayerStateChange\n            }\n          });\n        }\n\n        // 4. The API will call this function when the video player is ready.\n        function onPlayerReady(event) {\n          event.target.playVideo();\n          $scope.videoActive = true;\n          $scope.$apply();\n        }\n\n        // 5. The API calls this function when the player's state changes.\n        //    The function indicates that when playing a video (state=1),\n        //    the player should play for six seconds and then stop.\n        var done = false;\n\n        function onPlayerStateChange(event) {\n          if (event.data == YT.PlayerState.ENDED && !done) {\n            done = true;\n          }\n        }\n      }\n\n      $scope.hasVideo = function() {\n        return vm.story && vm.story.youtube_id !== null && typeof vm.story.youtube_id !== 'undefined'\n      }\n\n      $scope.getBackground = function(image) {\n        return  {'background-image': 'url(' + image + ')'}\n      }\n\n      // $scope.getVideoSrc = function() {\n      //   return $sce.trustAsResourceUrl('//www.youtube.com/embed/' + vm.story.youtube_id + '?autoplay=1');\n      // }\n\n      $scope.closeVideo = function() {\n        player.stopVideo();\n        $scope.videoActive = false;\n      };\n\n      $scope.playVideo = function() {\n        if (typeof player === 'undefined') {\n          initVideoPlayer();\n        } else {\n          $scope.videoActive = true;\n          $timeout(function() {\n            player.playVideo();\n          }, 0)\n        }\n\n      }\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('storyContent', storyContent);\n\n  function storyContent() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/storyContent/storyContent.directive.html',\n      scope: {\n        story: '='\n      },\n      controller: StoryContentController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n    /** @ngInject */\n    function StoryContentController($scope, $sce, $rootScope) {\n      $scope.hasField = function(field) {\n        return typeof field !== \"undefined\" && field !== null;\n      }\n\n      $scope.hasCopy = function(copy) {\n        return typeof copy !== \"undefined\" && copy !== null;\n      }\n\n      $scope.getSoundcloudUrl = function(id) {\n        return $sce.trustAsResourceUrl(\"https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/\" + id +\n                \"&amp;color=350083&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false\");\n      }\n\n      $scope.getParagraphs = function(copy) {\n        return copy ? copy.split(\"\\n\") : [];\n      }\n\n      $scope.getFirstParagraph = function(copy) {\n        return $scope.getParagraphs(copy)[0];\n      }\n\n      $scope.getOtherParagraphs = function(copy) {\n        var paragraphs = $scope.getParagraphs(copy);\n        return paragraphs.slice(1, paragraphs.length);\n      }\n\n      $scope.getSafeHtml = function(copy) {\n        return $sce.trustAsResourceUrl(copy);\n      }\n\n      var handleTitleInView = function() {\n        angular.element('.story-title').on('inview', function (event, isInView) {\n          $rootScope.$broadcast('STORY_SHOW_TITLE_IN_NAV', !isInView);\n        });\n      }\n\n      handleTitleInView();\n    }\n\n    return directive;\n  }\n})();\n\n/*\n  globals Modernizr\n*/\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('share', share);\n\n  function share() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/share/share.directive.html',\n      scope: {\n        element: '='\n      },\n      controller: ShareController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function ShareController($element, $window, $scope, $location, $document, $timeout) {\n      var vm = this;\n      var $shareWrapper = $element.find('.story-share-wrapper');\n      var shareShowing = false;\n\n      $scope.getFacebookUrl = function() {\n        return \"https://www.facebook.com/sharer/sharer.php?u=\" + $window.encodeURIComponent($location.absUrl());\n      };\n\n      $scope.getTwitterUrl = function() {\n        return vm.element ? \"https://twitter.com/intent/tweet?text=\" + vm.element.title + \" \" + $window.encodeURIComponent($location.absUrl()) : \"\";\n      };\n\n      $scope.getEmailContent = function() {\n        return vm.element ? \"mailto:?Subject=Hello%20Heathrow&body=\" + vm.element.title + \" \" + $window.encodeURIComponent($location.absUrl()) : \"\";\n      };\n\n      $scope.openInNewWindow = function(e) {\n        if (shareShowing || !Modernizr.touchevents) {\n          return !$window.open(e.currentTarget.href, \"Share\", \"width=800,height=250\");\n        } else {\n          e.preventDefault();\n        }\n      };\n\n      $scope.openShare = function() {\n        if (Modernizr.touchevents) {\n          $shareWrapper.addClass('is-active');\n\n          $timeout(function() {\n            shareShowing = true;\n          }, 10);\n        }\n      }\n\n      var closeShare = function() {\n        shareShowing = false;\n        $shareWrapper.removeClass('is-active');\n      }\n\n      var addUnFocusHandler = function() {\n        $document.on('click touchstart', function(ev) {\n          if(!(angular.element(ev.target).closest('.story-share-inner').length > 0)) {\n            closeShare();\n          }\n        });\n      }\n\n      var makeItemSticky = function() {\n\n        angular.element($window).on('scroll', function() {\n\n          if ($element.offset().top - $window.scrollY < 125) {\n            $shareWrapper.addClass('is-sticky');\n          } else {\n            $shareWrapper.removeClass('is-sticky');\n          }\n        });\n      }\n\n      var init = function() {\n        makeItemSticky();\n\n        if (Modernizr.touchevents) {\n          addUnFocusHandler();\n        }\n      }\n\n      init();\n    }\n\n    return directive;\n  }\n})();\n\n/**\n * @ngdoc directive\n * @name lhr70:parallaxDirective\n *\n * @description\n *\n *\n * @restrict A\n * */\n/** @ngInject */\nangular.module('lhr70')\n  .directive('cardParallax', function ($window, $document, $timeout,$media) {\n    return function (scope, elem) {\n      var cardsInView = [];\n      var viewHeight = Math.max($document[0].documentElement.clientHeight, $window.innerHeight);\n      var parallax = function (element) {\n        var itemPos = element.getBoundingClientRect(),\n          elBackgroundPos = -(itemPos.top / viewHeight) * 80;\n\n        if($media.query('screen-xs')) {\n          elBackgroundPos = -(itemPos.top / viewHeight) * 80;\n        }\n\n        elBackgroundPos += 80;\n\n        if(elBackgroundPos < 0) {\n          elBackgroundPos = 0;\n        }\n\n        if(elBackgroundPos > 100) {\n          elBackgroundPos = 100;\n        }\n\n        element.style.backgroundPosition = \"50% \" + elBackgroundPos + \"%\";\n\n      };\n      var startParallax = function (cards) {\n        for (var i = 0; i < cards.length; i++) {\n          var item = cards[i];\n          parallax(item);\n        }\n      };\n      $timeout(function () {\n        var cards = angular.element(elem).find('.card');\n        startParallax(cards);\n        for (var i = 0; i < cards.length; i++) {\n          var card = cards[i];\n          angular.element(card).on('inview', function (event, isInView) {\n            if (isInView) {\n              cardsInView.push(event.currentTarget);\n              angular.element(event.currentTarget).addClass('visible');\n            } else {\n              var locationInView = cardsInView.indexOf(event.currentTarget);\n              angular.element(event.currentTarget).removeClass('visible');\n              if (locationInView != -1)\n                cardsInView.splice(locationInView, 1);\n\n            }\n          });\n        }\n        $document.bind('scroll', function () {\n          if (cardsInView.length)\n            startParallax(cardsInView);\n        });\n      }, isOldIE ? 1500 :0);\n\n    }\n  });\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('pageContent', pageContent);\n\n  function pageContent() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/pageContent/pageContent.directive.html',\n      scope: {\n        page: '='\n      },\n      controller: PageContentController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function PageContentController($scope, $sce) {\n      $scope.getSafeContent = function(content) {\n        return $sce.trustAsResourceUrl(content);\n      }\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n  /** @ngInject */\n  angular\n    .module('lhr70')\n    .directive('onFinishRender', function ($timeout) {\n      return {\n        restrict: 'A',\n        link: function (scope) {\n          if (scope.$last === true) {\n            $timeout(function () {\n              scope.$emit('ngRepeatFinished');\n            });\n          }\n        }\n      }\n    })\n\n  })();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('navbar', acmeNavbar);\n\n  function acmeNavbar() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/navbar/navbar.html',\n      scope: {\n        creationDate: '='\n      },\n      controller: NavbarController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NavbarController($timeout, $scope, $rootScope, $location) {\n\n      var navbar = angular.element('.navbar');\n\n      /**\n       *  set behaviour for story page\n       *\n       *  @method setStoryPage\n       */\n      function setPages() {\n        var locationPath = $location.path().split('/');\n        var locationMain = locationPath[1];\n        var locationSub = locationPath[2];\n\n        $scope.navAlwaysVisible = locationMain === 'story' && locationSub !== 'submit' || locationMain === 'gift' || locationMain === 'page';\n\n        $scope.isHomePage = locationMain === '';\n        $scope.isStoryPage = locationMain === 'story' && locationSub !== 'submit';\n        $scope.isGiftPage = locationMain === 'gifts';\n        $scope.isHowItWorksPage = locationMain == 'page' && locationSub == 'how-it-works';\n        $scope.isTOC = locationMain == 'page' && locationSub == 'terms';\n\n\n        if ($scope.navAlwaysVisible) {\n          navbar.addClass('visible');\n        } else {\n          $timeout(function () {\n            if (!$scope.navAlwaysVisible) {\n              if(isOldIE) {\n                $timeout(function () {\n                  handleInViewBehaviour();\n                },1500);\n              } else {\n                handleInViewBehaviour();\n              }\n            }\n          }, 100);\n        }\n      }\n\n      /**\n       *  set show hide of nav (only for non story pages)\n       *\n       *  @method handleInViewBehaviour\n       */\n      function handleInViewBehaviour() {\n        angular.element('.hero-box').on('inview', function (event, isInView) {\n          $timeout(function () {\n            if (!isInView)\n              navbar.addClass('visible');\n            else {\n              navbar.removeClass('visible');\n            }\n          });\n        });\n      }\n\n      /**\n       *  handle title visibility for story page\n       *\n       *  @method handleStoryVisibility\n       */\n      function handleStoryVisibility() {\n        var deregisterationCallback = $rootScope.$on('STORY_SHOW_TITLE_IN_NAV', function (ev, visible) {\n          if (visible) {\n            navbar.addClass('has-story-info');\n          } else {\n            navbar.removeClass('has-story-info');\n          }\n        });\n\n        $rootScope.$on('$destroy', deregisterationCallback);\n      }\n\n      /**\n       *  update story title\n       *\n       *  @method handleStoryInfoBehaviour\n       */\n      function updateStoryTitle() {\n        // get title from navigation\n        var deregisterationCallback = $rootScope.$on('STORY_TITLE_CHANGE', function (ev, args) {\n          $scope.storyInfo = args;\n        });\n\n        $rootScope.$on('$destroy', deregisterationCallback);\n      }\n\n      /**\n       *  initialise navigation\n       *\n       *  @method init\n       */\n      function init() {\n\n        setPages();\n        handleStoryVisibility();\n\n\n        $timeout(function () {\n          if (!$scope.navAlwaysVisible) {\n            handleInViewBehaviour();\n          }\n        }, 100);\n\n        updateStoryTitle();\n      }\n\n      var deregisterationCallback3 = $rootScope.$on('$stateChangeStart',\n        function (event, toState) {\n          navbar.addClass('is-transitioning');\n\n          if (toState.name === 'gifts' || toState.name === 'home' || toState.name === 'storySubmit') {\n            navbar.removeClass('visible');\n          }\n        }\n      );\n\n      var deregisterationCallback2 = $rootScope.$on('$stateChangeSuccess',\n        function () {\n          $timeout(function () {\n            navbar.removeClass('is-transitioning');\n          }, 100);\n          init();\n        }\n      );\n\n      $rootScope.$on('$destroy', deregisterationCallback2);\n      $rootScope.$on('$destroy', deregisterationCallback3);\n\n      init();\n\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('menu', menu);\n\n  function menu() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/menu/menu.html',\n      scope: {\n      },\n      controller: MenuController\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function MenuController($scope, $rootScope, $location) {\n\n      var body = angular.element('.menu-body');\n      $scope.active = false;\n\n      /**\n       *  toggle menu\n       *\n       *  @method toggleMenu\n       */\n      $scope.toggleMenu = function() {\n        $scope.active = !$scope.active;\n        body.toggleClass('has-active-menu');\n      };\n\n      var resetMenu = function() {\n        var locationPath = $location.path().split('/');\n        var locationMain = locationPath[1];\n\n        $scope.isHomePage = locationMain === '';\n        $scope.isGiftsPage = locationMain === 'gifts';\n      };\n\n      /**\n       *  close menu\n       *\n       *  @method closeMenu\n       */\n      $scope.closeMenu = function() {\n        $scope.active = false;\n        body.removeClass('has-active-menu');\n      };\n\n      function detectClickOutside() {\n        angular.element(document).click(function(event) {\n          if(!angular.element(event.target).closest('.menu').length && !angular.element(event.target).is('.menu')) {\n            if($scope.active) {\n              $scope.closeMenu();\n              $scope.$apply();\n            }\n          }\n        })\n      }\n\n      /**\n       *  initialise menu\n       *\n       *  @method init\n       */\n      function init() {\n        resetMenu();\n        detectClickOutside();\n        // content.focusout( function() {\n        //   $scope.closeMenu\n        // } );\n      }\n\n      var deregisterationCallback = $rootScope.$on('$stateChangeSuccess',\n        function () {\n          $scope.closeMenu();\n          init();\n          resetMenu();\n        }\n      );\n\n      $rootScope.$on('$destroy', deregisterationCallback);\n\n      init();\n\n    }\n  }\n\n})();\n\n// Code here will be linted with JSHint.\n/*eslint-disable */\n\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\n  /*\n\n   MasonJS\n   Author: Drew Dahlman\n   Version: 2.0.3\n   License: MIT\n\n   Copyright (c) 2015 Drew Dahlman\n\n   Permission is hereby granted, free of charge, to any person obtaining\n   a copy of this software and associated documentation files (the\n   \"Software\"), to deal in the Software without restriction, including\n   without limitation the rights to use, copy, modify, merge, publish,\n   distribute, sublicense, and/or sell copies of the Software, and to\n   permit persons to whom the Software is furnished to do so, subject to\n   the following conditions:\n\n   The above copyright notice and this permission notice shall be\n   included in all copies or substantial portions of the Software.\n\n   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n   NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n   LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n   OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n   WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n   */\n  (function($) {\n    return $.fn.mason = function(options, complete) {\n      var $self, callback, debug_elements, defaults, elements, mason_clear;\n      defaults = {\n        itemSelector: '',\n        ratio: 0,\n        sizes: [],\n        columns: [[0, 480, 1], [480, 780, 2], [780, 1080, 3], [1080, 1320, 4], [1320, 1680, 5]],\n        promoted: [],\n        filler: {\n          itemSelector: options.itemSelector,\n          filler_class: 'mason_filler',\n          keepDataAndEvents: false\n        },\n        randomSizes: false,\n        randomFillers: false,\n        layout: 'none',\n        gutter: 0,\n        debug: false\n      };\n      $self = null;\n      debug_elements = {\n        container: $(\"<div id='debug'></div>\"),\n        block: \"<div class='mason-debug' style='background-color: rgba(244, 67, 54, .5); float: left;'></div>\"\n      };\n      mason_clear = \"<div class='mason_clear' style='clear:both; position:relative;'></div>\";\n      if (complete) {\n        callback = {\n          complete: complete\n        };\n      }\n      elements = {\n        block: {\n          height: 0,\n          width: 0\n        },\n        matrix: [],\n        startWidth: 0\n      };\n      this.each(function() {\n        var callbacks, columnSize, debug, layBricks, mason, resize, settings, setup, sizeElements;\n        settings = $.extend(defaults, options);\n        callbacks = $.extend(callback, complete);\n        $self = $(this);\n        setup = function() {\n          if (settings.debug) {\n            console.log(\"SETUP\");\n          }\n          if ($self.children(\".mason_clear\").length < 1) {\n            $self.append(mason_clear);\n          }\n          elements.block.height = Math.round(parseFloat(($self.width() / columnSize()) / settings.ratio)).toFixed(2);\n          elements.block.width = Math.round(parseFloat($self.width() / columnSize())).toFixed(2);\n          elements.startWidth = $self.width();\n          sizeElements();\n          if (settings.debug) {\n            console.log(\"############## Running In Debug Mode ##############\");\n            return debug();\n          }\n        };\n        sizeElements = function() {\n          var $block;\n          if (columnSize() === 1) {\n            $block = $self.children(\"\" + settings.itemSelector);\n            $block.height(elements.block.height - (settings.gutter * 2));\n            $block.width(elements.block.width - (settings.gutter * 2));\n            $block.css({\n              'margin': settings.gutter\n            });\n            if (typeof callbacks.complete !== \"undefined\") {\n              return callbacks.complete();\n            }\n          } else {\n            $self.children(\"\" + settings.itemSelector, \".\" + settings.filler.filler_class).each(function() {\n              var h, p, promoted, promoted_size, ran, size, w;\n              $block = $(this);\n              p = 0;\n              promoted = false;\n              promoted_size = 0;\n              while (p < settings.promoted.length) {\n                if ($block.hasClass(settings.promoted[p][0])) {\n                  promoted = true;\n                  promoted_size = p;\n                }\n                p++;\n              }\n              if (promoted) {\n                size = settings.promoted[promoted_size];\n                $block.data('size', promoted_size);\n                $block.data('promoted', true);\n                h = parseFloat(elements.block.height * size[2]).toFixed(0);\n                h = h - (settings.gutter * 2);\n                w = parseFloat(elements.block.width * size[1]).toFixed(0);\n                w = w - (settings.gutter * 2);\n              } else {\n                ran = Math.floor(Math.random() * settings.sizes.length);\n                size = settings.sizes[ran];\n                $block.data('size', ran);\n                h = parseFloat(elements.block.height * size[1]).toFixed(0);\n                h = h - (settings.gutter * 2);\n                w = parseFloat(elements.block.width * size[0]).toFixed(0);\n                w = w - (settings.gutter * 2);\n              }\n              $block.height(h + 'px');\n              $block.width(w + 'px');\n              return $block.css({\n                'margin': settings.gutter\n              });\n            });\n            return mason();\n          }\n        };\n        mason = function() {\n          var block_h, c, col, el_h, r;\n          col = columnSize();\n          el_h = $self.height();\n          block_h = Math.round(el_h / elements.block.height);\n          elements.matrix = [];\n          r = 0;\n          while (r < block_h) {\n            elements.matrix[r] = [];\n            c = 0;\n            while (c < col) {\n              elements.matrix[r][c] = false;\n              c++;\n            }\n            r++;\n          }\n          $self.children(\"\" + settings.itemSelector).each(function() {\n            var $block, a, bh, bw, h, l, results, s, t, w;\n            $block = $(this);\n            l = Math.round($block.position().left / elements.block.width);\n            t = Math.round($block.position().top / elements.block.height);\n            s = parseFloat($block.data('size'));\n            if ($block.data('promoted')) {\n              h = settings.promoted[s][2];\n              w = settings.promoted[s][1];\n              a = h * w;\n            } else {\n              h = settings.sizes[s][1];\n              w = settings.sizes[s][0];\n              a = h * w;\n            }\n            r = 0;\n            results = [];\n            while (r < a) {\n              bh = 0;\n              while (bh < h) {\n                bw = 0;\n                elements.matrix[t + bh][l] = true;\n                while (bw < w) {\n                  elements.matrix[t + bh][l + bw] = true;\n                  bw++;\n                }\n                bh++;\n              }\n              results.push(r++);\n            }\n            return results;\n          });\n          return layBricks();\n        };\n        layBricks = function() {\n          var $filler, c, filler_index, filler_total, h, r, w, x, y;\n          r = 0;\n          filler_total = $(\"\" + settings.filler.itemSelector).not(\".\" + settings.filler.filler_class).length;\n          filler_index = -1;\n          while (r < elements.matrix.length) {\n            c = 0;\n            while (c < elements.matrix[r].length) {\n              if (!elements.matrix[r][c]) {\n                h = elements.block.height;\n                w = elements.block.width;\n                x = (r * h) + settings.gutter;\n                y = (c * w) + settings.gutter;\n                h = h - settings.gutter * 2;\n                w = w - settings.gutter * 2;\n                if (settings.randomFillers) {\n                  filler_index = Math.floor(Math.random() * filler_total);\n                } else {\n                  if (filler_index < filler_total) {\n                    filler_index++;\n                  }\n                  if (filler_index === filler_total) {\n                    filler_index = 0;\n                  }\n                }\n                $filler = $(\"\" + settings.filler.itemSelector).not(\".\" + settings.filler.filler_class).eq(filler_index).clone(settings.filler.keepDataAndEvents);\n                $filler.addClass(settings.filler.filler_class);\n                $filler.css({\n                  position: 'absolute',\n                  top: x + 'px',\n                  left: y + 'px',\n                  height: h + 'px',\n                  width: w + 'px',\n                  margin: '0px'\n                });\n                $filler.appendTo($self);\n              }\n              c++;\n            }\n            r++;\n          }\n          if ($self.width() < elements.startWidth) {\n            return $(window, $self).trigger('resize');\n          } else {\n            if (typeof callbacks.complete !== \"undefined\") {\n              return callbacks.complete();\n            }\n          }\n        };\n        columnSize = function() {\n          var cols, colsCount, i, w;\n          w = parseFloat($self.width());\n          cols = 0;\n          colsCount = settings.columns.length - 1;\n          if (w >= settings.columns[colsCount[1]]) {\n            cols = settings.columns[colsCount[2]];\n          } else {\n            i = 0;\n            while (i <= colsCount) {\n              if (w > settings.columns[i][0] && settings.columns[i][1]) {\n                cols = settings.columns[i][2];\n              }\n              i++;\n            }\n          }\n          return Math.floor(cols);\n        };\n        debug = function() {\n          var $debug, block, block_h, c, col, el_h, i;\n          $debug = $self.parent();\n          col = columnSize();\n          el_h = $self.height();\n          block_h = el_h / elements.block.height;\n          debug_elements.container.css({\n            position: 'absolute',\n            top: '0',\n            left: '0',\n            height: $self.height(),\n            width: $self.width()\n          });\n          i = 0;\n          while (i < block_h) {\n            c = 0;\n            while (c < col) {\n              block = $(debug_elements.block);\n              block.css({\n                height: elements.block.height - (settings.gutter * 2),\n                width: elements.block.width - (settings.gutter * 2),\n                margin: settings.gutter\n              });\n              debug_elements.container.append(block);\n              c++;\n            }\n            i++;\n          }\n          debug_elements.container.append(mason_clear);\n          return $debug.prepend(debug_elements.container);\n        };\n        if (settings.layout === \"fluid\") {\n          resize = null;\n          var width = $(window).width();\n          $(window, $self).on('resize', (function(_this) {\n            return function(event) {\n              if(width !==  $(window).width()) {\n                width = $(window).width();\n                $(\".\" + settings.filler.filler_class).remove();\n                elements.matrix = [];\n                clearTimeout(resize);\n                resize = null;\n                return resize = setTimeout(function () {\n                  return setup();\n                }, 0);\n              }\n            };\n          })(this));\n        }\n        return setup();\n      });\n      return {\n        destroy: function() {\n          return $(window, $self).off('resize');\n        }\n      };\n    };\n  })(jQuery);\n\n\n\n},{}]},{},[1]);\n// Code here will be ignored by JSHint.\n/*eslint-enable */\n\n/**\n * @ngdoc directive\n * @name lhr70:masonDirective\n *\n * @description\n *\n *\n * @restrict A\n * */\n\n/** @ngInject */\nangular.module('lhr70')\n  .directive('masonaryGrid', function ($log, $timeout, $media) {\n    return function (scope, elem) {\n      var setInfoPosition = function () {\n        var screenWidth = angular.element(window).width();\n        var colWidth = angular.element(\".card.lg:first\").width();\n\n        colWidth = (colWidth / 7);\n        var largeBlock, smallBlock, contentBlock, ctaBlock, ctaBorder;\n\n        if ($media.query('tablet')) {\n          largeBlock = {\n            'width': ((colWidth * 5) - 15).toString() + \"px\",\n            'height': (colWidth * 2).toString() + \"px\"\n          };\n          smallBlock = {\n            'width': ((colWidth * 4)).toString() + \"px\",\n            'height': (colWidth * 2).toString() + \"px\"\n          };\n\n          contentBlock = {'height': (colWidth).toString() + \"px\"};\n          ctaBlock = {'padding-top': colWidth.toString() + 'px'};\n\n        } else {\n          largeBlock = {\n            'width': ((colWidth * 5)).toString() + \"px\",\n            'height': ((colWidth * 2) - 6).toString() + \"px\"\n          };\n          smallBlock = {\n            'width': ((colWidth * 5)).toString() + \"px\",\n            'height': (colWidth * 2).toString() + \"px\"\n          };\n          ctaBlock = {'padding-top': (colWidth * 2.5).toString() + 'px'};\n\n        }\n\n\n        jss.set('.lg .story--copy', largeBlock);\n        jss.set('.sm .story--copy', smallBlock);\n\n        jss.set('.lg .content, .sm .content', contentBlock);\n\n        jss.set('.cta,.gftCta', ctaBlock);\n\n        if ($media.query('tablet')) {\n          ctaBorder = {'width': ((colWidth * 4)).toString() + \"px\"};\n        } else {\n          ctaBorder = {'width': \"100%\"};\n        }\n        jss.set('.cta-border', ctaBorder);\n\n        angular.element('.jig-grid').addClass('grid-loaded');\n\n        $timeout(function () {\n          var ctas = angular.element(\".card.cta,.card.gftCta\");\n\n          function setNewMargins() {\n            var cards = angular.element(\".card\");\n            var width = screenWidth - 30;\n\n            for (var i = 0; i < cards.length; i++) {\n              var cta = angular.element(cards[i]);\n              if (i == 0 && cta.hasClass('gftLg')) {\n                cta.css('height', width + 75 + 'px');\n              } else {\n                cta.css('height', width + 'px');\n              }\n\n              cta.css('width', width + 'px');\n\n              cta.css('margin', '15px');\n            }\n          }\n\n          if ($media.query('tablet')) {\n            screenWidth = screenWidth > 1200 ? 1200 : screenWidth;\n\n            var width = screenWidth / 2;\n\n            var threshold = {\n              left: width - (width * 0.55),\n              right: width\n            };\n\n            for (var i = 0; i < ctas.length; i++) {\n              var cta = angular.element(ctas[i]);\n\n              var ctaPosition = cta.position();\n              if (ctaPosition.left > threshold.left && ctaPosition.left < threshold.right) {\n                if (i < ctas.length) {\n                  var nextElement = cta.next();\n                  if (ctaPosition.top == ctaPosition.top) {\n                    nextElement.insertBefore(cta);\n                    ctaPosition = cta.position();\n                    if (ctaPosition.left > threshold.left && ctaPosition.left < threshold.right) {\n                      cta.remove();\n                    }\n                  }\n                }\n              }\n              cta.removeClass('left');\n              cta.removeClass('right');\n              if (ctaPosition.left > threshold.left) {\n                cta.addClass('right');\n              } else {\n                cta.addClass('left');\n              }\n            }\n          } else {\n            ctas.removeClass('left');\n            ctas.addClass('right');\n            setNewMargins()\n          }\n        }, 50);\n      };\n      $timeout(function () {\n        angular.element(elem).mason({\n          itemSelector: '.card',\n          ratio: 1,\n          promoted: [\n            ['lg', 6.9, 7],\n            ['sm', 4.9, 6],\n            ['qt', 4, 4],\n            ['sn', 5, 5],\n            ['cta', 2, 4],\n            ['gftCta', 2, 4],\n            ['gftHero', 11.8, 4],\n            ['gft', 4, 4],\n            ['gftLg', 7, 7],\n            ['gftSm', 3.9, 4]\n          ],\n          columns: [\n            [0, 608, 1],\n            [608, 1680, 12]\n          ],\n          filler: {\n            itemSelector: '.filler',\n            filler_class: 'mason-filler'\n          },\n          gutter: 5,\n          layout: 'fluid'\n        }, setInfoPosition)\n      },  1000);\n    }\n  });\n\n/**\n * @ngdoc directive\n * @name lhr70:imageCropperDirective\n *\n * @description\n *\n *\n * @restrict A\n * */\n\n/** @ngInject */\nangular.module('lhr70')\n  .directive('imageCropper', function () {\n    return {\n      restrict: 'A',\n      scope: {\n        source: '=',\n        type: '='\n      },\n      link: function (scope, elem) {\n        var startCropping = function (watcher) {\n          var canvas = angular.element('<canvas></canvas>')[0];\n          var ctx = canvas.getContext('2d');\n          var img = angular.element('<img></img>')[0];\n          img.setAttribute('crossOrigin', 'anonymous');\n          img.src = scope.source;\n          // When the image is loaded, draw it\n          img.onload = function () {\n\n            var height = img.height;\n            var width = img.width;\n            canvas.height = scope.type == 'header-image' ? height * 0.86 : height;\n            canvas.width = width;\n\n            // Save the state, so we can undo the clipping\n            ctx.save();\n            ctx.beginPath();\n            if (scope.type == 'gftLg') {\n              ctx.moveTo(width * 0.1, 0);\n              ctx.lineTo(width * 0.28, height * 0.8);\n              ctx.lineTo(width * 0.76, height);\n              ctx.lineTo(width, height * 0.70);\n              ctx.lineTo(width, 0);\n            } else if (scope.type == 'header-image') {\n              ctx.moveTo(width * 0.13, 0);\n              ctx.lineTo(width * 0.24, height * 0.60);\n              ctx.lineTo(width * 0.76, height * 0.85);\n              ctx.lineTo(width, height * 0.45);\n              ctx.lineTo(width, 0);\n            } else {\n              ctx.moveTo(width * 0.025, 0);\n              ctx.lineTo(width * 0.16, height * 0.7);\n              ctx.lineTo(width * 0.83, height);\n              ctx.lineTo(width, height * 0.8);\n              ctx.lineTo(width, 0);\n            }\n\n            ctx.closePath();\n\n            // Clip to the current path\n            ctx.clip();\n\n            if (scope.type == 'header-image') {\n              var sourceX = 0;\n              var sourceY = 0;\n              var sourceWidth = width;\n              var sourceHeight = height;\n              var destWidth = sourceWidth;\n              var destHeight = sourceHeight * 0.86;\n              var destX = 0;\n              var destY = 0;\n              ctx.drawImage(img, sourceX, sourceY, sourceWidth, sourceHeight, destX, destY, destWidth, destHeight);\n            } else {\n              ctx.drawImage(img, 0, 0);\n            }\n            // Undo the clipping\n            ctx.restore();\n            elem[0].src = canvas.toDataURL(\"image/png\", 100);\n\n            // destroy the watcher\n            watcher();\n          };\n        };\n\n        var watcher = scope.$watch(function () {\n          return scope.source;\n        }, function (source) {\n          if (typeof(source) !== 'undefined') {\n            startCropping(watcher);\n          }\n        });\n      }\n    };\n  });\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('giftsBlock', giftsBlock);\n\n  function giftsBlock() {\n    var directive = {\n      restrict: 'EA',\n      templateUrl: 'app/components/gifts/gifts.directive.html',\n      scope: {\n        cards: '='\n      },\n      controller: GiftsController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function GiftsController() {\n    }\n\n    return directive;\n  }\n})();\n\n\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('giftHeader', giftHeader);\n\n  /** @ngInject */\n  function giftHeader() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/giftHeader/giftHeader.directive.html',\n      scope: {\n        image: '=',\n        logo: '='\n      },\n      controller: GiftHeaderController\n    };\n\n    function GiftHeaderController() {\n      // TODO\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('giftContent', giftContent);\n\n  function giftContent() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/giftContent/giftContent.directive.html',\n      scope: {\n        gift: '='\n      },\n      controller: GiftContentController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function GiftContentController($scope, $sce, $rootScope) {\n      $scope.hasField = function(field) {\n        return field && field.length > 0;\n      }\n\n      $scope.getSoundcloudUrl = function(id) {\n        return $sce.trustAsResourceUrl(\"https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/\" + id +\n                \"&amp;color=350083&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false\");\n      }\n\n      var handleTitleInView = function() {\n        angular.element('.gift-title').on('inview', function (event, isInView) {\n          $rootScope.$broadcast('STORY_SHOW_TITLE_IN_NAV', !isInView);\n        });\n      }\n\n      handleTitleInView();\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('footer', footer);\n\n  /** @ngInject */\n  function footer() {\n    var directive = {\n      restrict: 'A',\n      templateUrl: 'app/components/footer/footer.directive.html',\n      scope: {\n        story: '='\n      },\n      controller: FooterController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function FooterController() {\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('carousel', carousel);\n\n  function carousel() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/carousel/carousel.directive.html',\n      scope: {\n        images: '='\n      },\n      controller: CarouselController\n    };\n\n    /** @ngInject */\n    function CarouselController($scope, $timeout) {\n\n      $scope.isLastElement = function() {\n        return $scope.currentSlide === $scope.images.length - 1;\n      }\n\n      $scope.isFirstElement = function() {\n        return $scope.currentSlide === 0;\n      }\n\n      var initCarousel = function() {\n        var c = angular.element('.carousel-inner').slick({\n          prevArrow: angular.element('.carousel-prev'),\n          nextArrow: angular.element('.carousel-next'),\n          infinite: false\n        });\n\n        c.on('beforeChange', function(event, slick, currentSlide, nextSlide) {\n\n          updatePage(nextSlide);\n\n        });\n      }\n\n      var updatePage = function(newPage) {\n        angular.element('.carousel-current').addClass('is-animating');\n\n        $timeout(function() {\n\n          $scope.currentSlide = newPage;\n          $scope.$apply();\n          angular.element('.carousel-current').removeClass('is-animating');\n\n        }, 300);\n      }\n\n      var init = function() {\n        $scope.currentSlide = 0;\n\n        $scope.$on('ngRepeatFinished', function() {\n          initCarousel();\n        });\n      }\n\n      init();\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('cardsBlock', cardsBlock);\n\n  function cardsBlock() {\n    var directive = {\n      restrict: 'EA',\n      templateUrl: 'app/components/cards/cards.directive.html',\n      scope: {\n        cards: '='\n      },\n      controller: CardsController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function CardsController($scope) {\n      $scope.isStory = function(card) {\n        return card.className=='qt' || card.className=='sn' || card.className=='cta' ||\n               card.className=='gftCta' || card.className=='sm' || card.className=='lg';\n      };\n\n      $scope.isGift = function(card) {\n        return card.className=='gft' || card.className=='gftLg' ||\n               card.className=='gftSm'|| card.className=='gftHero';\n      };\n\n      $scope.getUrl = function(card) {\n        return card.className === \"gftCta\" ? \"/gifts\" :\n               card.className === \"cta\" ? \"/story/submit\" :\n               $scope.isGift(card) ? \"/gift/\" + card.slug :\n               \"/story/\" + card.slug\n      };\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('storyBlock', storyBlock);\n\n  function storyBlock() {\n    var directive = {\n      restrict: 'EA',\n      templateUrl: 'app/components/cardStory/story.directive.html',\n      scope: {\n        story: '='\n      },\n      controller: StoryController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function StoryController() {\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('snippetBlock', snippetBlock);\n\n  /** @ngInject */\n  function snippetBlock() {\n    var directive = {\n      restrict: 'EA',\n      templateUrl: 'app/components/cardSnippet/snippet.directive.html',\n      scope: {\n        story: '='\n      },\n      controller: SnippetController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function SnippetController() {\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('quoteBlock', QuoteBlock);\n\n  /** @ngInject */\n  function QuoteBlock() {\n    var directive = {\n      restrict: 'EA',\n      templateUrl: 'app/components/cardQuote/quote.directive.html',\n      scope: {\n        story: '=',\n        block: '='\n      },\n      controller: QuoteController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function QuoteController() {\n\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('giftHeroBlock', giftHeroBlock);\n\n  /** @ngInject */\n  function giftHeroBlock() {\n    var directive = {\n      restrict: 'EA',\n      templateUrl: 'app/components/cardGiftHero/giftHero.directive.html',\n      scope: {\n        gift: '='\n      },\n      controller: GiftController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function GiftController() {\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('giftBlock', giftBlock);\n\n  /** @ngInject */\n  function giftBlock() {\n    var directive = {\n      restrict: 'EA',\n      templateUrl: 'app/components/cardGift/gift.directive.html',\n      scope: {\n        gift: '='\n      },\n      controller: GiftController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function GiftController() {\n      var vm = this;\n      vm.isGiftsPage = angular.element('.page-gifts').length;\n    }\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .directive('ctaBlock', CtaBlock);\n\n  /** @ngInject */\n  function CtaBlock() {\n    var directive = {\n      restrict: 'EA',\n      templateUrl: 'app/components/cardCta/cta.directive.html',\n      scope: {\n        type: '=',\n        href: \"=\",\n        title: \"=\",\n        copy: \"=\"\n      },\n      controller: CtaController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function CtaController() {\n    }\n\n    return directive;\n  }\n})();\n\n/*!\n * modernizr v3.3.1\n * Build http://modernizr.com/download?-pointerevents-target-touchevents-setclasses-dontmin-cssclassprefix:supports-\n *\n * Copyright (c)\n *  Faruk Ates\n *  Paul Irish\n *  Alex Sexton\n *  Ryan Seddon\n *  Patrick Kettner\n *  Stu Cox\n *  Richard Herrera\n\n * MIT License\n */\n\n/*\n * Modernizr tests which native CSS3 and HTML5 features are available in the\n * current UA and makes the results available to you in two ways: as properties on\n * a global `Modernizr` object, and as classes on the `<html>` element. This\n * information allows you to progressively enhance your pages with a granular level\n * of control over the experience.\n*/\n\n;(function(window, document, undefined){\n  var tests = [];\n  \n\n  /**\n   *\n   * ModernizrProto is the constructor for Modernizr\n   *\n   * @class\n   * @access public\n   */\n\n  var ModernizrProto = {\n    // The current version, dummy\n    _version: '3.3.1',\n\n    // Any settings that don't work as separate modules\n    // can go in here as configuration.\n    _config: {\n      'classPrefix': \"supports-\",\n      'enableClasses': true,\n      'enableJSClass': true,\n      'usePrefixes': true\n    },\n\n    // Queue of tests\n    _q: [],\n\n    // Stub these for people who are listening\n    on: function(test, cb) {\n      // I don't really think people should do this, but we can\n      // safe guard it a bit.\n      // -- NOTE:: this gets WAY overridden in src/addTest for actual async tests.\n      // This is in case people listen to synchronous tests. I would leave it out,\n      // but the code to *disallow* sync tests in the real version of this\n      // function is actually larger than this.\n      var self = this;\n      setTimeout(function() {\n        cb(self[test]);\n      }, 0);\n    },\n\n    addTest: function(name, fn, options) {\n      tests.push({name: name, fn: fn, options: options});\n    },\n\n    addAsyncTest: function(fn) {\n      tests.push({name: null, fn: fn});\n    }\n  };\n\n  \n\n  // Fake some of Object.create so we can force non test results to be non \"own\" properties.\n  var Modernizr = function() {};\n  Modernizr.prototype = ModernizrProto;\n\n  // Leak modernizr globally when you `require` it rather than force it here.\n  // Overwrite name so constructor name is nicer :D\n  Modernizr = new Modernizr();\n\n  \n\n  var classes = [];\n  \n\n  /**\n   * is returns a boolean if the typeof an obj is exactly type.\n   *\n   * @access private\n   * @function is\n   * @param {*} obj - A thing we want to check the type of\n   * @param {string} type - A string to compare the typeof against\n   * @returns {boolean}\n   */\n\n  function is(obj, type) {\n    return typeof obj === type;\n  }\n  ;\n\n  /**\n   * Run through all tests and detect their support in the current UA.\n   *\n   * @access private\n   */\n\n  function testRunner() {\n    var featureNames;\n    var feature;\n    var aliasIdx;\n    var result;\n    var nameIdx;\n    var featureName;\n    var featureNameSplit;\n\n    for (var featureIdx in tests) {\n      if (tests.hasOwnProperty(featureIdx)) {\n        featureNames = [];\n        feature = tests[featureIdx];\n        // run the test, throw the return value into the Modernizr,\n        // then based on that boolean, define an appropriate className\n        // and push it into an array of classes we'll join later.\n        //\n        // If there is no name, it's an 'async' test that is run,\n        // but not directly added to the object. That should\n        // be done with a post-run addTest call.\n        if (feature.name) {\n          featureNames.push(feature.name.toLowerCase());\n\n          if (feature.options && feature.options.aliases && feature.options.aliases.length) {\n            // Add all the aliases into the names list\n            for (aliasIdx = 0; aliasIdx < feature.options.aliases.length; aliasIdx++) {\n              featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());\n            }\n          }\n        }\n\n        // Run the test, or use the raw value if it's not a function\n        result = is(feature.fn, 'function') ? feature.fn() : feature.fn;\n\n\n        // Set each of the names on the Modernizr object\n        for (nameIdx = 0; nameIdx < featureNames.length; nameIdx++) {\n          featureName = featureNames[nameIdx];\n          // Support dot properties as sub tests. We don't do checking to make sure\n          // that the implied parent tests have been added. You must call them in\n          // order (either in the test, or make the parent test a dependency).\n          //\n          // Cap it to TWO to make the logic simple and because who needs that kind of subtesting\n          // hashtag famous last words\n          featureNameSplit = featureName.split('.');\n\n          if (featureNameSplit.length === 1) {\n            Modernizr[featureNameSplit[0]] = result;\n          } else {\n            // cast to a Boolean, if not one already\n            /* jshint -W053 */\n            if (Modernizr[featureNameSplit[0]] && !(Modernizr[featureNameSplit[0]] instanceof Boolean)) {\n              Modernizr[featureNameSplit[0]] = new Boolean(Modernizr[featureNameSplit[0]]);\n            }\n\n            Modernizr[featureNameSplit[0]][featureNameSplit[1]] = result;\n          }\n\n          classes.push((result ? '' : 'no-') + featureNameSplit.join('-'));\n        }\n      }\n    }\n  }\n  ;\n\n  /**\n   * docElement is a convenience wrapper to grab the root element of the document\n   *\n   * @access private\n   * @returns {HTMLElement|SVGElement} The root element of the document\n   */\n\n  var docElement = document.documentElement;\n  \n\n  /**\n   * A convenience helper to check if the document we are running in is an SVG document\n   *\n   * @access private\n   * @returns {boolean}\n   */\n\n  var isSVG = docElement.nodeName.toLowerCase() === 'svg';\n  \n\n  /**\n   * setClasses takes an array of class names and adds them to the root element\n   *\n   * @access private\n   * @function setClasses\n   * @param {string[]} classes - Array of class names\n   */\n\n  // Pass in an and array of class names, e.g.:\n  //  ['no-webp', 'borderradius', ...]\n  function setClasses(classes) {\n    var className = docElement.className;\n    var classPrefix = Modernizr._config.classPrefix || '';\n\n    if (isSVG) {\n      className = className.baseVal;\n    }\n\n    // Change `no-js` to `js` (independently of the `enableClasses` option)\n    // Handle classPrefix on this too\n    if (Modernizr._config.enableJSClass) {\n      var reJS = new RegExp('(^|\\\\s)' + classPrefix + 'no-js(\\\\s|$)');\n      className = className.replace(reJS, '$1' + classPrefix + 'js$2');\n    }\n\n    if (Modernizr._config.enableClasses) {\n      // Add the new classes\n      className += ' ' + classPrefix + classes.join(' ' + classPrefix);\n      isSVG ? docElement.className.baseVal = className : docElement.className = className;\n    }\n\n  }\n\n  ;\n\n  /**\n   * If the browsers follow the spec, then they would expose vendor-specific style as:\n   *   elem.style.WebkitBorderRadius\n   * instead of something like the following, which would be technically incorrect:\n   *   elem.style.webkitBorderRadius\n\n   * Webkit ghosts their properties in lowercase but Opera & Moz do not.\n   * Microsoft uses a lowercase `ms` instead of the correct `Ms` in IE8+\n   *   erik.eae.net/archives/2008/03/10/21.48.10/\n\n   * More here: github.com/Modernizr/Modernizr/issues/issue/21\n   *\n   * @access private\n   * @returns {string} The string representing the vendor-specific style properties\n   */\n\n  var omPrefixes = 'Moz O ms Webkit';\n  \n\n  /**\n   * List of JavaScript DOM values used for tests\n   *\n   * @memberof Modernizr\n   * @name Modernizr._domPrefixes\n   * @optionName Modernizr._domPrefixes\n   * @optionProp domPrefixes\n   * @access public\n   * @example\n   *\n   * Modernizr._domPrefixes is exactly the same as [_prefixes](#modernizr-_prefixes), but rather\n   * than kebab-case properties, all properties are their Capitalized variant\n   *\n   * ```js\n   * Modernizr._domPrefixes === [ \"Moz\", \"O\", \"ms\", \"Webkit\" ];\n   * ```\n   */\n\n  var domPrefixes = (ModernizrProto._config.usePrefixes ? omPrefixes.toLowerCase().split(' ') : []);\n  ModernizrProto._domPrefixes = domPrefixes;\n  \n\n  /**\n   * createElement is a convenience wrapper around document.createElement. Since we\n   * use createElement all over the place, this allows for (slightly) smaller code\n   * as well as abstracting away issues with creating elements in contexts other than\n   * HTML documents (e.g. SVG documents).\n   *\n   * @access private\n   * @function createElement\n   * @returns {HTMLElement|SVGElement} An HTML or SVG element\n   */\n\n  function createElement() {\n    if (typeof document.createElement !== 'function') {\n      // This is the case in IE7, where the type of createElement is \"object\".\n      // For this reason, we cannot call apply() as Object is not a Function.\n      return document.createElement(arguments[0]);\n    } else if (isSVG) {\n      return document.createElementNS.call(document, 'http://www.w3.org/2000/svg', arguments[0]);\n    } else {\n      return document.createElement.apply(document, arguments);\n    }\n  }\n\n  ;\n\n  /**\n   * Modernizr.hasEvent() detects support for a given event\n   *\n   * @memberof Modernizr\n   * @name Modernizr.hasEvent\n   * @optionName Modernizr.hasEvent()\n   * @optionProp hasEvent\n   * @access public\n   * @function hasEvent\n   * @param  {string|*} eventName - the name of an event to test for (e.g. \"resize\")\n   * @param  {Element|string} [element=HTMLDivElement] - is the element|document|window|tagName to test on\n   * @returns {boolean}\n   * @example\n   *  `Modernizr.hasEvent` lets you determine if the browser supports a supplied event.\n   *  By default, it does this detection on a div element\n   *\n   * ```js\n   *  hasEvent('blur') // true;\n   * ```\n   *\n   * However, you are able to give an object as a second argument to hasEvent to\n   * detect an event on something other than a div.\n   *\n   * ```js\n   *  hasEvent('devicelight', window) // true;\n   * ```\n   *\n   */\n\n  var hasEvent = (function() {\n\n    // Detect whether event support can be detected via `in`. Test on a DOM element\n    // using the \"blur\" event b/c it should always exist. bit.ly/event-detection\n    var needsFallback = !('onblur' in document.documentElement);\n\n    function inner(eventName, element) {\n\n      var isSupported;\n      if (!eventName) { return false; }\n      if (!element || typeof element === 'string') {\n        element = createElement(element || 'div');\n      }\n\n      // Testing via the `in` operator is sufficient for modern browsers and IE.\n      // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n      // \"resize\", whereas `in` \"catches\" those.\n      eventName = 'on' + eventName;\n      isSupported = eventName in element;\n\n      // Fallback technique for old Firefox - bit.ly/event-detection\n      if (!isSupported && needsFallback) {\n        if (!element.setAttribute) {\n          // Switch to generic element if it lacks `setAttribute`.\n          // It could be the `document`, `window`, or something else.\n          element = createElement('div');\n        }\n\n        element.setAttribute(eventName, '');\n        isSupported = typeof element[eventName] === 'function';\n\n        if (element[eventName] !== undefined) {\n          // If property was created, \"remove it\" by setting value to `undefined`.\n          element[eventName] = undefined;\n        }\n        element.removeAttribute(eventName);\n      }\n\n      return isSupported;\n    }\n    return inner;\n  })();\n\n\n  ModernizrProto.hasEvent = hasEvent;\n  \n/*!\n{\n  \"name\": \"DOM Pointer Events API\",\n  \"property\": \"pointerevents\",\n  \"tags\": [\"input\"],\n  \"authors\": [\"Stu Cox\"],\n  \"notes\": [\n    {\n      \"name\": \"W3C spec\",\n      \"href\": \"https://www.w3.org/TR/pointerevents/\"\n    }\n  ],\n  \"warnings\": [\"This property name now refers to W3C DOM PointerEvents: https://github.com/Modernizr/Modernizr/issues/548#issuecomment-12812099\"],\n  \"polyfills\": [\"handjs\"]\n}\n!*/\n/* DOC\nDetects support for the DOM Pointer Events API, which provides a unified event interface for pointing input devices, as implemented in IE10+.\n*/\n\n  // **Test name hijacked!**\n  // Now refers to W3C DOM PointerEvents spec rather than the CSS pointer-events property.\n  Modernizr.addTest('pointerevents', function() {\n    // Cannot use `.prefixed()` for events, so test each prefix\n    var bool = false,\n    i = domPrefixes.length;\n\n    // Don't forget un-prefixed...\n    bool = Modernizr.hasEvent('pointerdown');\n\n    while (i-- && !bool) {\n      if (hasEvent(domPrefixes[i] + 'pointerdown')) {\n        bool = true;\n      }\n    }\n    return bool;\n  });\n\n\n  /**\n   * List of property values to set for css tests. See ticket #21\n   * http://git.io/vUGl4\n   *\n   * @memberof Modernizr\n   * @name Modernizr._prefixes\n   * @optionName Modernizr._prefixes\n   * @optionProp prefixes\n   * @access public\n   * @example\n   *\n   * Modernizr._prefixes is the internal list of prefixes that we test against\n   * inside of things like [prefixed](#modernizr-prefixed) and [prefixedCSS](#-code-modernizr-prefixedcss). It is simply\n   * an array of kebab-case vendor prefixes you can use within your code.\n   *\n   * Some common use cases include\n   *\n   * Generating all possible prefixed version of a CSS property\n   * ```js\n   * var rule = Modernizr._prefixes.join('transform: rotate(20deg); ');\n   *\n   * rule === 'transform: rotate(20deg); webkit-transform: rotate(20deg); moz-transform: rotate(20deg); o-transform: rotate(20deg); ms-transform: rotate(20deg);'\n   * ```\n   *\n   * Generating all possible prefixed version of a CSS value\n   * ```js\n   * rule = 'display:' +  Modernizr._prefixes.join('flex; display:') + 'flex';\n   *\n   * rule === 'display:flex; display:-webkit-flex; display:-moz-flex; display:-o-flex; display:-ms-flex; display:flex'\n   * ```\n   */\n\n  var prefixes = (ModernizrProto._config.usePrefixes ? ' -webkit- -moz- -o- -ms- '.split(' ') : []);\n\n  // expose these for the plugin API. Look in the source for how to join() them against your input\n  ModernizrProto._prefixes = prefixes;\n\n  \n\n  /**\n   * getBody returns the body of a document, or an element that can stand in for\n   * the body if a real body does not exist\n   *\n   * @access private\n   * @function getBody\n   * @returns {HTMLElement|SVGElement} Returns the real body of a document, or an\n   * artificially created element that stands in for the body\n   */\n\n  function getBody() {\n    // After page load injecting a fake body doesn't work so check if body exists\n    var body = document.body;\n\n    if (!body) {\n      // Can't use the real body create a fake one.\n      body = createElement(isSVG ? 'svg' : 'body');\n      body.fake = true;\n    }\n\n    return body;\n  }\n\n  ;\n\n  /**\n   * injectElementWithStyles injects an element with style element and some CSS rules\n   *\n   * @access private\n   * @function injectElementWithStyles\n   * @param {string} rule - String representing a css rule\n   * @param {function} callback - A function that is used to test the injected element\n   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n   * @returns {boolean}\n   */\n\n  function injectElementWithStyles(rule, callback, nodes, testnames) {\n    var mod = 'modernizr';\n    var style;\n    var ret;\n    var node;\n    var docOverflow;\n    var div = createElement('div');\n    var body = getBody();\n\n    if (parseInt(nodes, 10)) {\n      // In order not to give false positives we create a node for each test\n      // This also allows the method to scale for unspecified uses\n      while (nodes--) {\n        node = createElement('div');\n        node.id = testnames ? testnames[nodes] : mod + (nodes + 1);\n        div.appendChild(node);\n      }\n    }\n\n    style = createElement('style');\n    style.type = 'text/css';\n    style.id = 's' + mod;\n\n    // IE6 will false positive on some tests due to the style element inside the test div somehow interfering offsetHeight, so insert it into body or fakebody.\n    // Opera will act all quirky when injecting elements in documentElement when page is served as xml, needs fakebody too. #270\n    (!body.fake ? div : body).appendChild(style);\n    body.appendChild(div);\n\n    if (style.styleSheet) {\n      style.styleSheet.cssText = rule;\n    } else {\n      style.appendChild(document.createTextNode(rule));\n    }\n    div.id = mod;\n\n    if (body.fake) {\n      //avoid crashing IE8, if background image is used\n      body.style.background = '';\n      //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n      body.style.overflow = 'hidden';\n      docOverflow = docElement.style.overflow;\n      docElement.style.overflow = 'hidden';\n      docElement.appendChild(body);\n    }\n\n    ret = callback(div, rule);\n    // If this is done after page load we don't want to remove the body so check if body exists\n    if (body.fake) {\n      body.parentNode.removeChild(body);\n      docElement.style.overflow = docOverflow;\n      // Trigger layout so kinetic scrolling isn't disabled in iOS6+\n      docElement.offsetHeight;\n    } else {\n      div.parentNode.removeChild(div);\n    }\n\n    return !!ret;\n\n  }\n\n  ;\n\n  /**\n   * testStyles injects an element with style element and some CSS rules\n   *\n   * @memberof Modernizr\n   * @name Modernizr.testStyles\n   * @optionName Modernizr.testStyles()\n   * @optionProp testStyles\n   * @access public\n   * @function testStyles\n   * @param {string} rule - String representing a css rule\n   * @param {function} callback - A function that is used to test the injected element\n   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n   * @returns {boolean}\n   * @example\n   *\n   * `Modernizr.testStyles` takes a CSS rule and injects it onto the current page\n   * along with (possibly multiple) DOM elements. This lets you check for features\n   * that can not be detected by simply checking the [IDL](https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Interface_development_guide/IDL_interface_rules).\n   *\n   * ```js\n   * Modernizr.testStyles('#modernizr { width: 9px; color: papayawhip; }', function(elem, rule) {\n   *   // elem is the first DOM node in the page (by default #modernizr)\n   *   // rule is the first argument you supplied - the CSS rule in string form\n   *\n   *   addTest('widthworks', elem.style.width === '9px')\n   * });\n   * ```\n   *\n   * If your test requires multiple nodes, you can include a third argument\n   * indicating how many additional div elements to include on the page. The\n   * additional nodes are injected as children of the `elem` that is returned as\n   * the first argument to the callback.\n   *\n   * ```js\n   * Modernizr.testStyles('#modernizr {width: 1px}; #modernizr2 {width: 2px}', function(elem) {\n   *   document.getElementById('modernizr').style.width === '1px'; // true\n   *   document.getElementById('modernizr2').style.width === '2px'; // true\n   *   elem.firstChild === document.getElementById('modernizr2'); // true\n   * }, 1);\n   * ```\n   *\n   * By default, all of the additional elements have an ID of `modernizr[n]`, where\n   * `n` is its index (e.g. the first additional, second overall is `#modernizr2`,\n   * the second additional is `#modernizr3`, etc.).\n   * If you want to have more meaningful IDs for your function, you can provide\n   * them as the fourth argument, as an array of strings\n   *\n   * ```js\n   * Modernizr.testStyles('#foo {width: 10px}; #bar {height: 20px}', function(elem) {\n   *   elem.firstChild === document.getElementById('foo'); // true\n   *   elem.lastChild === document.getElementById('bar'); // true\n   * }, 2, ['foo', 'bar']);\n   * ```\n   *\n   */\n\n  var testStyles = ModernizrProto.testStyles = injectElementWithStyles;\n  \n/*!\n{\n  \"name\": \"Touch Events\",\n  \"property\": \"touchevents\",\n  \"caniuse\" : \"touch\",\n  \"tags\": [\"media\", \"attribute\"],\n  \"notes\": [{\n    \"name\": \"Touch Events spec\",\n    \"href\": \"https://www.w3.org/TR/2013/WD-touch-events-20130124/\"\n  }],\n  \"warnings\": [\n    \"Indicates if the browser supports the Touch Events spec, and does not necessarily reflect a touchscreen device\"\n  ],\n  \"knownBugs\": [\n    \"False-positive on some configurations of Nokia N900\",\n    \"False-positive on some BlackBerry 6.0 builds  https://github.com/Modernizr/Modernizr/issues/372#issuecomment-3112695\"\n  ]\n}\n!*/\n/* DOC\nIndicates if the browser supports the W3C Touch Events API.\n\nThis *does not* necessarily reflect a touchscreen device:\n\n* Older touchscreen devices only emulate mouse events\n* Modern IE touch devices implement the Pointer Events API instead: use `Modernizr.pointerevents` to detect support for that\n* Some browsers & OS setups may enable touch APIs when no touchscreen is connected\n* Future browsers may implement other event models for touch interactions\n\nSee this article: [You Can't Detect A Touchscreen](http://www.stucox.com/blog/you-cant-detect-a-touchscreen/).\n\nIt's recommended to bind both mouse and touch/pointer events simultaneously  see [this HTML5 Rocks tutorial](http://www.html5rocks.com/en/mobile/touchandmouse/).\n\nThis test will also return `true` for Firefox 4 Multitouch support.\n*/\n\n  // Chrome (desktop) used to lie about its support on this, but that has since been rectified: http://crbug.com/36415\n  Modernizr.addTest('touchevents', function() {\n    var bool;\n    if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n      bool = true;\n    } else {\n      // include the 'heartz' as a way to have a non matching MQ to help terminate the join\n      // https://git.io/vznFH\n      var query = ['@media (', prefixes.join('touch-enabled),('), 'heartz', ')', '{#modernizr{top:9px;position:absolute}}'].join('');\n      testStyles(query, function(node) {\n        bool = node.offsetTop === 9;\n      });\n    }\n    return bool;\n  });\n\n/*!\n{\n  \"name\": \"CSS :target pseudo-class\",\n  \"caniuse\": \"css-sel3\",\n  \"property\": \"target\",\n  \"tags\": [\"css\"],\n  \"notes\": [{\n    \"name\": \"MDN documentation\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/:target\"\n  }],\n  \"authors\": [\"@zachleat\"],\n  \"warnings\": [\"Opera Mini supports :target but doesn't update the hash for anchor links.\"]\n}\n!*/\n/* DOC\nDetects support for the ':target' CSS pseudo-class.\n*/\n\n  // querySelector\n  Modernizr.addTest('target', function() {\n    var doc = window.document;\n    if (!('querySelectorAll' in doc)) {\n      return false;\n    }\n\n    try {\n      doc.querySelectorAll(':target');\n      return true;\n    } catch (e) {\n      return false;\n    }\n  });\n\n\n  // Run each test\n  testRunner();\n\n  // Remove the \"no-js\" class if it exists\n  setClasses(classes);\n\n  delete ModernizrProto.addTest;\n  delete ModernizrProto.addAsyncTest;\n\n  // Run the things that are supposed to run after the tests\n  for (var i = 0; i < Modernizr._q.length; i++) {\n    Modernizr._q[i]();\n  }\n\n  // Leak Modernizr namespace\n  window.Modernizr = Modernizr;\n\n\n;\n\n})(window, document);\n(function() {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .service('story', story);\n\n  /** @ngInject */\n  function story($resource) {\n\n    var storyApi = $resource(\n      '/api/story/:id',\n      {},\n      {\n        save: {\n          method: 'POST'\n        }\n      }\n    );\n\n    return {\n      getStoryById: function (id) {\n        return storyApi.get({id:id}).$promise;\n      },\n      getAll:  function () {\n        return storyApi.query().$promise;\n      },\n      save: function (storyData) {\n        var newStory = new storyApi(storyData);\n        return newStory.$save();\n      }\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .service('page', page);\n\n  /** @ngInject */\n  function page($resource) {\n\n    var pageApi = $resource(\n      '/api/page/:id',\n      {},\n      {\n        save: {\n          method: 'POST'\n        }\n      }\n    );\n\n    return {\n      getPageById: function (id) {\n        return pageApi.get({id:id}).$promise;\n      },\n      getAll:  function () {\n        return pageApi.query().$promise;\n      }\n    };\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .service('$media', $media)\n    .factory('Media', Media);\n\n  /** @ngInject */\n  function $media(Media, $rootScope, $window) {\n    var shortcuts = {\n      'tablet': '(min-width: 768px)',\n      'screen-xs': '(max-width:767px)',\n      'screen-sm': '(min-width:768px) and (max-width:991px)',\n      'screen-md': '(min-width:992px) and (max-width:1199px)',\n      'screen-ld': '(min-width:1200px)'\n    };\n\n    return {\n      query: function (shortcut) {\n        return this.raw(shortcuts[shortcut]);\n      },\n      raw: function (raw_query) {\n        Media.value = $window.matchMedia(raw_query).matches;\n        $window.onresize = function () {\n          Media.value = $window.matchMedia(raw_query).matches;\n          $rootScope.$apply();\n        };\n        return Media.value;\n      }\n    }\n  }\n\n\n  function Media() {\n    return {};\n  }\n\n})();\n\n/**\n * @ngdoc service\n * @name lhr70:mapCardFactory\n *\n * @description\n *\n *\n * */\nangular.module('lhr70')\n    .factory('mapCards', function(){\n\n    var Service = {};\n      Service.createCard = function (type, data) {\n        var type_mapping = {\n          gift: 'gft',\n          feature_gift: 'gftLg',\n          gift_small: 'gftSm',\n          gift_hero: 'gftHero',\n          story_cta: 'cta',\n          gift_cta: 'gftCta',\n          image: 'sm',\n          featured: 'lg',\n          quote: 'qt',\n          snippet: 'sn'\n        };\n\n        if (typeof(data) != 'undefined') {\n          data.className = type_mapping[type];\n          if (data.image !== null && (type == \"image\" || type == \"featured\")) {\n            data.background = {'background-image': 'url(' + data.image + ')'};\n          }\n        } else {\n          data = {className: type_mapping[type]};\n        }\n\n        return data\n      };\n\n    return Service;\n});\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .service('homepage', homepage);\n\n  /** @ngInject */\n  function homepage($resource, mapCards, $q) {\n\n    var api = $resource('/api/home/');\n\n    return {\n      getData: function () {\n        return api.query().$promise;\n      },\n      createHomepage: function () {\n        var deferred = $q.defer();\n\n        this.getData().then(function (data) {\n          var cards = [];\n\n          for (var i = 0; i < data.length; i++) {\n            var item = data[i];\n            cards.push(mapCards.createCard(item.display_as, item));\n            if (i > 4) {\n              if (i % 3 == 0) {\n                if (i % 2 == 0)\n                  cards.push(mapCards.createCard('gift_cta'));\n                else {\n                  cards.push(mapCards.createCard('story_cta'));\n                }\n              }\n            }\n          }\n          deferred.resolve(cards);\n        });\n\n        return deferred.promise;\n      }\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .service('gift', gift);\n\n  /** @ngInject */\n  function gift($resource, $q, mapCards) {\n\n    var api = $resource('/api/gift/:id');\n\n    return {\n      getGiftById: function (id) {\n        return api.get({id:id}).$promise;\n      },\n      getAll:  function () {\n        return api.query().$promise;\n      },\n      createGiftsPage: function () {\n        var deferred = $q.defer();\n\n        this.getAll().then(function (data) {\n          var cards = [];\n\n          for (var i = 0; i < data.length; i++) {\n            var item = data[i];\n            if (item.importance == 1) {\n              cards.push(mapCards.createCard(\"gift_hero\", item));\n            } else {\n              cards.push(mapCards.createCard(\"gift_small\", item));\n            }\n          }\n\n          deferred.resolve(cards);\n        });\n\n        return deferred.promise;\n      }\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .filter('newline', function($sce) {\n\n      return function(text) {\n\n        text = text.replace(/\\n/g, '<br />');\n        return $sce.trustAsHtml(text);\n\n      }\n\n    })\n    .filter('listify', function($sce) {\n\n      return function(text) {\n\n        if ( !text ) return;\n\n        var list = text.split(\"\\n\");\n\n        text = \"<ul>\";\n\n        for (var i = 0; i < list.length; i++) {\n          text += \"<li>\" + list[i] + \"</li>\";\n        }\n\n        text += \"</ul>\"\n\n        return $sce.trustAsHtml(text);\n\n      }\n    });\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($rootScope, $media) {\n    $rootScope.$media = $media;\n    $rootScope.hasBackground = false;\n    $rootScope.customContainer = false;\n    $rootScope.isOldIE = isOldIE;\n\n    $rootScope.setTitle = function (appendTitle) {\n      $rootScope.title = \"Heathrow 70 | \" + appendTitle;\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider, $locationProvider) {\n\n    $urlRouterProvider.rule(function ($injector, $location) {\n\n      var path = $location.path();\n      var hasTrailingSlash = path[path.length - 1] === '/';\n\n      if (hasTrailingSlash) {\n\n        //if last character is a slash, return the same url without the slash\n        var newPath = path.substr(0, path.length - 1);\n        return newPath;\n      }\n\n    });\n\n    if (!isOldIE) {\n      $locationProvider.html5Mode(true);\n    } else {\n      $locationProvider.html5Mode(false);\n    }\n\n    $stateProvider\n      .state('home', {\n        url: '/home',\n        templateUrl: 'app/pages/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      })\n      .state('storySubmit', {\n        url: '/story/submit',\n        templateUrl: 'app/pages/submitStory/submitStory.html',\n        controller: 'SubmitStoryController',\n        controllerAs: 'scope'\n      })\n      .state('story', {\n        url: '/story/:slug',\n        templateUrl: 'app/pages/story/story.html',\n        controller: 'StoryController',\n        controllerAs: 'scope'\n      })\n      .state('gifts', {\n        url: '/gifts',\n        templateUrl: 'app/pages/gifts/gifts.html',\n        controller: 'GiftsController',\n        controllerAs: 'scope'\n      })\n      .state('gift', {\n        url: '/gift/:slug',\n        templateUrl: 'app/pages/gift/gift.html',\n        controller: 'GiftController',\n        controllerAs: 'scope'\n      })\n      .state('page', {\n        url: '/page/:slug',\n        templateUrl: 'app/pages/static/static.html',\n        controller: 'StaticController',\n        controllerAs: 'scope'\n      }).state('404', {\n      url: '/not-found',\n      templateUrl: 'app/components/messageBox/messageBox.html',\n      controller: function ($rootScope) {\n        $rootScope.hasBackground = true;\n        var vm = this;\n        vm.message = {\n          title: \"404\",\n          subTitle: \"Error\",\n          content: [\"Sorry. the page you are looking for cannot be found.\u0003\",\n          \"Why not <a class='success-link' href='/'>read some of our stories </a> form the last 70 years instead.\"]\n        };\n      },\n      controllerAs: 'scope'\n    });\n\n    $urlRouterProvider.otherwise(function ($injector, $location) {\n      if ($location.url() == \"/\" || $location.url() == \"\") {\n        $location.path('/home');\n      } else {\n        $location.path('/not-found');\n      }\n    });\n  }\n})();\n\n/* global malarkey:false, moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .constant('malarkey', malarkey)\n    .constant('moment', moment);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('lhr70')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, toastrConfig, $httpProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    // Set options third-party lib\n    toastrConfig.allowHtml = true;\n    toastrConfig.timeOut = 3000;\n    toastrConfig.positionClass = 'toast-top-right';\n    toastrConfig.preventDuplicates = true;\n    toastrConfig.progressBar = true;\n\n    //service cannot be injected into a config or something\n    var $cookies;\n    angular.injector(['ngCookies']).invoke(['$cookies', function(_$cookies_) {\n      $cookies = _$cookies_;\n    }]);\n\n    // CSFR token for Django\n    $httpProvider.defaults.headers.post  = {\n      'X-CSRFToken': $cookies.get('csrftoken'),\n      'Content-Type': 'application/json'\n    };\n  }\n\n})();\n\nangular.module(\"lhr70\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/components/cardCta/cta.directive.html\",\"<a class=cta-content ng-href={{vm.href}} title={{vm.title}}><div class=cta-inner><div class=cta-icon ng-class=\\\"{\\'cta-icon--story\\': vm.type == \\'cta\\', \\'cta-icon--gift\\': vm.type == \\'gftCta\\'}\\\"></div><div class=text-bold>{{vm.title}}</div><div class=text-light ng-if=vm.copy>{{vm.copy}}</div></div></a>\");\n$templateCache.put(\"app/components/cardGift/gift.directive.html\",\"<div class=gift-info><div class=logo><img class=logo--image ng-src=\\\"{{vm.isGiftsPage ? vm.gift.logo_full : vm.gift.logo_module}}\\\" alt=\\\"{{ vm.gift.merchant }}\\\"></div><div class=gift-featured><img class=gift-featured--image image-cropper source=vm.gift.image type=vm.gift.className alt={{vm.gift.title}}></div></div><div class=gift-text><div class=gift-cta>ADD YOUR STORY FOR A CHANCE TO RECEIVE</div><div class=gift-content>{{vm.gift.title}}</div></div><!--<div class=\\\"filler\\\"></div>-->\");\n$templateCache.put(\"app/components/cardQuote/quote.directive.html\",\"<div class=quote ng-class=\\\"{\\'is-block\\': vm.block}\\\"><div class=quote--copy><div class=quote-marks></div><div class=quote-text><div class=\\\"lg-text text-capitalize\\\">{{ vm.story.short_details ? vm.story.short_details : vm.story.pull_quote }}</div></div></div></div>\");\n$templateCache.put(\"app/components/cardGiftHero/giftHero.directive.html\",\"<div class=gift-info><img class=logo ng-src={{vm.gift.logo_full}} alt={{vm.gift.title}}></div><div class=gift-text><div class=gift-cta>ADD YOUR STORY FOR A CHANCE TO RECEIVE</div><div class=gift-content>{{vm.gift.title}}</div></div><img class=gift-image image-cropper source=vm.gift.image type=vm.gift.className alt={{vm.gift.title}}> <!--<div class=\\\"filler\\\"></div>-->\");\n$templateCache.put(\"app/components/cardSnippet/snippet.directive.html\",\"<div class=snippet><div class=snippet--copy><div class=\\\"lg-text text-capitalize\\\">{{ vm.story.short_details }}</div></div></div>\");\n$templateCache.put(\"app/components/cardStory/story.directive.html\",\"<div class=content><div class=story--copy><div class=story--from>LHR <span class=icon-plane--grey></span></div><div class=lhr-gradient-text-lg>{{ vm.story.title }}</div></div></div><!--<div class=\\\"filler\\\"></div>-->\");\n$templateCache.put(\"app/components/cards/cards.directive.html\",\"<div ng-if=vm.cards masonary-grid card-parallax class=jig-grid><div ng-repeat=\\\"card in vm.cards track by $index\\\" class=card ng-class=card.className ng-style=card.background><a ng-href={{getUrl(card)}} ng-if=\\\"isStory(card) && card.className!==\\'cta\\' && card.className!==\\'gftCta\\'\\\"><quote-block story=card ng-if=\\\"card.className==\\'qt\\'\\\" block=true></quote-block><snippet-block story=card ng-if=\\\"card.className==\\'sn\\'\\\"></snippet-block><story-block story=card ng-if=\\\"card.className==\\'sm\\' || card.className==\\'lg\\' \\\"></story-block></a><a ng-href={{getUrl(card)}} ng-if=isGift(card)><gift-block gift=card></gift-block></a><cta-block type=card.className href=\\\"card.className==\\'cta\\'?\\'/story/submit\\':\\'/gifts\\'\\\" title=\\\"card.className==\\'cta\\'?\\'add your story\\':\\'explore all gifts\\'\\\" copy=\\\"card.className==\\'cta\\'?\\'to receive a birthday gift\\':\\'\\'\\\" ng-if=\\\"card.className==\\'cta\\' || card.className==\\'gftCta\\'\\\"></cta-block></div></div>\");\n$templateCache.put(\"app/components/carousel/carousel.directive.html\",\"<div class=carousel><div class=carousel-inner><img ng-repeat=\\\"(key, value) in images\\\" ng-src={{images[key]}} on-finish-render=ngRepeatFinished></div><nav class=carousel-navigation><button class=carousel-prev ng-class=\\\"{\\'is-not-active\\': isFirstElement()}\\\"></button> <button class=carousel-next ng-class=\\\"{\\'is-not-active\\': isLastElement()}\\\"></button><div class=carousel-pageinfo-wrapper><div class=carousel-pageinfo><span class=carousel-current>{{currentSlide + 1}}</span><span class=carousel-divider>/</span><span class=carousel-max>{{images.length}}</span></div></div></nav></div>\");\n$templateCache.put(\"app/components/footer/footer.directive.html\",\"<footer class=\\\"footer container\\\"><div class=footer-content><div class=footer-ctas><div><a href=/page/how-it-works>How it works</a></div><div><a href=http://www.heathrow.com/more/help-with-this-website/privacy-notice target=_blank>Privacy policy</a></div><div><a href=/page/terms>Terms &amp; Conditions</a></div></div><a href=http://www.heathrow.com/ target=_blank><img class=footer-logo src=/static/assets/images/heathrow_footer_logo.svg alt=\\\"Heathrow Logo\\\"></a></div></footer>\");\n$templateCache.put(\"app/components/giftContent/giftContent.directive.html\",\"<div class=giftdetail-wrapper><div class=giftdetail-title-wrapper><div class=journey-from ng-if=vm.gift.heathrow_origin>LHR<div class=icon-plane></div></div><h1 class=giftdetail-title><span class=giftdetail-title-sub>ADD YOUR STORY FOR A CHANCE TO RECEIVE</span> <span class=giftdetail-title-copy>{{vm.gift.title}}</span></h1></div><div class=giftdetail-inner><share element=vm.gift></share><div class=giftdetail-content><section class=giftdetail-details-wrapper><section class=giftdetail-details><p class=giftdetail-paragraph ng-bind-html=vm.gift.description></p></section><section class=giftdetail-carousel ng-if=\\\"vm.gift.additional_images.length > 1\\\"><carousel images=vm.gift.additional_images></carousel></section><section class=giftdetail-image ng-if=\\\"vm.gift.additional_images.length === 1\\\"><img ng-src={{vm.gift.additional_images[0]}}></section><h2 class=giftdetail-subtitle ng-if=vm.gift.included>This gift includes</h2><section class=giftdetail-included ng-if=vm.gift.included ng-bind-html=vm.gift.included></section><h2 class=giftdetail-subtitle>Terms &amp; Conditions</h2><section class=giftdetail-terms ng-if=vm.gift.terms><p ng-bind-html=vm.gift.terms></p></section></section></div></div></div>\");\n$templateCache.put(\"app/components/giftHeader/giftHeader.directive.html\",\"<div class=gift-header><div class=gift-header-logo><img ng-src={{logo}}></div><div class=gift-header-image><img image-cropper source=image type=\\\"\\'header-image\\'\\\" ng-src={{image}}></div></div>\");\n$templateCache.put(\"app/components/gifts/gifts.directive.html\",\"<div ng-if=vm.cards masonary-grid card-parallax class=\\\"jig-grid page-gifts\\\"><div ng-repeat=\\\"card in vm.cards track by $index\\\" class=card ng-class=card.className ng-style=card.background><a href=/gift/{{card.slug}}><gift-hero-block ng-if=\\\"card.className == \\'gftHero\\'\\\" gift=card></gift-hero-block><gift-block ng-if=\\\"card.className != \\'gftHero\\'\\\" gift=card cardlocation=gifts-page></gift-block></a></div></div>\");\n$templateCache.put(\"app/components/herobox/herobox.html\",\"<div class=logo-box><a href=/ ><img src=/static/assets/images/heath70_logo-main_@x2.png alt=\\\"70th anniversary logo\\\"></a></div><div class=hero-box ng-class=\\\"{\\'has-content\\': hero.text.content}\\\" ng-style=\\\"{width: hero.width}\\\"><div class=hero-box--text><div class=\\\"hero-box--text-md hero-box--subtitle-top\\\" ng-style=hero.subTitleStyle>{{hero.subTitle.top}}</div><!--<div class=\\\"hero-box&#45;&#45;text-sm\\\" ng-repeat=\\\"line in hero.text.beforeHero\\\">{{line}}</div>--><h1 class=hero-box--text-lg ng-class=\\\"{\\'hero-box--text-lg--has-sub-title\\': hero.subTitle}\\\" ng-style=\\\"{\\'font-size\\': hero.fontSize}\\\">{{hero.title}}</h1><div class=\\\"hero-box--text-md hero-box--subtitle-bottom\\\">{{hero.subTitle.bottom}}</div><!--<div class=\\\"hero-box&#45;&#45;text-sm\\\" ng-repeat=\\\"line in hero.text.afterHero\\\">{{line}}</div>--></div></div><div class=\\\"success-box--text hero-box--content\\\" ng-repeat=\\\"line in hero.text.content\\\">{{line}}</div><div class=\\\"success-box--text hero-box--content\\\" ng-show=hero.hasCta><a href=/story/submit class=hero-box--cta><div class=hero-cta>Add your story<div class=icon-circle-border><div class=icon-plane-takeoff--white></div></div></div></a></div>\");\n$templateCache.put(\"app/components/menu/menu.html\",\"<nav class=menu ng-class=\\\"{\\'is-active\\': active}\\\"><label class=menu-icon for=hamburger ng-click=toggleMenu()><span></span><div class=menu-text>Menu</div></label><div class=menu-content id=menu position=right><a href=/ ng-class=\\\"{\\'active\\': isHomePage}\\\" ng-click=closeMenu()>Read the Stories</a> <a href=/gifts ng-class=\\\"{\\'active\\': isGiftsPage}\\\" ng-click=closeMenu()>See all Gifts</a><div class=menu-bottom><a href=/page/how-it-works ng-class=\\\"{\\'active\\': isHowItWorksPage}\\\" ng-click=closeMenu()>How it works</a> <a href=http://www.heathrow.com/more/help-with-this-website/privacy-notice target=_blank ng-click=closeMenu()>Privacy policy</a> <a href=/page/terms ng-class=\\\"{\\'active\\': isTOC}\\\" ng-click=closeMenu()>Terms &amp; Conditions</a></div></div></nav>\");\n$templateCache.put(\"app/components/messageBox/messageBox.html\",\"<div class=logo-box><img src=/static/assets/images/heath70_logo-main_@x2.png alt=\\\"70th anniversary logo\\\"></div><div class=\\\"hero-box has-content\\\"><div class=hero-box--text><div class=success-box--text-md ng-bind-html=scope.message.subTitle></div><h1 class=success-box--text-lg ng-bind-html=scope.message.title></h1></div></div><div class=\\\"success-box--text hero-box--content\\\" ng-repeat=\\\"line in scope.message.content\\\"><ng-bind-html ng-bind-html=line></ng-bind-html></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<menu></menu><nav class=navbar><div class=lhs><a class=nav--logo href=/ >Heathrow 70\\'th Anniversary</a><div class=nav--story-info ng-if=isStoryPage><div class=nav--story-primary><span class=nav--story-from>LHR</span> <span class=icon-plane--white></span> <span class=nav--story-title>{{storyInfo.title}}</span></div><div class=nav--story-secondary><span class=nav--story-author ng-if=storyInfo.person_name>{{storyInfo.person_name}}</span> {{storyInfo.date}}</div></div></div><div class=rhs><a class=\\\"btn btn--hero\\\" href=/story/submit>Add your story<span class=icon-plane--departure></span></a></div></nav>\");\n$templateCache.put(\"app/components/pageContent/pageContent.directive.html\",\"<div class=static-wrapper><div class=static-title-wrapper><h1 class=static-title>{{vm.page.title}}</h1></div><div class=static-inner><div class=static-content><section class=static-details-wrapper><section class=static-details ng-bind-html=getSafeContent(vm.page.content)></section></section></div></div></div>\");\n$templateCache.put(\"app/components/share/share.directive.html\",\"<div class=story-share-wrapper><div class=story-share-container><div class=story-share-inner ng-click=openShare()><button class=story-share-btn><span class=story-share-copy>SHARE</span></button><div class=story-share-content><a ng-href={{getFacebookUrl()}} ng-click=openInNewWindow($event) target=_blank class=\\\"story-share-link story-share-link--facebook\\\">Facebook</a> <a ng-href={{getTwitterUrl()}} ng-click=openInNewWindow($event) target=_blank class=\\\"story-share-link story-share-link--twitter\\\">Twitter</a> <a ng-href={{getEmailContent()}} class=\\\"story-share-link story-share-link--email\\\">Email</a></div></div></div></div>\");\n$templateCache.put(\"app/components/storyContent/storyContent.directive.html\",\"<div class=story-wrapper><div class=story-title-wrapper><div class=journey-from>LHR<div class=icon-plane--grey></div></div><h1 class=story-title>{{vm.story.title}}</h1></div><div class=story-inner><share element=vm.story></share><div class=story-content><section class=story-details-wrapper><section class=story-details><p class=story-paragraph ng-if=hasField(vm.story.soundcloud_id)><iframe width=100% height=166 scrolling=no frameborder=no ng-src={{getSoundcloudUrl(vm.story.soundcloud_id)}}></iframe></p><div class=story-paragraph ng-if=hasCopy(vm.story.details) ng-bind-html=getSafeHtml(getFirstParagraph(vm.story.details))></div><div class=\\\"qt story-quote\\\" ng-if=vm.story.pull_quote><quote-block story=vm.story></quote-block></div><div class=story-paragraph ng-repeat=\\\"paragraph in getOtherParagraphs(vm.story.details) track by $index\\\" ng-bind-html=getSafeHtml(paragraph)></div></section><div class=story-author><span class=story-name>{{vm.story.person_name}}</span> <span class=story-year>{{vm.story.trip_year}}</span></div></section></div></div></div>\");\n$templateCache.put(\"app/components/storyHeader/storyHeader.directive.html\",\"<div class=story-header ng-class=\\\"{\\'is-playing-video\\': videoActive}\\\" ng-if=vm.story.image><div class=story-hero-image ng-style=getBackground(vm.story.image) ng-if=vm.story.image><div class=container ng-if=hasVideo()><button class=\\\"story-hero-play-btn btn\\\" ng-click=playVideo()><i class=story-hero-play-icon></i><span class=story-hero-play-copy>play video</span></button></div></div><div class=story-video-wrapper ng-class=\\\"{\\'is-playing\\': videoActive}\\\"><button class=story-video-close-btn ng-click=closeVideo()></button><div class=story-video-spacer><div class=story-video><div id=player></div></div></div></div></div>\");\n$templateCache.put(\"app/pages/gift/gift.html\",\"<div class=gift><gift-header image=scope.gift.image logo=scope.gift.logo_full></gift-header><div class=container><gift-content gift=scope.gift></gift-content></div><div class=\\\"cta right\\\"><cta-block type=\\\"\\'cta\\'\\\" href=\\\"\\'/story/submit\\'\\\" title=\\\"\\'TELL US YOUR STORY\\'\\\" copy=\\\"\\'FOR A CHANCE TO RECEIVE THIS BIRTHDAY GIFT\\'\\\"></cta-block></div></div>\");\n$templateCache.put(\"app/pages/gifts/gifts.html\",\"<div class=\\\"container gifts\\\"><ng-include src=\\\"\\'app/components/herobox/herobox.html\\'\\\"></ng-include><gifts-block ng-if=scope.cards cards=scope.cards></gifts-block><div class=\\\"cta right\\\"><cta-block type=\\\"\\'cta\\'\\\" href=\\\"\\'/story/submit\\'\\\" title=\\\"\\'tell us your story\\'\\\" copy=\\\"\\'for a chance to receive one of these birthday gifts\\'\\\"></cta-block></div></div>\");\n$templateCache.put(\"app/pages/main/main.html\",\"<div class=homepage><div class=container><ng-include src=\\\"\\'app/components/herobox/herobox.html\\'\\\"></ng-include><cards-block ng-if=main.cards cards=main.cards></cards-block></div></div>\");\n$templateCache.put(\"app/pages/static/static.html\",\"<div class=static><div class=container><page-content page=scope.page></page-content></div></div>\");\n$templateCache.put(\"app/pages/story/story.html\",\"<div class=story><story-header story=scope.story></story-header><div class=container><story-content story=scope.story></story-content></div><div class=\\\"cta right\\\"><cta-block type=\\\"\\'cta\\'\\\" href=\\\"\\'/story/submit\\'\\\" title=\\\"\\'ADD YOUR STORY\\'\\\" copy=\\\"\\'TO RECEIVE A BIRTHDAY GIFT\\'\\\"></cta-block></div></div>\");\n$templateCache.put(\"app/pages/submitStory/submitStory.html\",\"<div class=container--custom><div class=forms ng-hide=scope.isSubmitted><ng-include src=\\\"\\'app/components/herobox/herobox.html\\'\\\"></ng-include><form role=form name=form id=contact-form class=form-journey-info novalidate><div class=form-group><div class=question-number><div ng-if=\\\"scope.story.heathrow_origin === null\\\">1</div><div ng-if=\\\"scope.story.heathrow_origin !== null\\\"><div class=icon-tick-purple></div></div></div><label for=destination class=form-helper-text>To start with, were you flying from or to Heathrow?</label><div class=switch><div class=option ng-class=\\\"{\\'active\\':scope.story.heathrow_origin !== null && scope.story.heathrow_origin === true}\\\" ng-click=\\\"scope.story.heathrow_origin = true\\\">From</div><div class=option ng-class=\\\"{\\'active\\':scope.story.heathrow_origin !== null && scope.story.heathrow_origin === false}\\\" ng-click=\\\"scope.story.heathrow_origin = false\\\">To</div></div></div><!--div.form-group>.question-number+label.form-helper-text--><div class=form-group ng-class=\\\"{\\'active\\': scope.story.destination}\\\"><div class=question-number><div ng-show=!scope.story.destination>2</div><div ng-show=scope.story.destination><div class=icon-tick-purple></div></div></div><label for=destination ng-class=\\\"{\\'to-fix\\': form.destination.$error.pattern}\\\"><div class=form-helper-text>Do you Remember where you were flying {{scope.story.heathrow_origin ? \\\"to\\\" : \\\"from\\\"}}?</div></label><input type=text class=form-control name=destination id=destination ng-pattern=\\\"/^[a-zA-Z0-9,.!\\'`()?\\\\s]*$/\\\" placeholder=\\\"eg LAX or Paris\\\" ng-model=scope.story.destination></div><div class=\\\"form-group form-group--lg\\\" ng-class=\\\"{\\'active\\': scope.story.details}\\\"><div class=question-number><div ng-if=!scope.story.details>3</div><div ng-if=scope.story.details><div class=icon-tick-purple></div></div></div><label for=details class=required ng-class=\\\"{\\'to-fix\\': (form.details.$error.required && form.details.$dirty) || form.details.$error.pattern}\\\"><div class=form-helper-text>What was meaningful about this trip?</div></label><textarea class=form-control name=details id=details maxlength=3500 ng-pattern=\\\"/^[a-zA-Z0-9,.!\\'`()?\\\\s]*$/\\\" placeholder=\\\"{{(form.details.$error.required && form.details.$dirty) ? \\'Please tell us your story\\' : \\'TELL US YOUR STORY (500 words max)\\'}}\\\" ng-model=scope.story.details required></textarea></div><div class=form-group><div class=question-number><div ng-if=\\\"!scope.trip_date.year && !scope.trip_date.month && !scope.trip_date.date\\\">4</div><div ng-if=\\\"scope.trip_date.year || scope.trip_date.month || scope.trip_date.date\\\"><div class=icon-tick-purple></div></div></div><label for=year class=form-helper-text>Do you remember the date?</label><div class=select-row><div class=lhr-select ng-class=\\\"{\\'active\\': scope.trip_date.year}\\\"><select ng-model=scope.trip_date.year ng-options=\\\"year for year in scope.dateSelector.years() | orderBy: year:yearOrder\\\" class=form-control id=year><option value=\\\"\\\">Year</option></select></div><div class=lhr-select ng-class=\\\"{\\'active\\': scope.trip_date.month}\\\"><select ng-model=scope.trip_date.month ng-options=\\\"month for month in scope.dateSelector.months()\\\" class=form-control><option value=\\\"\\\">Month</option></select></div><div class=lhr-select ng-class=\\\"{\\'active\\': scope.trip_date.day}\\\"><select ng-model=scope.trip_date.day ng-options=\\\"day for day in scope.dateSelector.days()\\\" class=form-control><option value=\\\"\\\">Day</option></select></div></div></div><div class=form-group><div class=question-number><div ng-if=!scope.story.terminal>5</div><div ng-if=scope.story.terminal><div class=icon-tick-purple></div></div></div><label class=form-helper-text>What about the terminal?</label><div class=form-terminal-selector><div class=option ng-click=\\\"scope.story.terminal=\\'T1\\'\\\" ng-class=\\\"{\\'active\\': scope.story.terminal==\\'T1\\'}\\\">T1</div><div class=option ng-click=\\\"scope.story.terminal=\\'T2\\'\\\" ng-class=\\\"{\\'active\\': scope.story.terminal==\\'T2\\'}\\\">T2</div><div class=option ng-click=\\\"scope.story.terminal=\\'T3\\'\\\" ng-class=\\\"{\\'active\\': scope.story.terminal==\\'T3\\'}\\\">T3</div><div class=option ng-click=\\\"scope.story.terminal=\\'T4\\'\\\" ng-class=\\\"{\\'active\\': scope.story.terminal==\\'T4\\'}\\\">T4</div><div class=option ng-click=\\\"scope.story.terminal=\\'T5\\'\\\" ng-class=\\\"{\\'active\\': scope.story.terminal==\\'T5\\'}\\\">T5</div></div></div><div class=form-group><div class=question-number><div ng-if=!scope.isImageValid()>6</div><div ng-if=\\\"scope.image && scope.isImageValid()\\\"><div class=icon-tick-purple></div></div></div><label ng-class=\\\"{\\'to-fix\\': scope.image && !scope.isImageValid()}\\\"><div class=form-helper-text>Have you got an image?<br>Please share!</div></label><div class=image--add ng-class=\\\"{\\'to-fix\\': scope.image && !scope.isImageValid()}\\\" ng-show=!scope.isImage() ngf-select ng-model=scope.image accept=image/*><div class=icon-camera></div><div class=image--add-text ng-show=!scope.image>Upload an Image</div><div class=image--add-text ng-show=\\\"scope.image && !scope.isImageValid()\\\">Choose a valid file type</div><div class=image--add-text--small>(5MB max - JPG/PNG/GIF)</div></div><img class=image--added ng-show=scope.isImage() ng-src=\\\"{{scope.image|\\n             ngfDataUrl}}\\\" alt=image><div class=image--options ng-show=scope.isImage()><a class=\\\"image--option-btn success\\\" ngf-select ng-model=scope.image accept=image/*>Change Image</a> <a class=\\\"image--option-btn danger\\\" ng-click=\\\"scope.image = null\\\">Remove Image</a></div></div></form><form role=form name=form2 class=form-person-info novalidate><div class=form-group><label for=title class=required ng-class=\\\"{\\'to-fix\\': form2.title.$error.required && form2.title.$dirty}\\\"><div class=form-helper-text>Your Title</div></label><div class=lhr-select ng-class=\\\"{\\'to-fix\\': form2.title.$error.required && form2.title.$dirty}\\\"><select name=title id=title class=form-control required ng-model=scope.story.person.title><option value=\\\"\\\" disabled>{{(form2.title.$error.required && form2.title.$dirty) ? \\'Please choose a title\\' : \\'Choose\\'}}</option><option value=Mr>Mr</option><option value=Mrs>Mrs</option><option value=Ms selected>Ms</option><option value=Miss selected>Miss</option><option value=Dr selected>Dr</option><option value=Prof selected>Prof</option><option value=Rev selected>Rev</option></select></div></div><div class=form-group><label for=FirstName class=required ng-class=\\\"{\\'to-fix\\': form2.FirstName.$error.required && form2.FirstName.$dirty}\\\"><div class=form-helper-text>Your First name</div></label><input type=text class=form-control name=FirstName id=FirstName ng-model=scope.story.person.first_name placeholder=\\\"{{(form2.FirstName.$error.required && form2.FirstName.$dirty) ? \\'Please tell us your First name\\' : \\'\\'}}\\\" required></div><div class=form-group><label for=LastName class=required ng-class=\\\"{\\'to-fix\\': form2.LastName.$error.required && form2.LastName.$dirty}\\\"><div class=form-helper-text>Your Last Name</div></label><input type=text class=form-control name=LastName id=LastName ng-model=scope.story.person.last_name placeholder=\\\"{{(form2.LastName.$error.required && form2.LastName.$dirty) ? \\'Please tell us your Last name\\' : \\'\\'}}\\\" required></div><div class=form-group><label for=EmailAddress class=required ng-class=\\\"{\\'to-fix\\':( form2.EmailAddress.$error.required || form2.EmailAddress.$error.email)&& form2.EmailAddress.$dirty}\\\"><div class=form-helper-text>Your Email address</div></label><input type=email class=form-control id=EmailAddress name=EmailAddress ng-model=scope.story.person.email_address ng-model-options=\\\"{ updateOn: \\'blur\\' }\\\" placeholder=\\\"{{(form2.EmailAddress.$error.required && form2.EmailAddress.$dirty) ? \\'Please tell us your Email address\\' : \\'\\'}}\\\" required></div><div class=form-group><label for=rewardsNum class=form-helper-text>Your Heathrow rewards card number</label><input type=text class=form-control name=rewardsNum id=rewardsNum placeholder=\\\"(if you have one)\\\" ng-model=scope.story.person.rewards_number></div><div class=form-group><label for=country class=required ng-class=\\\"{\\'to-fix\\': form2.country.$error.required && form2.country.$dirty}\\\"><div class=form-helper-text>Your Country</div></label><div class=lhr-select><select class=form-control name=country id=country ng-model=scope.story.person.country required><option value=\\\"\\\" disabled>{{(form2.country.$error.required && form2.country.$dirty) ? \\'Please choose a Country\\' : \\'Choose\\'}}</option><option value=\\\"United Kingdom\\\">United Kingdom</option><option disabled value=\\\"\\\">-------------------</option><option value=Afghanistan>Afghanistan</option><option value=Albania>Albania</option><option value=Algeria>Algeria</option><option value=\\\"American Samoa\\\">American Samoa</option><option value=Andorra>Andorra</option><option value=Angola>Angola</option><option value=Anguilla>Anguilla</option><option value=Antartica>Antarctica</option><option value=\\\"Antigua and Barbuda\\\">Antigua and Barbuda</option><option value=Argentina>Argentina</option><option value=Armenia>Armenia</option><option value=Aruba>Aruba</option><option value=Australia>Australia</option><option value=Austria>Austria</option><option value=Azerbaijan>Azerbaijan</option><option value=Bahamas>Bahamas</option><option value=Bahrain>Bahrain</option><option value=Bangladesh>Bangladesh</option><option value=Barbados>Barbados</option><option value=Belarus>Belarus</option><option value=Belgium>Belgium</option><option value=Belize>Belize</option><option value=Benin>Benin</option><option value=Bermuda>Bermuda</option><option value=Bhutan>Bhutan</option><option value=Bolivia>Bolivia</option><option value=\\\"Bosnia and Herzegowina\\\">Bosnia and Herzegowina</option><option value=Botswana>Botswana</option><option value=\\\"Bouvet Island\\\">Bouvet Island</option><option value=Brazil>Brazil</option><option value=\\\"British Indian Ocean Territory\\\">British Indian Ocean Territory</option><option value=\\\"Brunei Darussalam\\\">Brunei Darussalam</option><option value=Bulgaria>Bulgaria</option><option value=\\\"Burkina Faso\\\">Burkina Faso</option><option value=Burundi>Burundi</option><option value=Cambodia>Cambodia</option><option value=Cameroon>Cameroon</option><option value=Canada>Canada</option><option value=\\\"Cape Verde\\\">Cape Verde</option><option value=\\\"Cayman Islands\\\">Cayman Islands</option><option value=\\\"Central African Republic\\\">Central African Republic</option><option value=Chad>Chad</option><option value=Chile>Chile</option><option value=China>China</option><option value=\\\"Christmas Island\\\">Christmas Island</option><option value=\\\"Cocos Islands\\\">Cocos (Keeling) Islands</option><option value=Colombia>Colombia</option><option value=Comoros>Comoros</option><option value=Congo>Congo</option><option value=Congo>Congo, the Democratic Republic of the</option><option value=\\\"Cook Islands\\\">Cook Islands</option><option value=\\\"Costa Rica\\\">Costa Rica</option><option value=\\\"Cota D\\'Ivoire\\\">Cote d\\'Ivoire</option><option value=Croatia>Croatia (Hrvatska)</option><option value=Cuba>Cuba</option><option value=Cyprus>Cyprus</option><option value=\\\"Czech Republic\\\">Czech Republic</option><option value=Denmark>Denmark</option><option value=Djibouti>Djibouti</option><option value=Dominica>Dominica</option><option value=\\\"Dominican Republic\\\">Dominican Republic</option><option value=\\\"East Timor\\\">East Timor</option><option value=Ecuador>Ecuador</option><option value=Egypt>Egypt</option><option value=\\\"El Salvador\\\">El Salvador</option><option value=\\\"Equatorial Guinea\\\">Equatorial Guinea</option><option value=Eritrea>Eritrea</option><option value=Estonia>Estonia</option><option value=Ethiopia>Ethiopia</option><option value=\\\"Falkland Islands\\\">Falkland Islands (Malvinas)</option><option value=\\\"Faroe Islands\\\">Faroe Islands</option><option value=Fiji>Fiji</option><option value=Finland>Finland</option><option value=France>France</option><option value=\\\"France Metropolitan\\\">France, Metropolitan</option><option value=\\\"French Guiana\\\">French Guiana</option><option value=\\\"French Polynesia\\\">French Polynesia</option><option value=\\\"French Southern Territories\\\">French Southern Territories</option><option value=Gabon>Gabon</option><option value=Gambia>Gambia</option><option value=Georgia>Georgia</option><option value=Germany>Germany</option><option value=Ghana>Ghana</option><option value=Gibraltar>Gibraltar</option><option value=Greece>Greece</option><option value=Greenland>Greenland</option><option value=Grenada>Grenada</option><option value=Guadeloupe>Guadeloupe</option><option value=Guam>Guam</option><option value=Guatemala>Guatemala</option><option value=Guinea>Guinea</option><option value=Guinea-Bissau>Guinea-Bissau</option><option value=Guyana>Guyana</option><option value=Haiti>Haiti</option><option value=\\\"Heard and McDonald Islands\\\">Heard and Mc Donald Islands</option><option value=\\\"Holy See\\\">Holy See (Vatican City State)</option><option value=Honduras>Honduras</option><option value=\\\"Hong Kong\\\">Hong Kong</option><option value=Hungary>Hungary</option><option value=Iceland>Iceland</option><option value=India>India</option><option value=Indonesia>Indonesia</option><option value=Iran>Iran (Islamic Republic of)</option><option value=Iraq>Iraq</option><option value=Ireland>Ireland</option><option value=Israel>Israel</option><option value=Italy>Italy</option><option value=Jamaica>Jamaica</option><option value=Japan>Japan</option><option value=Jordan>Jordan</option><option value=Kazakhstan>Kazakhstan</option><option value=Kenya>Kenya</option><option value=Kiribati>Kiribati</option><option value=\\\"Democratic People\\'s Republic of Korea\\\">Korea, Democratic People\\'s Republic of</option><option value=Korea>Korea, Republic of</option><option value=Kuwait>Kuwait</option><option value=Kyrgyzstan>Kyrgyzstan</option><option value=Lao>Lao People\\'s Democratic Republic</option><option value=Latvia>Latvia</option><option value=Lebanon selected>Lebanon</option><option value=Lesotho>Lesotho</option><option value=Liberia>Liberia</option><option value=\\\"Libyan Arab Jamahiriya\\\">Libyan Arab Jamahiriya</option><option value=Liechtenstein>Liechtenstein</option><option value=Lithuania>Lithuania</option><option value=Luxembourg>Luxembourg</option><option value=Macau>Macau</option><option value=Macedonia>Macedonia, The Former Yugoslav Republic of</option><option value=Madagascar>Madagascar</option><option value=Malawi>Malawi</option><option value=Malaysia>Malaysia</option><option value=Maldives>Maldives</option><option value=Mali>Mali</option><option value=Malta>Malta</option><option value=\\\"Marshall Islands\\\">Marshall Islands</option><option value=Martinique>Martinique</option><option value=Mauritania>Mauritania</option><option value=Mauritius>Mauritius</option><option value=Mayotte>Mayotte</option><option value=Mexico>Mexico</option><option value=Micronesia>Micronesia, Federated States of</option><option value=Moldova>Moldova, Republic of</option><option value=Monaco>Monaco</option><option value=Mongolia>Mongolia</option><option value=Montserrat>Montserrat</option><option value=Morocco>Morocco</option><option value=Mozambique>Mozambique</option><option value=Myanmar>Myanmar</option><option value=Namibia>Namibia</option><option value=Nauru>Nauru</option><option value=Nepal>Nepal</option><option value=Netherlands>Netherlands</option><option value=\\\"Netherlands Antilles\\\">Netherlands Antilles</option><option value=\\\"New Caledonia\\\">New Caledonia</option><option value=\\\"New Zealand\\\">New Zealand</option><option value=Nicaragua>Nicaragua</option><option value=Niger>Niger</option><option value=Nigeria>Nigeria</option><option value=Niue>Niue</option><option value=\\\"Norfolk Island\\\">Norfolk Island</option><option value=\\\"Northern Mariana Islands\\\">Northern Mariana Islands</option><option value=Norway>Norway</option><option value=Oman>Oman</option><option value=Pakistan>Pakistan</option><option value=Palau>Palau</option><option value=Panama>Panama</option><option value=\\\"Papua New Guinea\\\">Papua New Guinea</option><option value=Paraguay>Paraguay</option><option value=Peru>Peru</option><option value=Philippines>Philippines</option><option value=Pitcairn>Pitcairn</option><option value=Poland>Poland</option><option value=Portugal>Portugal</option><option value=\\\"Puerto Rico\\\">Puerto Rico</option><option value=Qatar>Qatar</option><option value=Reunion>Reunion</option><option value=Romania>Romania</option><option value=Russia>Russian Federation</option><option value=Rwanda>Rwanda</option><option value=\\\"Saint Kitts and Nevis\\\">Saint Kitts and Nevis</option><option value=\\\"Saint Lucia\\\">Saint Lucia</option><option value=\\\"Saint Vincent\\\">Saint Vincent and the Grenadines</option><option value=Samoa>Samoa</option><option value=\\\"San Marino\\\">San Marino</option><option value=\\\"Sao Tome and Principe\\\">Sao Tome and Principe</option><option value=\\\"Saudi Arabia\\\">Saudi Arabia</option><option value=Senegal>Senegal</option><option value=Seychelles>Seychelles</option><option value=Sierra>Sierra Leone</option><option value=Singapore>Singapore</option><option value=Slovakia>Slovakia (Slovak Republic)</option><option value=Slovenia>Slovenia</option><option value=\\\"Solomon Islands\\\">Solomon Islands</option><option value=Somalia>Somalia</option><option value=\\\"South Africa\\\">South Africa</option><option value=\\\"South Georgia\\\">South Georgia and the South Sandwich Islands</option><option value=Span>Spain</option><option value=SriLanka>Sri Lanka</option><option value=\\\"St. Helena\\\">St. Helena</option><option value=\\\"St. Pierre and Miguelon\\\">St. Pierre and Miquelon</option><option value=Sudan>Sudan</option><option value=Suriname>Suriname</option><option value=Svalbard>Svalbard and Jan Mayen Islands</option><option value=Swaziland>Swaziland</option><option value=Sweden>Sweden</option><option value=Switzerland>Switzerland</option><option value=Syria>Syrian Arab Republic</option><option value=Taiwan>Taiwan, Province of China</option><option value=Tajikistan>Tajikistan</option><option value=Tanzania>Tanzania, United Republic of</option><option value=Thailand>Thailand</option><option value=Togo>Togo</option><option value=Tokelau>Tokelau</option><option value=Tonga>Tonga</option><option value=\\\"Trinidad and Tobago\\\">Trinidad and Tobago</option><option value=Tunisia>Tunisia</option><option value=Turkey>Turkey</option><option value=Turkmenistan>Turkmenistan</option><option value=\\\"Turks and Caicos\\\">Turks and Caicos Islands</option><option value=Tuvalu>Tuvalu</option><option value=Uganda>Uganda</option><option value=Ukraine>Ukraine</option><option value=\\\"United Arab Emirates\\\">United Arab Emirates</option><option value=\\\"United Kingdom\\\">United Kingdom</option><option value=\\\"United States\\\">United States</option><option value=\\\"United States Minor Outlying Islands\\\">United States Minor Outlying Islands</option><option value=Uruguay>Uruguay</option><option value=Uzbekistan>Uzbekistan</option><option value=Vanuatu>Vanuatu</option><option value=Venezuela>Venezuela</option><option value=Vietnam>Vietnam</option><option value=\\\"Virgin Islands (British)\\\">Virgin Islands (British)</option><option value=\\\"Virgin Islands (U.S)\\\">Virgin Islands (U.S.)</option><option value=\\\"Wallis and Futana Islands\\\">Wallis and Futuna Islands</option><option value=\\\"Western Sahara\\\">Western Sahara</option><option value=Yemen>Yemen</option><option value=Yugoslavia>Yugoslavia</option><option value=Zambia>Zambia</option><option value=Zimbabwe>Zimbabwe</option></select></div></div><div class=\\\"uk-address-form fade\\\" ng-show=\\\"scope.story.person.country === \\'United Kingdom\\'\\\"><div class=form-group><label for=address_line_1 class=required ng-class=\\\"{\\'to-fix\\': form2.address_line_1.$error.required && form2.address_line_1.$dirty}\\\"><div class=form-helper-text>Your Address Line 1</div></label><input type=text class=form-control name=address_line_1 id=address_line_1 ng-model=scope.story.person.address_line_1 placeholder=\\\"{{(form2.address_line_1.$error.required && form2.address_line_1.$dirty) ? \\'Please tell us your address_line_1\\' : \\'\\'}}\\\" required></div><div class=form-group><label for=address_line_2><div class=form-helper-text>Your Address Line 2</div></label><input type=text class=form-control name=address_line_2 id=address_line_2 ng-model=scope.story.person.address_line_2></div><div class=form-group><label for=address_line_3><div class=form-helper-text>Your Address Line 3</div></label><input type=text class=form-control name=address_line_3 id=address_line_3 ng-model=scope.story.person.address_line_3></div><div class=form-group><label for=town><div class=form-helper-text>Your town</div></label><input type=text class=form-control name=town id=town ng-model=scope.story.person.town></div><div class=form-group><label for=county><div class=form-helper-text>Your county</div></label><input type=text class=form-control name=county id=county ng-model=scope.story.person.county></div><div class=form-group><label for=postcode class=required ng-class=\\\"{\\'to-fix\\': form2.postcode.$error.required && form2.postcode.$dirty}\\\"><div class=form-helper-text>Your Postcode</div></label><input type=text class=form-control name=postcode id=postcode ng-model=scope.story.person.postcode placeholder=\\\"{{(form2.postcode.$error.required && form2.postcode.$dirty) ? \\'Please tell us your Postcode\\' : \\'\\'}}\\\" required></div></div><div class=\\\"purple-message-box fade\\\" ng-show=\\\"scope.story.person.country !== \\'United Kingdom\\' && form2.country.$dirty\\\">Unfortunately if you live outside the UK we cannot send you a gift. However, please submit a story for a chance to be included on our website.</div></form><form action=\\\"\\\" role=form name=form3 id=checkbox-form class=form-checkboxes><div class=\\\"form-group lhr-checkbox\\\" ng-class=\\\"{\\'to-fix\\': form3.isOver18.$error.required\\n                && form3.isOver18.$dirty}\\\"><div class=lhr-checkbox--text><label>I am over 18 years of age.</label><div class=required-checkbox>*</div></div><input type=checkbox required name=isOver18 id=isOver18 ng-model=scope.checks.isOver18></div><div class=\\\"form-group lhr-checkbox\\\" ng-class=\\\"{\\'to-fix\\': form3.termsConditions.$error.required\\n                && form3.termsConditions.$dirty}\\\"><label>I have read and agree with the <a class=link href=/page/terms target=_blank>terms and conditions</a>.</label><div class=required-checkbox>*</div><input type=checkbox required name=termsConditions id=termsConditions ng-model=scope.checks.termsConditions></div><div class=\\\"form-group lhr-checkbox\\\"><div class=lhr-checkbox--text><label>I would like to receive updates and offers from Heathrow from time to time.</label></div><input type=checkbox ng-model=scope.story.agree_marketing></div></form><button type=submit class=\\\"btn btn-submit form-group\\\" ng-click=\\\"scope.submitForm(form, form2, form3)\\\" ng-class=\\\"{\\'disabled\\':!scope.checks.isOver18 && !scope.checks.termsConditions}\\\"><div class=btn-text>Add Your Story</div><div class=icon-plane-takeoff></div></button><div class=mandatory>* Mandatory Fields</div></div><ng-include ng-show=scope.isSubmitted src=\\\"\\'app/components/messagebox/messagebox.html\\'\\\"></ng-include></div>\");}]);"],"sourceRoot":"/source/"}